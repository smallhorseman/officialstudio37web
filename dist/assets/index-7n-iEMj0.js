import{r as Pc,a as Ic,g as St,b as Ac}from"./vendor-B1sUnLqs.js";import{R as K,r as D,a as Dc,b as Tc,u as Ys,c as jc,d as ut,L as tt,e as Oc,f as Xs,B as Nc}from"./router-B67qUrsN.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Or={exports:{}},pn={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var La;function Rc(){if(La)return pn;La=1;var e=Pc(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(s,l,u){var d,c={},h=null,f=null;u!==void 0&&(h=""+u),l.key!==void 0&&(h=""+l.key),l.ref!==void 0&&(f=l.ref);for(d in l)r.call(l,d)&&!a.hasOwnProperty(d)&&(c[d]=l[d]);if(s&&s.defaultProps)for(d in l=s.defaultProps,l)c[d]===void 0&&(c[d]=l[d]);return{$$typeof:t,type:s,key:h,ref:f,props:c,_owner:i.current}}return pn.Fragment=n,pn.jsx=o,pn.jsxs=o,pn}var Fa;function Lc(){return Fa||(Fa=1,Or.exports=Rc()),Or.exports}var p=Lc(),zn={},Ba;function Fc(){if(Ba)return zn;Ba=1;var e=Ic();return zn.createRoot=e.createRoot,zn.hydrateRoot=e.hydrateRoot,zn}var Bc=Fc();const Mc=St(Bc);function Ci(e,t){return Ci=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Ci(e,t)}function Qs(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ci(e,t)}function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(null,arguments)}function Pn(e){"@babel/helpers - typeof";return Pn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pn(e)}function $c(e,t){if(Pn(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Pn(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uc(e){var t=$c(e,"string");return Pn(t)=="symbol"?t:t+""}function zc(e,t,n){return(t=Uc(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ma(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $a(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ma(Object(n),!0).forEach(function(r){zc(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ma(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Me(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Ua=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})(),za=function(){return Math.random().toString(36).substring(7).split("").join(".")},qa={INIT:"@@redux/INIT"+za(),REPLACE:"@@redux/REPLACE"+za()};function qc(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Zs(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Me(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Me(1));return n(Zs)(e,t)}if(typeof e!="function")throw new Error(Me(2));var i=e,a=t,o=[],s=o,l=!1;function u(){s===o&&(s=o.slice())}function d(){if(l)throw new Error(Me(3));return a}function c(v){if(typeof v!="function")throw new Error(Me(4));if(l)throw new Error(Me(5));var m=!0;return u(),s.push(v),function(){if(m){if(l)throw new Error(Me(6));m=!1,u();var S=s.indexOf(v);s.splice(S,1),o=null}}}function h(v){if(!qc(v))throw new Error(Me(7));if(typeof v.type>"u")throw new Error(Me(8));if(l)throw new Error(Me(9));try{l=!0,a=i(a,v)}finally{l=!1}for(var m=o=s,b=0;b<m.length;b++){var S=m[b];S()}return v}function f(v){if(typeof v!="function")throw new Error(Me(10));i=v,h({type:qa.REPLACE})}function g(){var v,m=c;return v={subscribe:function(S){if(typeof S!="object"||S===null)throw new Error(Me(11));function x(){S.next&&S.next(d())}x();var E=m(x);return{unsubscribe:E}}},v[Ua]=function(){return this},v}return h({type:qa.INIT}),r={dispatch:h,subscribe:c,getState:d,replaceReducer:f},r[Ua]=g,r}function Wa(e,t){return function(){return t(e.apply(this,arguments))}}function Ha(e,t){if(typeof e=="function")return Wa(e,t);if(typeof e!="object"||e===null)throw new Error(Me(16));var n={};for(var r in e){var i=e[r];typeof i=="function"&&(n[r]=Wa(i,t))}return n}function el(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function Wc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),a=function(){throw new Error(Me(15))},o={getState:i.getState,dispatch:function(){return a.apply(void 0,arguments)}},s=t.map(function(l){return l(o)});return a=el.apply(void 0,s)(i.dispatch),$a($a({},i),{},{dispatch:a})}}}var Nr={exports:{}},Rr,Ga;function Hc(){if(Ga)return Rr;Ga=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Rr=e,Rr}var Lr,Va;function Gc(){if(Va)return Lr;Va=1;var e=Hc();function t(){}function n(){}return n.resetWarningCache=t,Lr=function(){function r(o,s,l,u,d,c){if(c!==e){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return a.PropTypes=a,a},Lr}var Ka;function Vc(){return Ka||(Ka=1,Nr.exports=Gc()()),Nr.exports}var Kc=Vc();const G=St(Kc);var tl=K.createContext(null);function Jc(e){e()}var nl=Jc,Yc=function(t){return nl=t},Xc=function(){return nl};function Qc(){var e=Xc(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e(function(){for(var i=t;i;)i.callback(),i=i.next})},get:function(){for(var i=[],a=t;a;)i.push(a),a=a.next;return i},subscribe:function(i){var a=!0,o=n={callback:i,next:null,prev:n};return o.prev?o.prev.next=o:t=o,function(){!a||t===null||(a=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}var Ja={notify:function(){},get:function(){return[]}};function rl(e,t){var n,r=Ja;function i(c){return l(),r.subscribe(c)}function a(){r.notify()}function o(){d.onStateChange&&d.onStateChange()}function s(){return!!n}function l(){n||(n=t?t.addNestedSub(o):e.subscribe(o),r=Qc())}function u(){n&&(n(),n=void 0,r.clear(),r=Ja)}var d={addNestedSub:i,notifyNestedSubs:a,handleChangeWrapper:o,isSubscribed:s,trySubscribe:l,tryUnsubscribe:u,getListeners:function(){return r}};return d}var il=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?D.useLayoutEffect:D.useEffect;function Zc(e){var t=e.store,n=e.context,r=e.children,i=D.useMemo(function(){var s=rl(t);return{store:t,subscription:s}},[t]),a=D.useMemo(function(){return t.getState()},[t]);il(function(){var s=i.subscription;return s.onStateChange=s.notifyNestedSubs,s.trySubscribe(),a!==t.getState()&&s.notifyNestedSubs(),function(){s.tryUnsubscribe(),s.onStateChange=null}},[i,a]);var o=n||tl;return K.createElement(o.Provider,{value:i},r)}function ar(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Fr={exports:{}},re={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ya;function ed(){if(Ya)return re;Ya=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,a=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,s=e?Symbol.for("react.context"):60110,l=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,c=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,f=e?Symbol.for("react.memo"):60115,g=e?Symbol.for("react.lazy"):60116,v=e?Symbol.for("react.block"):60121,m=e?Symbol.for("react.fundamental"):60117,b=e?Symbol.for("react.responder"):60118,S=e?Symbol.for("react.scope"):60119;function x(w){if(typeof w=="object"&&w!==null){var y=w.$$typeof;switch(y){case t:switch(w=w.type,w){case l:case u:case r:case a:case i:case c:return w;default:switch(w=w&&w.$$typeof,w){case s:case d:case g:case f:case o:return w;default:return y}}case n:return y}}}function E(w){return x(w)===u}return re.AsyncMode=l,re.ConcurrentMode=u,re.ContextConsumer=s,re.ContextProvider=o,re.Element=t,re.ForwardRef=d,re.Fragment=r,re.Lazy=g,re.Memo=f,re.Portal=n,re.Profiler=a,re.StrictMode=i,re.Suspense=c,re.isAsyncMode=function(w){return E(w)||x(w)===l},re.isConcurrentMode=E,re.isContextConsumer=function(w){return x(w)===s},re.isContextProvider=function(w){return x(w)===o},re.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===t},re.isForwardRef=function(w){return x(w)===d},re.isFragment=function(w){return x(w)===r},re.isLazy=function(w){return x(w)===g},re.isMemo=function(w){return x(w)===f},re.isPortal=function(w){return x(w)===n},re.isProfiler=function(w){return x(w)===a},re.isStrictMode=function(w){return x(w)===i},re.isSuspense=function(w){return x(w)===c},re.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===r||w===u||w===a||w===i||w===c||w===h||typeof w=="object"&&w!==null&&(w.$$typeof===g||w.$$typeof===f||w.$$typeof===o||w.$$typeof===s||w.$$typeof===d||w.$$typeof===m||w.$$typeof===b||w.$$typeof===S||w.$$typeof===v)},re.typeOf=x,re}var Xa;function td(){return Xa||(Xa=1,Fr.exports=ed()),Fr.exports}var Br,Qa;function nd(){if(Qa)return Br;Qa=1;var e=td(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};a[e.ForwardRef]=r,a[e.Memo]=i;function o(g){return e.isMemo(g)?i:a[g.$$typeof]||t}var s=Object.defineProperty,l=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,c=Object.getPrototypeOf,h=Object.prototype;function f(g,v,m){if(typeof v!="string"){if(h){var b=c(v);b&&b!==h&&f(g,b,m)}var S=l(v);u&&(S=S.concat(u(v)));for(var x=o(g),E=o(v),w=0;w<S.length;++w){var y=S[w];if(!n[y]&&!(m&&m[y])&&!(E&&E[y])&&!(x&&x[y])){var P=d(v,y);try{s(g,y,P)}catch{}}}}return g}return Br=f,Br}var rd=nd();const Za=St(rd);var Mr={exports:{}},se={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eo;function id(){if(eo)return se;eo=1;var e=60103,t=60106,n=60107,r=60108,i=60114,a=60109,o=60110,s=60112,l=60113,u=60120,d=60115,c=60116,h=60121,f=60122,g=60117,v=60129,m=60131;if(typeof Symbol=="function"&&Symbol.for){var b=Symbol.for;e=b("react.element"),t=b("react.portal"),n=b("react.fragment"),r=b("react.strict_mode"),i=b("react.profiler"),a=b("react.provider"),o=b("react.context"),s=b("react.forward_ref"),l=b("react.suspense"),u=b("react.suspense_list"),d=b("react.memo"),c=b("react.lazy"),h=b("react.block"),f=b("react.server.block"),g=b("react.fundamental"),v=b("react.debug_trace_mode"),m=b("react.legacy_hidden")}function S(I){if(typeof I=="object"&&I!==null){var N=I.$$typeof;switch(N){case e:switch(I=I.type,I){case n:case i:case r:case l:case u:return I;default:switch(I=I&&I.$$typeof,I){case o:case s:case c:case d:case a:return I;default:return N}}case t:return N}}}var x=a,E=e,w=s,y=n,P=c,L=d,O=t,_=i,A=r,j=l;return se.ContextConsumer=o,se.ContextProvider=x,se.Element=E,se.ForwardRef=w,se.Fragment=y,se.Lazy=P,se.Memo=L,se.Portal=O,se.Profiler=_,se.StrictMode=A,se.Suspense=j,se.isAsyncMode=function(){return!1},se.isConcurrentMode=function(){return!1},se.isContextConsumer=function(I){return S(I)===o},se.isContextProvider=function(I){return S(I)===a},se.isElement=function(I){return typeof I=="object"&&I!==null&&I.$$typeof===e},se.isForwardRef=function(I){return S(I)===s},se.isFragment=function(I){return S(I)===n},se.isLazy=function(I){return S(I)===c},se.isMemo=function(I){return S(I)===d},se.isPortal=function(I){return S(I)===t},se.isProfiler=function(I){return S(I)===i},se.isStrictMode=function(I){return S(I)===r},se.isSuspense=function(I){return S(I)===l},se.isValidElementType=function(I){return typeof I=="string"||typeof I=="function"||I===n||I===i||I===v||I===r||I===l||I===u||I===m||typeof I=="object"&&I!==null&&(I.$$typeof===c||I.$$typeof===d||I.$$typeof===a||I.$$typeof===o||I.$$typeof===s||I.$$typeof===g||I.$$typeof===h||I[0]===f)},se.typeOf=S,se}var to;function ad(){return to||(to=1,Mr.exports=id()),Mr.exports}var od=ad(),sd=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],ld=["reactReduxForwardedRef"],ud=[],cd=[null,null];function dd(e,t){var n=e[1];return[t.payload,n+1]}function no(e,t,n){il(function(){return e.apply(void 0,t)},n)}function hd(e,t,n,r,i,a,o){e.current=r,t.current=i,n.current=!1,a.current&&(a.current=null,o())}function fd(e,t,n,r,i,a,o,s,l,u){if(e){var d=!1,c=null,h=function(){if(!d){var v=t.getState(),m,b;try{m=r(v,i.current)}catch(S){b=S,c=S}b||(c=null),m===a.current?o.current||l():(a.current=m,s.current=m,o.current=!0,u({type:"STORE_UPDATED",payload:{error:b}}))}};n.onStateChange=h,n.trySubscribe(),h();var f=function(){if(d=!0,n.tryUnsubscribe(),n.onStateChange=null,c)throw c};return f}}var pd=function(){return[null,0]};function gd(e,t){t===void 0&&(t={});var n=t,r=n.getDisplayName,i=r===void 0?function(x){return"ConnectAdvanced("+x+")"}:r,a=n.methodName,o=a===void 0?"connectAdvanced":a,s=n.renderCountProp,l=s===void 0?void 0:s,u=n.shouldHandleStateChanges,d=u===void 0?!0:u,c=n.storeKey,h=c===void 0?"store":c;n.withRef;var f=n.forwardRef,g=f===void 0?!1:f,v=n.context,m=v===void 0?tl:v,b=ar(n,sd),S=m;return function(E){var w=E.displayName||E.name||"Component",y=i(w),P=W({},b,{getDisplayName:i,methodName:o,renderCountProp:l,shouldHandleStateChanges:d,storeKey:h,displayName:y,wrappedComponentName:w,WrappedComponent:E}),L=b.pure;function O(N){return e(N.dispatch,P)}var _=L?D.useMemo:function(N){return N()};function A(N){var M=D.useMemo(function(){var _t=N.reactReduxForwardedRef,Mt=ar(N,ld);return[N.context,_t,Mt]},[N]),V=M[0],te=M[1],de=M[2],he=D.useMemo(function(){return V&&V.Consumer&&od.isContextConsumer(K.createElement(V.Consumer,null))?V:S},[V,S]),k=D.useContext(he),ve=!!N.store&&!!N.store.getState&&!!N.store.dispatch;k&&k.store;var fe=ve?N.store:k.store,C=D.useMemo(function(){return O(fe)},[fe]),ye=D.useMemo(function(){if(!d)return cd;var _t=rl(fe,ve?null:k.subscription),Mt=_t.notifyNestedSubs.bind(_t);return[_t,Mt]},[fe,ve,k]),xe=ye[0],pe=ye[1],Oe=D.useMemo(function(){return ve?k:W({},k,{subscription:xe})},[ve,k,xe]),Ie=D.useReducer(dd,ud,pd),Fe=Ie[0],Ae=Fe[0],$=Ie[1];if(Ae&&Ae.error)throw Ae.error;var ae=D.useRef(),z=D.useRef(de),ne=D.useRef(),Ce=D.useRef(!1),Te=_(function(){return ne.current&&de===z.current?ne.current:C(fe.getState(),de)},[fe,Ae,de]);no(hd,[z,ae,Ce,de,Te,ne,pe]),no(fd,[d,fe,xe,C,z,ae,Ce,ne,pe,$],[fe,xe,C]);var Bt=D.useMemo(function(){return K.createElement(E,W({},Te,{ref:te}))},[te,E,Te]),Un=D.useMemo(function(){return d?K.createElement(he.Provider,{value:Oe},Bt):Bt},[he,Bt,Oe]);return Un}var j=L?K.memo(A):A;if(j.WrappedComponent=E,j.displayName=A.displayName=y,g){var I=K.forwardRef(function(M,V){return K.createElement(j,W({},M,{reactReduxForwardedRef:V}))});return I.displayName=y,I.WrappedComponent=E,Za(I,E)}return Za(j,E)}}function ro(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function $r(e,t){if(ro(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!ro(e[n[i]],t[n[i]]))return!1;return!0}function md(e,t){var n={},r=function(o){var s=e[o];typeof s=="function"&&(n[o]=function(){return t(s.apply(void 0,arguments))})};for(var i in e)r(i);return n}function Xi(e){return function(n,r){var i=e(n,r);function a(){return i}return a.dependsOnOwnProps=!1,a}}function io(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function al(e,t){return function(r,i){i.displayName;var a=function(s,l){return a.dependsOnOwnProps?a.mapToProps(s,l):a.mapToProps(s)};return a.dependsOnOwnProps=!0,a.mapToProps=function(s,l){a.mapToProps=e,a.dependsOnOwnProps=io(e);var u=a(s,l);return typeof u=="function"&&(a.mapToProps=u,a.dependsOnOwnProps=io(u),u=a(s,l)),u},a}}function vd(e){return typeof e=="function"?al(e):void 0}function bd(e){return e?void 0:Xi(function(t){return{dispatch:t}})}function yd(e){return e&&typeof e=="object"?Xi(function(t){return md(e,t)}):void 0}const xd=[vd,bd,yd];function wd(e){return typeof e=="function"?al(e):void 0}function Sd(e){return e?void 0:Xi(function(){return{}})}const kd=[wd,Sd];function Cd(e,t,n){return W({},n,e,t)}function Ed(e){return function(n,r){r.displayName;var i=r.pure,a=r.areMergedPropsEqual,o=!1,s;return function(u,d,c){var h=e(u,d,c);return o?(!i||!a(h,s))&&(s=h):(o=!0,s=h),s}}}function _d(e){return typeof e=="function"?Ed(e):void 0}function Pd(e){return e?void 0:function(){return Cd}}const Id=[_d,Pd];var Ad=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Dd(e,t,n,r){return function(a,o){return n(e(a,o),t(r,o),o)}}function Td(e,t,n,r,i){var a=i.areStatesEqual,o=i.areOwnPropsEqual,s=i.areStatePropsEqual,l=!1,u,d,c,h,f;function g(x,E){return u=x,d=E,c=e(u,d),h=t(r,d),f=n(c,h,d),l=!0,f}function v(){return c=e(u,d),t.dependsOnOwnProps&&(h=t(r,d)),f=n(c,h,d),f}function m(){return e.dependsOnOwnProps&&(c=e(u,d)),t.dependsOnOwnProps&&(h=t(r,d)),f=n(c,h,d),f}function b(){var x=e(u,d),E=!s(x,c);return c=x,E&&(f=n(c,h,d)),f}function S(x,E){var w=!o(E,d),y=!a(x,u,E,d);return u=x,d=E,w&&y?v():w?m():y?b():f}return function(E,w){return l?S(E,w):g(E,w)}}function jd(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,a=ar(t,Ad),o=n(e,a),s=r(e,a),l=i(e,a),u=a.pure?Td:Dd;return u(o,s,l,e,a)}var Od=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function Ur(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(a,o){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+o.wrappedComponentName+".")}}function Nd(e,t){return e===t}function Rd(e){var t=e===void 0?{}:e,n=t.connectHOC,r=n===void 0?gd:n,i=t.mapStateToPropsFactories,a=i===void 0?kd:i,o=t.mapDispatchToPropsFactories,s=o===void 0?xd:o,l=t.mergePropsFactories,u=l===void 0?Id:l,d=t.selectorFactory,c=d===void 0?jd:d;return function(f,g,v,m){m===void 0&&(m={});var b=m,S=b.pure,x=S===void 0?!0:S,E=b.areStatesEqual,w=E===void 0?Nd:E,y=b.areOwnPropsEqual,P=y===void 0?$r:y,L=b.areStatePropsEqual,O=L===void 0?$r:L,_=b.areMergedPropsEqual,A=_===void 0?$r:_,j=ar(b,Od),I=Ur(f,a,"mapStateToProps"),N=Ur(g,s,"mapDispatchToProps"),M=Ur(v,u,"mergeProps");return r(c,W({methodName:"connect",getDisplayName:function(te){return"Connect("+te+")"},shouldHandleStateChanges:!!f,initMapStateToProps:I,initMapDispatchToProps:N,initMergeProps:M,pure:x,areStatesEqual:w,areOwnPropsEqual:P,areStatePropsEqual:O,areMergedPropsEqual:A},j))}}const ol=Rd();Yc(Dc.unstable_batchedUpdates);function Ld(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function sl(e,t){var n=D.useState(function(){return{inputs:t,result:e()}})[0],r=D.useRef(!0),i=D.useRef(n),a=r.current||!!(t&&i.current.inputs&&Ld(t,i.current.inputs)),o=a?i.current:{inputs:t,result:e()};return D.useEffect(function(){r.current=!1,i.current=o},[o]),o.result}function Fd(e,t){return sl(function(){return e},t)}var ee=sl,U=Fd,Bd="Invariant failed";function Md(e,t){throw new Error(Bd)}var nt=function(t){var n=t.top,r=t.right,i=t.bottom,a=t.left,o=r-a,s=i-n,l={top:n,right:r,bottom:i,left:a,width:o,height:s,x:a,y:n,center:{x:(r+a)/2,y:(i+n)/2}};return l},Qi=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},ao=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},$d=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},zr={top:0,right:0,bottom:0,left:0},Zi=function(t){var n=t.borderBox,r=t.margin,i=r===void 0?zr:r,a=t.border,o=a===void 0?zr:a,s=t.padding,l=s===void 0?zr:s,u=nt(Qi(n,i)),d=nt(ao(n,o)),c=nt(ao(d,l));return{marginBox:u,borderBox:nt(n),paddingBox:d,contentBox:c,margin:i,border:o,padding:l}},He=function(t){var n=t.slice(0,-2),r=t.slice(-2);if(r!=="px")return 0;var i=Number(n);return isNaN(i)&&Md(),i},Ud=function(){return{x:window.pageXOffset,y:window.pageYOffset}},or=function(t,n){var r=t.borderBox,i=t.border,a=t.margin,o=t.padding,s=$d(r,n);return Zi({borderBox:s,border:i,margin:a,padding:o})},sr=function(t,n){return n===void 0&&(n=Ud()),or(t,n)},ll=function(t,n){var r={top:He(n.marginTop),right:He(n.marginRight),bottom:He(n.marginBottom),left:He(n.marginLeft)},i={top:He(n.paddingTop),right:He(n.paddingRight),bottom:He(n.paddingBottom),left:He(n.paddingLeft)},a={top:He(n.borderTopWidth),right:He(n.borderRightWidth),bottom:He(n.borderBottomWidth),left:He(n.borderLeftWidth)};return Zi({borderBox:t,margin:r,padding:i,border:a})},ul=function(t){var n=t.getBoundingClientRect(),r=window.getComputedStyle(t);return ll(n,r)},oo=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function zd(e,t){return!!(e===t||oo(e)&&oo(t))}function qd(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!zd(e[n],t[n]))return!1;return!0}function _e(e,t){t===void 0&&(t=qd);var n,r=[],i,a=!1;function o(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];return a&&n===this&&t(s,r)||(i=e.apply(this,s),a=!0,n=this,r=s),i}return o}var In=function(t){var n=[],r=null,i=function(){for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];n=s,!r&&(r=requestAnimationFrame(function(){r=null,t.apply(void 0,n)}))};return i.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},i};function cl(e,t){}cl.bind(null,"warn");cl.bind(null,"error");function bt(){}function Wd(e,t){return W({},e,{},t)}function Ke(e,t,n){var r=t.map(function(i){var a=Wd(n,i.options);return e.addEventListener(i.eventName,i.fn,a),function(){e.removeEventListener(i.eventName,i.fn,a)}});return function(){r.forEach(function(a){a()})}}var Hd="Invariant failed";function lr(e){this.message=e}lr.prototype.toString=function(){return this.message};function F(e,t){throw new lr(Hd)}var Gd=(function(e){Qs(t,e);function t(){for(var r,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a))||this,r.callbacks=null,r.unbind=bt,r.onWindowError=function(s){var l=r.getCallbacks();l.isDragging()&&l.tryAbort();var u=s.error;u instanceof lr&&s.preventDefault()},r.getCallbacks=function(){if(!r.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return r.callbacks},r.setCallbacks=function(s){r.callbacks=s},r}var n=t.prototype;return n.componentDidMount=function(){this.unbind=Ke(window,[{eventName:"error",fn:this.onWindowError}])},n.componentDidCatch=function(i){if(i instanceof lr){this.setState({});return}throw i},n.componentWillUnmount=function(){this.unbind()},n.render=function(){return this.props.children(this.setCallbacks)},t})(K.Component),Vd=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,ur=function(t){return t+1},Kd=function(t){return`
  You have lifted an item in position `+ur(t.source.index)+`
`},dl=function(t,n){var r=t.droppableId===n.droppableId,i=ur(t.index),a=ur(n.index);return r?`
      You have moved the item from position `+i+`
      to position `+a+`
    `:`
    You have moved the item from position `+i+`
    in list `+t.droppableId+`
    to list `+n.droppableId+`
    in position `+a+`
  `},hl=function(t,n,r){var i=n.droppableId===r.droppableId;return i?`
      The item `+t+`
      has been combined with `+r.draggableId:`
      The item `+t+`
      in list `+n.droppableId+`
      has been combined with `+r.draggableId+`
      in list `+r.droppableId+`
    `},Jd=function(t){var n=t.destination;if(n)return dl(t.source,n);var r=t.combine;return r?hl(t.draggableId,t.source,r):"You are over an area that cannot be dropped on"},so=function(t){return`
  The item has returned to its starting position
  of `+ur(t.index)+`
`},Yd=function(t){if(t.reason==="CANCEL")return`
      Movement cancelled.
      `+so(t.source)+`
    `;var n=t.destination,r=t.combine;return n?`
      You have dropped the item.
      `+dl(t.source,n)+`
    `:r?`
      You have dropped the item.
      `+hl(t.draggableId,t.source,r)+`
    `:`
    The item has been dropped while not over a drop area.
    `+so(t.source)+`
  `},rr={dragHandleUsageInstructions:Vd,onDragStart:Kd,onDragUpdate:Jd,onDragEnd:Yd},Pe={x:0,y:0},De=function(t,n){return{x:t.x+n.x,y:t.y+n.y}},Ue=function(t,n){return{x:t.x-n.x,y:t.y-n.y}},yt=function(t,n){return t.x===n.x&&t.y===n.y},on=function(t){return{x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}},Nt=function(t,n,r){var i;return r===void 0&&(r=0),i={},i[t]=n,i[t==="x"?"y":"x"]=r,i},An=function(t,n){return Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2))},lo=function(t,n){return Math.min.apply(Math,n.map(function(r){return An(t,r)}))},fl=function(t){return function(n){return{x:t(n.x),y:t(n.y)}}},Xd=(function(e,t){var n=nt({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n}),Nn=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},uo=function(t){return[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}]},Qd={top:0,right:0,bottom:0,left:0},Zd=function(t,n){return n?Nn(t,n.scroll.diff.displacement):t},eh=function(t,n,r){if(r&&r.increasedBy){var i;return W({},t,(i={},i[n.end]=t[n.end]+r.increasedBy[n.line],i))}return t},th=function(t,n){return n&&n.shouldClipSubject?Xd(n.pageMarginBox,t):nt(t)},tn=(function(e){var t=e.page,n=e.withPlaceholder,r=e.axis,i=e.frame,a=Zd(t.marginBox,i),o=eh(a,r,n),s=th(o,i);return{page:t,withPlaceholder:n,active:s}}),ea=(function(e,t){e.frame||F();var n=e.frame,r=Ue(t,n.scroll.initial),i=on(r),a=W({},n,{scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:i},max:n.scroll.max}}),o=tn({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:a}),s=W({},e,{frame:a,subject:o});return s});function cr(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function ta(e,t){if(e.findIndex)return e.findIndex(t);for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}function kt(e,t){if(e.find)return e.find(t);var n=ta(e,t);if(n!==-1)return e[n]}function pl(e){return Array.prototype.slice.call(e)}var gl=_e(function(e){return e.reduce(function(t,n){return t[n.descriptor.id]=n,t},{})}),ml=_e(function(e){return e.reduce(function(t,n){return t[n.descriptor.id]=n,t},{})}),yr=_e(function(e){return cr(e)}),nh=_e(function(e){return cr(e)}),sn=_e(function(e,t){var n=nh(t).filter(function(r){return e===r.descriptor.droppableId}).sort(function(r,i){return r.descriptor.index-i.descriptor.index});return n});function na(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function xr(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var wr=_e(function(e,t){return t.filter(function(n){return n.descriptor.id!==e.descriptor.id})}),rh=(function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,i=e.insideDestination,a=e.previousImpact;if(!r.isCombineEnabled)return null;var o=na(a);if(!o)return null;function s(v){var m={type:"COMBINE",combine:{draggableId:v,droppableId:r.descriptor.id}};return W({},a,{at:m})}var l=a.displaced.all,u=l.length?l[0]:null;if(t)return u?s(u):null;var d=wr(n,i);if(!u){if(!d.length)return null;var c=d[d.length-1];return s(c.descriptor.id)}var h=ta(d,function(v){return v.descriptor.id===u});h===-1&&F();var f=h-1;if(f<0)return null;var g=d[f];return s(g.descriptor.id)}),ln=(function(e,t){return e.descriptor.droppableId===t.descriptor.id}),vl={point:Pe,value:0},Dn={invisible:{},visible:{},all:[]},ih={displaced:Dn,displacedBy:vl,at:null},Je=(function(e,t){return function(n){return e<=n&&n<=t}}),bl=(function(e){var t=Je(e.top,e.bottom),n=Je(e.left,e.right);return function(r){var i=t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right);if(i)return!0;var a=t(r.top)||t(r.bottom),o=n(r.left)||n(r.right),s=a&&o;if(s)return!0;var l=r.top<e.top&&r.bottom>e.bottom,u=r.left<e.left&&r.right>e.right,d=l&&u;if(d)return!0;var c=l&&o||u&&a;return c}}),ah=(function(e){var t=Je(e.top,e.bottom),n=Je(e.left,e.right);return function(r){var i=t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right);return i}}),ra={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},yl={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},oh=(function(e){return function(t){var n=Je(t.top,t.bottom),r=Je(t.left,t.right);return function(i){return e===ra?n(i.top)&&n(i.bottom):r(i.left)&&r(i.right)}}}),sh=function(t,n){var r=n.frame?n.frame.scroll.diff.displacement:Pe;return Nn(t,r)},lh=function(t,n,r){return n.subject.active?r(n.subject.active)(t):!1},uh=function(t,n,r){return r(n)(t)},ia=function(t){var n=t.target,r=t.destination,i=t.viewport,a=t.withDroppableDisplacement,o=t.isVisibleThroughFrameFn,s=a?sh(n,r):n;return lh(s,r,o)&&uh(s,i,o)},ch=function(t){return ia(W({},t,{isVisibleThroughFrameFn:bl}))},xl=function(t){return ia(W({},t,{isVisibleThroughFrameFn:ah}))},dh=function(t){return ia(W({},t,{isVisibleThroughFrameFn:oh(t.destination.axis)}))},hh=function(t,n,r){if(typeof r=="boolean")return r;if(!n)return!0;var i=n.invisible,a=n.visible;if(i[t])return!1;var o=a[t];return o?o.shouldAnimate:!0};function fh(e,t){var n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return nt(Qi(n,r))}function Tn(e){var t=e.afterDragging,n=e.destination,r=e.displacedBy,i=e.viewport,a=e.forceShouldAnimate,o=e.last;return t.reduce(function(l,u){var d=fh(u,r),c=u.descriptor.id;l.all.push(c);var h=ch({target:d,destination:n,viewport:i,withDroppableDisplacement:!0});if(!h)return l.invisible[u.descriptor.id]=!0,l;var f=hh(c,o,a),g={draggableId:c,shouldAnimate:f};return l.visible[c]=g,l},{all:[],visible:{},invisible:{}})}function ph(e,t){if(!e.length)return 0;var n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function co(e){var t=e.insideDestination,n=e.inHomeList,r=e.displacedBy,i=e.destination,a=ph(t,{inHomeList:n});return{displaced:Dn,displacedBy:r,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:a}}}}function dr(e){var t=e.draggable,n=e.insideDestination,r=e.destination,i=e.viewport,a=e.displacedBy,o=e.last,s=e.index,l=e.forceShouldAnimate,u=ln(t,r);if(s==null)return co({insideDestination:n,inHomeList:u,displacedBy:a,destination:r});var d=kt(n,function(v){return v.descriptor.index===s});if(!d)return co({insideDestination:n,inHomeList:u,displacedBy:a,destination:r});var c=wr(t,n),h=n.indexOf(d),f=c.slice(h),g=Tn({afterDragging:f,destination:r,displacedBy:a,last:o,viewport:i.frame,forceShouldAnimate:l});return{displaced:g,displacedBy:a,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:s}}}}function wt(e,t){return!!t.effected[e]}var gh=(function(e){var t=e.isMovingForward,n=e.destination,r=e.draggables,i=e.combine,a=e.afterCritical;if(!n.isCombineEnabled)return null;var o=i.draggableId,s=r[o],l=s.descriptor.index,u=wt(o,a);return u?t?l:l-1:t?l+1:l}),mh=(function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.insideDestination,i=e.location;if(!r.length)return null;var a=i.index,o=t?a+1:a-1,s=r[0].descriptor.index,l=r[r.length-1].descriptor.index,u=n?l:l+1;return o<s||o>u?null:o}),vh=(function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.draggable,i=e.draggables,a=e.destination,o=e.insideDestination,s=e.previousImpact,l=e.viewport,u=e.afterCritical,d=s.at;if(d||F(),d.type==="REORDER"){var c=mh({isMovingForward:t,isInHomeList:n,location:d.destination,insideDestination:o});return c==null?null:dr({draggable:r,insideDestination:o,destination:a,viewport:l,last:s.displaced,displacedBy:s.displacedBy,index:c})}var h=gh({isMovingForward:t,destination:a,displaced:s.displaced,draggables:i,combine:d.combine,afterCritical:u});return h==null?null:dr({draggable:r,insideDestination:o,destination:a,viewport:l,last:s.displaced,displacedBy:s.displacedBy,index:h})}),bh=(function(e){var t=e.displaced,n=e.afterCritical,r=e.combineWith,i=e.displacedBy,a=!!(t.visible[r]||t.invisible[r]);return wt(r,n)?a?Pe:on(i.point):a?i.point:Pe}),yh=(function(e){var t=e.afterCritical,n=e.impact,r=e.draggables,i=xr(n);i||F();var a=i.draggableId,o=r[a].page.borderBox.center,s=bh({displaced:n.displaced,afterCritical:t,combineWith:a,displacedBy:n.displacedBy});return De(o,s)}),wl=function(t,n){return n.margin[t.start]+n.borderBox[t.size]/2},xh=function(t,n){return n.margin[t.end]+n.borderBox[t.size]/2},aa=function(t,n,r){return n[t.crossAxisStart]+r.margin[t.crossAxisStart]+r.borderBox[t.crossAxisSize]/2},ho=function(t){var n=t.axis,r=t.moveRelativeTo,i=t.isMoving;return Nt(n.line,r.marginBox[n.end]+wl(n,i),aa(n,r.marginBox,i))},fo=function(t){var n=t.axis,r=t.moveRelativeTo,i=t.isMoving;return Nt(n.line,r.marginBox[n.start]-xh(n,i),aa(n,r.marginBox,i))},wh=function(t){var n=t.axis,r=t.moveInto,i=t.isMoving;return Nt(n.line,r.contentBox[n.start]+wl(n,i),aa(n,r.contentBox,i))},Sh=(function(e){var t=e.impact,n=e.draggable,r=e.draggables,i=e.droppable,a=e.afterCritical,o=sn(i.descriptor.id,r),s=n.page,l=i.axis;if(!o.length)return wh({axis:l,moveInto:i.page,isMoving:s});var u=t.displaced,d=t.displacedBy,c=u.all[0];if(c){var h=r[c];if(wt(c,a))return fo({axis:l,moveRelativeTo:h.page,isMoving:s});var f=or(h.page,d.point);return fo({axis:l,moveRelativeTo:f,isMoving:s})}var g=o[o.length-1];if(g.descriptor.id===n.descriptor.id)return s.borderBox.center;if(wt(g.descriptor.id,a)){var v=or(g.page,on(a.displacedBy.point));return ho({axis:l,moveRelativeTo:v,isMoving:s})}return ho({axis:l,moveRelativeTo:g.page,isMoving:s})}),Ei=(function(e,t){var n=e.frame;return n?De(t,n.scroll.diff.displacement):t}),kh=function(t){var n=t.impact,r=t.draggable,i=t.droppable,a=t.draggables,o=t.afterCritical,s=r.page.borderBox.center,l=n.at;return!i||!l?s:l.type==="REORDER"?Sh({impact:n,draggable:r,draggables:a,droppable:i,afterCritical:o}):yh({impact:n,draggables:a,afterCritical:o})},Sr=(function(e){var t=kh(e),n=e.droppable,r=n?Ei(n,t):t;return r}),Sl=(function(e,t){var n=Ue(t,e.scroll.initial),r=on(n),i=nt({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),a={frame:i,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}};return a});function po(e,t){return e.map(function(n){return t[n]})}function Ch(e,t){for(var n=0;n<t.length;n++){var r=t[n].visible[e];if(r)return r}return null}var Eh=(function(e){var t=e.impact,n=e.viewport,r=e.destination,i=e.draggables,a=e.maxScrollChange,o=Sl(n,De(n.scroll.current,a)),s=r.frame?ea(r,De(r.frame.scroll.current,a)):r,l=t.displaced,u=Tn({afterDragging:po(l.all,i),destination:r,displacedBy:t.displacedBy,viewport:o.frame,last:l,forceShouldAnimate:!1}),d=Tn({afterDragging:po(l.all,i),destination:s,displacedBy:t.displacedBy,viewport:n.frame,last:l,forceShouldAnimate:!1}),c={},h={},f=[l,u,d];l.all.forEach(function(v){var m=Ch(v,f);if(m){h[v]=m;return}c[v]=!0});var g=W({},t,{displaced:{all:l.all,invisible:c,visible:h}});return g}),_h=(function(e,t){return De(e.scroll.diff.displacement,t)}),oa=(function(e){var t=e.pageBorderBoxCenter,n=e.draggable,r=e.viewport,i=_h(r,t),a=Ue(i,n.page.borderBox.center);return De(n.client.borderBox.center,a)}),kl=(function(e){var t=e.draggable,n=e.destination,r=e.newPageBorderBoxCenter,i=e.viewport,a=e.withDroppableDisplacement,o=e.onlyOnMainAxis,s=o===void 0?!1:o,l=Ue(r,t.page.borderBox.center),u=Nn(t.page.borderBox,l),d={target:u,destination:n,withDroppableDisplacement:a,viewport:i};return s?dh(d):xl(d)}),Ph=(function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,i=e.draggables,a=e.previousImpact,o=e.viewport,s=e.previousPageBorderBoxCenter,l=e.previousClientSelection,u=e.afterCritical;if(!r.isEnabled)return null;var d=sn(r.descriptor.id,i),c=ln(n,r),h=rh({isMovingForward:t,draggable:n,destination:r,insideDestination:d,previousImpact:a})||vh({isMovingForward:t,isInHomeList:c,draggable:n,draggables:i,destination:r,insideDestination:d,previousImpact:a,viewport:o,afterCritical:u});if(!h)return null;var f=Sr({impact:h,draggable:n,droppable:r,draggables:i,afterCritical:u}),g=kl({draggable:n,destination:r,newPageBorderBoxCenter:f,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(g){var v=oa({pageBorderBoxCenter:f,draggable:n,viewport:o});return{clientSelection:v,impact:h,scrollJumpRequest:null}}var m=Ue(f,s),b=Eh({impact:h,viewport:o,destination:r,draggables:i,maxScrollChange:m});return{clientSelection:l,impact:b,scrollJumpRequest:m}}),Ne=function(t){var n=t.subject.active;return n||F(),n},Ih=(function(e){var t=e.isMovingForward,n=e.pageBorderBoxCenter,r=e.source,i=e.droppables,a=e.viewport,o=r.subject.active;if(!o)return null;var s=r.axis,l=Je(o[s.start],o[s.end]),u=yr(i).filter(function(c){return c!==r}).filter(function(c){return c.isEnabled}).filter(function(c){return!!c.subject.active}).filter(function(c){return bl(a.frame)(Ne(c))}).filter(function(c){var h=Ne(c);return t?o[s.crossAxisEnd]<h[s.crossAxisEnd]:h[s.crossAxisStart]<o[s.crossAxisStart]}).filter(function(c){var h=Ne(c),f=Je(h[s.start],h[s.end]);return l(h[s.start])||l(h[s.end])||f(o[s.start])||f(o[s.end])}).sort(function(c,h){var f=Ne(c)[s.crossAxisStart],g=Ne(h)[s.crossAxisStart];return t?f-g:g-f}).filter(function(c,h,f){return Ne(c)[s.crossAxisStart]===Ne(f[0])[s.crossAxisStart]});if(!u.length)return null;if(u.length===1)return u[0];var d=u.filter(function(c){var h=Je(Ne(c)[s.start],Ne(c)[s.end]);return h(n[s.line])});return d.length===1?d[0]:d.length>1?d.sort(function(c,h){return Ne(c)[s.start]-Ne(h)[s.start]})[0]:u.sort(function(c,h){var f=lo(n,uo(Ne(c))),g=lo(n,uo(Ne(h)));return f!==g?f-g:Ne(c)[s.start]-Ne(h)[s.start]})[0]}),go=function(t,n){var r=t.page.borderBox.center;return wt(t.descriptor.id,n)?Ue(r,n.displacedBy.point):r},Ah=function(t,n){var r=t.page.borderBox;return wt(t.descriptor.id,n)?Nn(r,on(n.displacedBy.point)):r},Dh=(function(e){var t=e.pageBorderBoxCenter,n=e.viewport,r=e.destination,i=e.insideDestination,a=e.afterCritical,o=i.filter(function(s){return xl({target:Ah(s,a),destination:r,viewport:n.frame,withDroppableDisplacement:!0})}).sort(function(s,l){var u=An(t,Ei(r,go(s,a))),d=An(t,Ei(r,go(l,a)));return u<d?-1:d<u?1:s.descriptor.index-l.descriptor.index});return o[0]||null}),Rn=_e(function(t,n){var r=n[t.line];return{value:r,point:Nt(t.line,r)}}),Th=function(t,n,r){var i=t.axis;if(t.descriptor.mode==="virtual")return Nt(i.line,n[i.line]);var a=t.subject.page.contentBox[i.size],o=sn(t.descriptor.id,r),s=o.reduce(function(d,c){return d+c.client.marginBox[i.size]},0),l=s+n[i.line],u=l-a;return u<=0?null:Nt(i.line,u)},Cl=function(t,n){return W({},t,{scroll:W({},t.scroll,{max:n})})},El=function(t,n,r){var i=t.frame;ln(n,t)&&F(),t.subject.withPlaceholder&&F();var a=Rn(t.axis,n.displaceBy).point,o=Th(t,a,r),s={placeholderSize:a,increasedBy:o,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!i){var l=tn({page:t.subject.page,withPlaceholder:s,axis:t.axis,frame:t.frame});return W({},t,{subject:l})}var u=o?De(i.scroll.max,o):i.scroll.max,d=Cl(i,u),c=tn({page:t.subject.page,withPlaceholder:s,axis:t.axis,frame:d});return W({},t,{subject:c,frame:d})},jh=function(t){var n=t.subject.withPlaceholder;n||F();var r=t.frame;if(!r){var i=tn({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return W({},t,{subject:i})}var a=n.oldFrameMaxScroll;a||F();var o=Cl(r,a),s=tn({page:t.subject.page,axis:t.axis,frame:o,withPlaceholder:null});return W({},t,{subject:s,frame:o})},Oh=(function(e){var t=e.previousPageBorderBoxCenter,n=e.moveRelativeTo,r=e.insideDestination,i=e.draggable,a=e.draggables,o=e.destination,s=e.viewport,l=e.afterCritical;if(!n){if(r.length)return null;var u={displaced:Dn,displacedBy:vl,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},d=Sr({impact:u,draggable:i,droppable:o,draggables:a,afterCritical:l}),c=ln(i,o)?o:El(o,i,a),h=kl({draggable:i,destination:c,newPageBorderBoxCenter:d,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return h?u:null}var f=t[o.axis.line]<=n.page.borderBox.center[o.axis.line],g=(function(){var m=n.descriptor.index;return n.descriptor.id===i.descriptor.id||f?m:m+1})(),v=Rn(o.axis,i.displaceBy);return dr({draggable:i,insideDestination:r,destination:o,viewport:s,displacedBy:v,last:Dn,index:g})}),Nh=(function(e){var t=e.isMovingForward,n=e.previousPageBorderBoxCenter,r=e.draggable,i=e.isOver,a=e.draggables,o=e.droppables,s=e.viewport,l=e.afterCritical,u=Ih({isMovingForward:t,pageBorderBoxCenter:n,source:i,droppables:o,viewport:s});if(!u)return null;var d=sn(u.descriptor.id,a),c=Dh({pageBorderBoxCenter:n,viewport:s,destination:u,insideDestination:d,afterCritical:l}),h=Oh({previousPageBorderBoxCenter:n,destination:u,draggable:r,draggables:a,moveRelativeTo:c,insideDestination:d,viewport:s,afterCritical:l});if(!h)return null;var f=Sr({impact:h,draggable:r,droppable:u,draggables:a,afterCritical:l}),g=oa({pageBorderBoxCenter:f,draggable:r,viewport:s});return{clientSelection:g,impact:h,scrollJumpRequest:null}}),ze=(function(e){var t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null}),Rh=function(t,n){var r=ze(t);return r?n[r]:null},Lh=(function(e){var t=e.state,n=e.type,r=Rh(t.impact,t.dimensions.droppables),i=!!r,a=t.dimensions.droppables[t.critical.droppable.id],o=r||a,s=o.axis.direction,l=s==="vertical"&&(n==="MOVE_UP"||n==="MOVE_DOWN")||s==="horizontal"&&(n==="MOVE_LEFT"||n==="MOVE_RIGHT");if(l&&!i)return null;var u=n==="MOVE_DOWN"||n==="MOVE_RIGHT",d=t.dimensions.draggables[t.critical.draggable.id],c=t.current.page.borderBoxCenter,h=t.dimensions,f=h.draggables,g=h.droppables;return l?Ph({isMovingForward:u,previousPageBorderBoxCenter:c,draggable:d,destination:o,draggables:f,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):Nh({isMovingForward:u,previousPageBorderBoxCenter:c,draggable:d,isOver:o,draggables:f,droppables:g,viewport:t.viewport,afterCritical:t.afterCritical})});function Tt(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function _l(e){var t=Je(e.top,e.bottom),n=Je(e.left,e.right);return function(i){return t(i.y)&&n(i.x)}}function Fh(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function Bh(e){var t=e.pageBorderBox,n=e.draggable,r=e.candidates,i=n.page.borderBox.center,a=r.map(function(o){var s=o.axis,l=Nt(o.axis.line,t.center[s.line],o.page.borderBox.center[s.crossAxisLine]);return{id:o.descriptor.id,distance:An(i,l)}}).sort(function(o,s){return s.distance-o.distance});return a[0]?a[0].id:null}function Mh(e){var t=e.pageBorderBox,n=e.draggable,r=e.droppables,i=yr(r).filter(function(a){if(!a.isEnabled)return!1;var o=a.subject.active;if(!o||!Fh(t,o))return!1;if(_l(o)(t.center))return!0;var s=a.axis,l=o.center[s.crossAxisLine],u=t[s.crossAxisStart],d=t[s.crossAxisEnd],c=Je(o[s.crossAxisStart],o[s.crossAxisEnd]),h=c(u),f=c(d);return!h&&!f?!0:h?u<l:d>l});return i.length?i.length===1?i[0].descriptor.id:Bh({pageBorderBox:t,draggable:n,candidates:i}):null}var Pl=function(t,n){return nt(Nn(t,n))},$h=(function(e,t){var n=e.frame;return n?Pl(t,n.scroll.diff.value):t});function Il(e){var t=e.displaced,n=e.id;return!!(t.visible[n]||t.invisible[n])}function Uh(e){var t=e.draggable,n=e.closest,r=e.inHomeList;return n?r&&n.descriptor.index>t.descriptor.index?n.descriptor.index-1:n.descriptor.index:null}var zh=(function(e){var t=e.pageBorderBoxWithDroppableScroll,n=e.draggable,r=e.destination,i=e.insideDestination,a=e.last,o=e.viewport,s=e.afterCritical,l=r.axis,u=Rn(r.axis,n.displaceBy),d=u.value,c=t[l.start],h=t[l.end],f=wr(n,i),g=kt(f,function(m){var b=m.descriptor.id,S=m.page.borderBox.center[l.line],x=wt(b,s),E=Il({displaced:a,id:b});return x?E?h<=S:c<S-d:E?h<=S+d:c<S}),v=Uh({draggable:n,closest:g,inHomeList:ln(n,r)});return dr({draggable:n,insideDestination:i,destination:r,viewport:o,last:a,displacedBy:u,index:v})}),qh=4,Wh=(function(e){var t=e.draggable,n=e.pageBorderBoxWithDroppableScroll,r=e.previousImpact,i=e.destination,a=e.insideDestination,o=e.afterCritical;if(!i.isCombineEnabled)return null;var s=i.axis,l=Rn(i.axis,t.displaceBy),u=l.value,d=n[s.start],c=n[s.end],h=wr(t,a),f=kt(h,function(v){var m=v.descriptor.id,b=v.page.borderBox,S=b[s.size],x=S/qh,E=wt(m,o),w=Il({displaced:r.displaced,id:m});return E?w?c>b[s.start]+x&&c<b[s.end]-x:d>b[s.start]-u+x&&d<b[s.end]-u-x:w?c>b[s.start]+u+x&&c<b[s.end]+u-x:d>b[s.start]+x&&d<b[s.end]-x});if(!f)return null;var g={displacedBy:l,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:f.descriptor.id,droppableId:i.descriptor.id}}};return g}),Al=(function(e){var t=e.pageOffset,n=e.draggable,r=e.draggables,i=e.droppables,a=e.previousImpact,o=e.viewport,s=e.afterCritical,l=Pl(n.page.borderBox,t),u=Mh({pageBorderBox:l,draggable:n,droppables:i});if(!u)return ih;var d=i[u],c=sn(d.descriptor.id,r),h=$h(d,l);return Wh({pageBorderBoxWithDroppableScroll:h,draggable:n,previousImpact:a,destination:d,insideDestination:c,afterCritical:s})||zh({pageBorderBoxWithDroppableScroll:h,draggable:n,destination:d,insideDestination:c,last:a.displaced,viewport:o,afterCritical:s})}),sa=(function(e,t){var n;return W({},e,(n={},n[t.descriptor.id]=t,n))}),Hh=function(t){var n=t.previousImpact,r=t.impact,i=t.droppables,a=ze(n),o=ze(r);if(!a||a===o)return i;var s=i[a];if(!s.subject.withPlaceholder)return i;var l=jh(s);return sa(i,l)},Gh=(function(e){var t=e.draggable,n=e.draggables,r=e.droppables,i=e.previousImpact,a=e.impact,o=Hh({previousImpact:i,impact:a,droppables:r}),s=ze(a);if(!s)return o;var l=r[s];if(ln(t,l)||l.subject.withPlaceholder)return o;var u=El(l,t,n);return sa(o,u)}),xn=(function(e){var t=e.state,n=e.clientSelection,r=e.dimensions,i=e.viewport,a=e.impact,o=e.scrollJumpRequest,s=i||t.viewport,l=r||t.dimensions,u=n||t.current.client.selection,d=Ue(u,t.initial.client.selection),c={offset:d,selection:u,borderBoxCenter:De(t.initial.client.borderBoxCenter,d)},h={selection:De(c.selection,s.scroll.current),borderBoxCenter:De(c.borderBoxCenter,s.scroll.current),offset:De(c.offset,s.scroll.diff.value)},f={client:c,page:h};if(t.phase==="COLLECTING")return W({phase:"COLLECTING"},t,{dimensions:l,viewport:s,current:f});var g=l.draggables[t.critical.draggable.id],v=a||Al({pageOffset:h.offset,draggable:g,draggables:l.draggables,droppables:l.droppables,previousImpact:t.impact,viewport:s,afterCritical:t.afterCritical}),m=Gh({draggable:g,impact:v,previousImpact:t.impact,draggables:l.draggables,droppables:l.droppables}),b=W({},t,{current:f,dimensions:{draggables:l.draggables,droppables:m},impact:v,viewport:s,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null});return b});function Vh(e,t){return e.map(function(n){return t[n]})}var Dl=(function(e){var t=e.impact,n=e.viewport,r=e.draggables,i=e.destination,a=e.forceShouldAnimate,o=t.displaced,s=Vh(o.all,r),l=Tn({afterDragging:s,destination:i,displacedBy:t.displacedBy,viewport:n.frame,forceShouldAnimate:a,last:o});return W({},t,{displaced:l})}),Tl=(function(e){var t=e.impact,n=e.draggable,r=e.droppable,i=e.draggables,a=e.viewport,o=e.afterCritical,s=Sr({impact:t,draggable:n,draggables:i,droppable:r,afterCritical:o});return oa({pageBorderBoxCenter:s,draggable:n,viewport:a})}),jl=(function(e){var t=e.state,n=e.dimensions,r=e.viewport;t.movementMode!=="SNAP"&&F();var i=t.impact,a=r||t.viewport,o=n||t.dimensions,s=o.draggables,l=o.droppables,u=s[t.critical.draggable.id],d=ze(i);d||F();var c=l[d],h=Dl({impact:i,viewport:a,destination:c,draggables:s}),f=Tl({impact:h,draggable:u,droppable:c,draggables:s,viewport:a,afterCritical:t.afterCritical});return xn({impact:h,clientSelection:f,state:t,dimensions:o,viewport:a})}),Kh=(function(e){return{index:e.index,droppableId:e.droppableId}}),Ol=(function(e){var t=e.draggable,n=e.home,r=e.draggables,i=e.viewport,a=Rn(n.axis,t.displaceBy),o=sn(n.descriptor.id,r),s=o.indexOf(t);s===-1&&F();var l=o.slice(s+1),u=l.reduce(function(f,g){return f[g.descriptor.id]=!0,f},{}),d={inVirtualList:n.descriptor.mode==="virtual",displacedBy:a,effected:u},c=Tn({afterDragging:l,destination:n,displacedBy:a,last:null,viewport:i.frame,forceShouldAnimate:!1}),h={displaced:c,displacedBy:a,at:{type:"REORDER",destination:Kh(t.descriptor)}};return{impact:h,afterCritical:d}}),Jh=(function(e,t){return{draggables:e.draggables,droppables:sa(e.droppables,t)}}),Yh=(function(e){var t=e.draggable,n=e.offset,r=e.initialWindowScroll,i=or(t.client,n),a=sr(i,r),o=W({},t,{placeholder:W({},t.placeholder,{client:i}),client:i,page:a});return o}),Xh=(function(e){var t=e.frame;return t||F(),t}),Qh=(function(e){var t=e.additions,n=e.updatedDroppables,r=e.viewport,i=r.scroll.diff.value;return t.map(function(a){var o=a.descriptor.droppableId,s=n[o],l=Xh(s),u=l.scroll.diff.value,d=De(i,u),c=Yh({draggable:a,offset:d,initialWindowScroll:r.scroll.initial});return c})}),Zh=(function(e){var t=e.state,n=e.published,r=n.modified.map(function(x){var E=t.dimensions.droppables[x.droppableId],w=ea(E,x.scroll);return w}),i=W({},t.dimensions.droppables,{},gl(r)),a=ml(Qh({additions:n.additions,updatedDroppables:i,viewport:t.viewport})),o=W({},t.dimensions.draggables,{},a);n.removals.forEach(function(x){delete o[x]});var s={droppables:i,draggables:o},l=ze(t.impact),u=l?s.droppables[l]:null,d=s.draggables[t.critical.draggable.id],c=s.droppables[t.critical.droppable.id],h=Ol({draggable:d,home:c,draggables:o,viewport:t.viewport}),f=h.impact,g=h.afterCritical,v=u&&u.isCombineEnabled?t.impact:f,m=Al({pageOffset:t.current.page.offset,draggable:s.draggables[t.critical.draggable.id],draggables:s.draggables,droppables:s.droppables,previousImpact:v,viewport:t.viewport,afterCritical:g}),b=W({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:m,onLiftImpact:f,dimensions:s,afterCritical:g,forceShouldAnimate:!1});if(t.phase==="COLLECTING")return b;var S=W({phase:"DROP_PENDING"},b,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1});return S}),_i=function(t){return t.movementMode==="SNAP"},qr=function(t,n,r){var i=Jh(t.dimensions,n);return!_i(t)||r?xn({state:t,dimensions:i}):jl({state:t,dimensions:i})};function Wr(e){return e.isDragging&&e.movementMode==="SNAP"?W({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var mo={phase:"IDLE",completed:null,shouldFlush:!1},ef=(function(e,t){if(e===void 0&&(e=mo),t.type==="FLUSH")return W({},mo,{shouldFlush:!0});if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&F();var n=t.payload,r=n.critical,i=n.clientSelection,a=n.viewport,o=n.dimensions,s=n.movementMode,l=o.draggables[r.draggable.id],u=o.droppables[r.droppable.id],d={selection:i,borderBoxCenter:l.client.borderBox.center,offset:Pe},c={client:d,page:{selection:De(d.selection,a.scroll.initial),borderBoxCenter:De(d.selection,a.scroll.initial),offset:De(d.selection,a.scroll.diff.value)}},h=yr(o.droppables).every(function($){return!$.isFixedOnPage}),f=Ol({draggable:l,home:u,draggables:o.draggables,viewport:a}),g=f.impact,v=f.afterCritical,m={phase:"DRAGGING",isDragging:!0,critical:r,movementMode:s,dimensions:o,initial:c,current:c,isWindowScrollAllowed:h,impact:g,afterCritical:v,onLiftImpact:g,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null};return m}if(t.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&F();var b=W({phase:"COLLECTING"},e,{phase:"COLLECTING"});return b}if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||F(),Zh({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Tt(e)||F();var S=t.payload.client;return yt(S,e.current.client.selection)?e:xn({state:e,clientSelection:S,impact:_i(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return Wr(e);Tt(e)||F();var x=t.payload,E=x.id,w=x.newScroll,y=e.dimensions.droppables[E];if(!y)return e;var P=ea(y,w);return qr(e,P,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Tt(e)||F();var L=t.payload,O=L.id,_=L.isEnabled,A=e.dimensions.droppables[O];A||F(),A.isEnabled===_&&F();var j=W({},A,{isEnabled:_});return qr(e,j,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Tt(e)||F();var I=t.payload,N=I.id,M=I.isCombineEnabled,V=e.dimensions.droppables[N];V||F(),V.isCombineEnabled===M&&F();var te=W({},V,{isCombineEnabled:M});return qr(e,te,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Tt(e)||F(),e.isWindowScrollAllowed||F();var de=t.payload.newScroll;if(yt(e.viewport.scroll.current,de))return Wr(e);var he=Sl(e.viewport,de);return _i(e)?jl({state:e,viewport:he}):xn({state:e,viewport:he})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Tt(e))return e;var k=t.payload.maxScroll;if(yt(k,e.viewport.scroll.max))return e;var ve=W({},e.viewport,{scroll:W({},e.viewport.scroll,{max:k})});return W({phase:"DRAGGING"},e,{viewport:ve})}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&F();var fe=Lh({state:e,type:t.type});return fe?xn({state:e,impact:fe.impact,clientSelection:fe.clientSelection,scrollJumpRequest:fe.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){var C=t.payload.reason;e.phase!=="COLLECTING"&&F();var ye=W({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:C});return ye}if(t.type==="DROP_ANIMATE"){var xe=t.payload,pe=xe.completed,Oe=xe.dropDuration,Ie=xe.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||F();var Fe={phase:"DROP_ANIMATING",completed:pe,dropDuration:Oe,newHomeClientOffset:Ie,dimensions:e.dimensions};return Fe}if(t.type==="DROP_COMPLETE"){var Ae=t.payload.completed;return{phase:"IDLE",completed:Ae,shouldFlush:!1}}return e}),tf=function(t){return{type:"BEFORE_INITIAL_CAPTURE",payload:t}},nf=function(t){return{type:"LIFT",payload:t}},rf=function(t){return{type:"INITIAL_PUBLISH",payload:t}},af=function(t){return{type:"PUBLISH_WHILE_DRAGGING",payload:t}},of=function(){return{type:"COLLECTION_STARTING",payload:null}},sf=function(t){return{type:"UPDATE_DROPPABLE_SCROLL",payload:t}},lf=function(t){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}},uf=function(t){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}},Nl=function(t){return{type:"MOVE",payload:t}},cf=function(t){return{type:"MOVE_BY_WINDOW_SCROLL",payload:t}},df=function(t){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}},hf=function(){return{type:"MOVE_UP",payload:null}},ff=function(){return{type:"MOVE_DOWN",payload:null}},pf=function(){return{type:"MOVE_RIGHT",payload:null}},gf=function(){return{type:"MOVE_LEFT",payload:null}},la=function(){return{type:"FLUSH",payload:null}},mf=function(t){return{type:"DROP_ANIMATE",payload:t}},ua=function(t){return{type:"DROP_COMPLETE",payload:t}},Rl=function(t){return{type:"DROP",payload:t}},vf=function(t){return{type:"DROP_PENDING",payload:t}},Ll=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},bf=(function(e){return function(t){var n=t.getState,r=t.dispatch;return function(i){return function(a){if(a.type!=="LIFT"){i(a);return}var o=a.payload,s=o.id,l=o.clientSelection,u=o.movementMode,d=n();d.phase==="DROP_ANIMATING"&&r(ua({completed:d.completed})),n().phase!=="IDLE"&&F(),r(la()),r(tf({draggableId:s,movementMode:u}));var c={shouldPublishImmediately:u==="SNAP"},h={draggableId:s,scrollOptions:c},f=e.startPublishing(h),g=f.critical,v=f.dimensions,m=f.viewport;r(rf({critical:g,dimensions:v,clientSelection:l,movementMode:u,viewport:m}))}}}}),yf=(function(e){return function(){return function(t){return function(n){n.type==="INITIAL_PUBLISH"&&e.dragging(),n.type==="DROP_ANIMATE"&&e.dropping(n.payload.completed.result.reason),(n.type==="FLUSH"||n.type==="DROP_COMPLETE")&&e.resting(),t(n)}}}}),ca={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},jn={opacity:{drop:0,combining:.7},scale:{drop:.75}},da={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Pt=da.outOfTheWay+"s "+ca.outOfTheWay,wn={fluid:"opacity "+Pt,snap:"transform "+Pt+", opacity "+Pt,drop:function(t){var n=t+"s "+ca.drop;return"transform "+n+", opacity "+n},outOfTheWay:"transform "+Pt,placeholder:"height "+Pt+", width "+Pt+", margin "+Pt},vo=function(t){return yt(t,Pe)?null:"translate("+t.x+"px, "+t.y+"px)"},Pi={moveTo:vo,drop:function(t,n){var r=vo(t);return r?n?r+" scale("+jn.scale.drop+")":r:null}},Ii=da.minDropTime,Fl=da.maxDropTime,xf=Fl-Ii,bo=1500,wf=.6,Sf=(function(e){var t=e.current,n=e.destination,r=e.reason,i=An(t,n);if(i<=0)return Ii;if(i>=bo)return Fl;var a=i/bo,o=Ii+xf*a,s=r==="CANCEL"?o*wf:o;return Number(s.toFixed(2))}),kf=(function(e){var t=e.impact,n=e.draggable,r=e.dimensions,i=e.viewport,a=e.afterCritical,o=r.draggables,s=r.droppables,l=ze(t),u=l?s[l]:null,d=s[n.descriptor.droppableId],c=Tl({impact:t,draggable:n,draggables:o,afterCritical:a,droppable:u||d,viewport:i}),h=Ue(c,n.client.borderBox.center);return h}),Cf=(function(e){var t=e.draggables,n=e.reason,r=e.lastImpact,i=e.home,a=e.viewport,o=e.onLiftImpact;if(!r.at||n!=="DROP"){var s=Dl({draggables:t,impact:o,destination:i,viewport:a,forceShouldAnimate:!0});return{impact:s,didDropInsideDroppable:!1}}if(r.at.type==="REORDER")return{impact:r,didDropInsideDroppable:!0};var l=W({},r,{displaced:Dn});return{impact:l,didDropInsideDroppable:!0}}),Ef=(function(e){var t=e.getState,n=e.dispatch;return function(r){return function(i){if(i.type!=="DROP"){r(i);return}var a=t(),o=i.payload.reason;if(a.phase==="COLLECTING"){n(vf({reason:o}));return}if(a.phase!=="IDLE"){var s=a.phase==="DROP_PENDING"&&a.isWaiting;s&&F(),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||F();var l=a.critical,u=a.dimensions,d=u.draggables[a.critical.draggable.id],c=Cf({reason:o,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),h=c.impact,f=c.didDropInsideDroppable,g=f?na(h):null,v=f?xr(h):null,m={index:l.draggable.index,droppableId:l.droppable.id},b={draggableId:d.descriptor.id,type:d.descriptor.type,source:m,reason:o,mode:a.movementMode,destination:g,combine:v},S=kf({impact:h,draggable:d,dimensions:u,viewport:a.viewport,afterCritical:a.afterCritical}),x={critical:a.critical,afterCritical:a.afterCritical,result:b,impact:h},E=!yt(a.current.client.offset,S)||!!b.combine;if(!E){n(ua({completed:x}));return}var w=Sf({current:a.current.client.offset,destination:S,reason:o}),y={newHomeClientOffset:S,dropDuration:w,completed:x};n(mf(y))}}}}),Bl=(function(){return{x:window.pageXOffset,y:window.pageYOffset}});function _f(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(n){n.target!==window&&n.target!==window.document||e()}}}function Pf(e){var t=e.onWindowScroll;function n(){t(Bl())}var r=In(n),i=_f(r),a=bt;function o(){return a!==bt}function s(){o()&&F(),a=Ke(window,[i])}function l(){o()||F(),r.cancel(),a(),a=bt}return{start:s,stop:l,isActive:o}}var If=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},Af=(function(e){var t=Pf({onWindowScroll:function(r){e.dispatch(cf({newScroll:r}))}});return function(n){return function(r){!t.isActive()&&r.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&If(r)&&t.stop(),n(r)}}}),Df=(function(e){var t=!1,n=!1,r=setTimeout(function(){n=!0}),i=function(o){t||n||(t=!0,e(o),clearTimeout(r))};return i.wasCalled=function(){return t},i}),Tf=(function(){var e=[],t=function(a){var o=ta(e,function(u){return u.timerId===a});o===-1&&F();var s=e.splice(o,1),l=s[0];l.callback()},n=function(a){var o=setTimeout(function(){return t(o)}),s={timerId:o,callback:a};e.push(s)},r=function(){if(e.length){var a=[].concat(e);e.length=0,a.forEach(function(o){clearTimeout(o.timerId),o.callback()})}};return{add:n,flush:r}}),jf=function(t,n){return t==null&&n==null?!0:t==null||n==null?!1:t.droppableId===n.droppableId&&t.index===n.index},Of=function(t,n){return t==null&&n==null?!0:t==null||n==null?!1:t.draggableId===n.draggableId&&t.droppableId===n.droppableId},Nf=function(t,n){if(t===n)return!0;var r=t.draggable.id===n.draggable.id&&t.draggable.droppableId===n.draggable.droppableId&&t.draggable.type===n.draggable.type&&t.draggable.index===n.draggable.index,i=t.droppable.id===n.droppable.id&&t.droppable.type===n.droppable.type;return r&&i},gn=function(t,n){n()},qn=function(t,n){return{draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:n}},Hr=function(t,n,r,i){if(!t){r(i(n));return}var a=Df(r),o={announce:a};t(n,o),a.wasCalled()||r(i(n))},Rf=(function(e,t){var n=Tf(),r=null,i=function(h,f){r&&F(),gn("onBeforeCapture",function(){var g=e().onBeforeCapture;if(g){var v={draggableId:h,mode:f};g(v)}})},a=function(h,f){r&&F(),gn("onBeforeDragStart",function(){var g=e().onBeforeDragStart;g&&g(qn(h,f))})},o=function(h,f){r&&F();var g=qn(h,f);r={mode:f,lastCritical:h,lastLocation:g.source,lastCombine:null},n.add(function(){gn("onDragStart",function(){return Hr(e().onDragStart,g,t,rr.onDragStart)})})},s=function(h,f){var g=na(f),v=xr(f);r||F();var m=!Nf(h,r.lastCritical);m&&(r.lastCritical=h);var b=!jf(r.lastLocation,g);b&&(r.lastLocation=g);var S=!Of(r.lastCombine,v);if(S&&(r.lastCombine=v),!(!m&&!b&&!S)){var x=W({},qn(h,r.mode),{combine:v,destination:g});n.add(function(){gn("onDragUpdate",function(){return Hr(e().onDragUpdate,x,t,rr.onDragUpdate)})})}},l=function(){r||F(),n.flush()},u=function(h){r||F(),r=null,gn("onDragEnd",function(){return Hr(e().onDragEnd,h,t,rr.onDragEnd)})},d=function(){if(r){var h=W({},qn(r.lastCritical,r.mode),{combine:null,destination:null,reason:"CANCEL"});u(h)}};return{beforeCapture:i,beforeStart:a,start:o,update:s,flush:l,drop:u,abort:d}}),Lf=(function(e,t){var n=Rf(e,t);return function(r){return function(i){return function(a){if(a.type==="BEFORE_INITIAL_CAPTURE"){n.beforeCapture(a.payload.draggableId,a.payload.movementMode);return}if(a.type==="INITIAL_PUBLISH"){var o=a.payload.critical;n.beforeStart(o,a.payload.movementMode),i(a),n.start(o,a.payload.movementMode);return}if(a.type==="DROP_COMPLETE"){var s=a.payload.completed.result;n.flush(),i(a),n.drop(s);return}if(i(a),a.type==="FLUSH"){n.abort();return}var l=r.getState();l.phase==="DRAGGING"&&n.update(l.critical,l.impact)}}}}),Ff=(function(e){return function(t){return function(n){if(n.type!=="DROP_ANIMATION_FINISHED"){t(n);return}var r=e.getState();r.phase!=="DROP_ANIMATING"&&F(),e.dispatch(ua({completed:r.completed}))}}}),Bf=(function(e){var t=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return function(i){return function(a){if((a.type==="FLUSH"||a.type==="DROP_COMPLETE"||a.type==="DROP_ANIMATION_FINISHED")&&r(),i(a),a.type==="DROP_ANIMATE"){var o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var l=e.getState();l.phase==="DROP_ANIMATING"&&e.dispatch(Ll())}};n=requestAnimationFrame(function(){n=null,t=Ke(window,[o])})}}}}),Mf=(function(e){return function(){return function(t){return function(n){(n.type==="DROP_COMPLETE"||n.type==="FLUSH"||n.type==="DROP_ANIMATE")&&e.stopPublishing(),t(n)}}}}),$f=(function(e){var t=!1;return function(){return function(n){return function(r){if(r.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),e.tryRestoreFocusRecorded();return}if(n(r),!!t){if(r.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(r.type==="DROP_COMPLETE"){t=!1;var i=r.payload.completed.result;i.combine&&e.tryShiftRecord(i.draggableId,i.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}}),Uf=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},zf=(function(e){return function(t){return function(n){return function(r){if(Uf(r)){e.stop(),n(r);return}if(r.type==="INITIAL_PUBLISH"){n(r);var i=t.getState();i.phase!=="DRAGGING"&&F(),e.start(i);return}n(r),e.scroll(t.getState())}}}}),qf=(function(e){return function(t){return function(n){if(t(n),n.type==="PUBLISH_WHILE_DRAGGING"){var r=e.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||e.dispatch(Rl({reason:r.reason})))}}}}),Wf=el,Hf=(function(e){var t=e.dimensionMarshal,n=e.focusMarshal,r=e.styleMarshal,i=e.getResponders,a=e.announce,o=e.autoScroller;return Zs(ef,Wf(Wc(yf(r),Mf(t),bf(t),Ef,Ff,Bf,qf,zf(o),Af,$f(n),Lf(i,a))))}),Gr=function(){return{additions:{},removals:{},modified:{}}};function Gf(e){var t=e.registry,n=e.callbacks,r=Gr(),i=null,a=function(){i||(n.collectionStarting(),i=requestAnimationFrame(function(){i=null;var d=r,c=d.additions,h=d.removals,f=d.modified,g=Object.keys(c).map(function(b){return t.draggable.getById(b).getDimension(Pe)}).sort(function(b,S){return b.descriptor.index-S.descriptor.index}),v=Object.keys(f).map(function(b){var S=t.droppable.getById(b),x=S.callbacks.getScrollWhileDragging();return{droppableId:b,scroll:x}}),m={additions:g,removals:Object.keys(h),modified:v};r=Gr(),n.publish(m)}))},o=function(d){var c=d.descriptor.id;r.additions[c]=d,r.modified[d.descriptor.droppableId]=!0,r.removals[c]&&delete r.removals[c],a()},s=function(d){var c=d.descriptor;r.removals[c.id]=!0,r.modified[c.droppableId]=!0,r.additions[c.id]&&delete r.additions[c.id],a()},l=function(){i&&(cancelAnimationFrame(i),i=null,r=Gr())};return{add:o,remove:s,stop:l}}var Ml=(function(e){var t=e.scrollHeight,n=e.scrollWidth,r=e.height,i=e.width,a=Ue({x:n,y:t},{x:i,y:r}),o={x:Math.max(0,a.x),y:Math.max(0,a.y)};return o}),$l=(function(){var e=document.documentElement;return e||F(),e}),Ul=(function(){var e=$l(),t=Ml({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return t}),Vf=(function(){var e=Bl(),t=Ul(),n=e.y,r=e.x,i=$l(),a=i.clientWidth,o=i.clientHeight,s=r+a,l=n+o,u=nt({top:n,left:r,right:s,bottom:l}),d={frame:u,scroll:{initial:e,current:e,max:t,diff:{value:Pe,displacement:Pe}}};return d}),Kf=(function(e){var t=e.critical,n=e.scrollOptions,r=e.registry,i=Vf(),a=i.scroll.current,o=t.droppable,s=r.droppable.getAllByType(o.type).map(function(c){return c.callbacks.getDimensionAndWatchScroll(a,n)}),l=r.draggable.getAllByType(t.draggable.type).map(function(c){return c.getDimension(a)}),u={draggables:ml(l),droppables:gl(s)},d={dimensions:u,critical:t,viewport:i};return d});function yo(e,t,n){if(n.descriptor.id===t.id||n.descriptor.type!==t.type)return!1;var r=e.droppable.getById(n.descriptor.droppableId);return r.descriptor.mode==="virtual"}var Jf=(function(e,t){var n=null,r=Gf({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),i=function(f,g){e.droppable.exists(f)||F(),n&&t.updateDroppableIsEnabled({id:f,isEnabled:g})},a=function(f,g){n&&(e.droppable.exists(f)||F(),t.updateDroppableIsCombineEnabled({id:f,isCombineEnabled:g}))},o=function(f,g){n&&(e.droppable.exists(f)||F(),t.updateDroppableScroll({id:f,newScroll:g}))},s=function(f,g){n&&e.droppable.getById(f).callbacks.scroll(g)},l=function(){if(n){r.stop();var f=n.critical.droppable;e.droppable.getAllByType(f.type).forEach(function(g){return g.callbacks.dragStopped()}),n.unsubscribe(),n=null}},u=function(f){n||F();var g=n.critical.draggable;f.type==="ADDITION"&&yo(e,g,f.value)&&r.add(f.value),f.type==="REMOVAL"&&yo(e,g,f.value)&&r.remove(f.value)},d=function(f){n&&F();var g=e.draggable.getById(f.draggableId),v=e.droppable.getById(g.descriptor.droppableId),m={draggable:g.descriptor,droppable:v.descriptor},b=e.subscribe(u);return n={critical:m,unsubscribe:b},Kf({critical:m,registry:e,scrollOptions:f.scrollOptions})},c={updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:a,scrollDroppable:s,updateDroppableScroll:o,startPublishing:d,stopPublishing:l};return c}),zl=(function(e,t){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP"}),Yf=(function(e){window.scrollBy(e.x,e.y)}),Xf=_e(function(e){return yr(e).filter(function(t){return!(!t.isEnabled||!t.frame)})}),Qf=function(t,n){var r=kt(Xf(n),function(i){return i.frame||F(),_l(i.frame.pageMarginBox)(t)});return r},Zf=(function(e){var t=e.center,n=e.destination,r=e.droppables;if(n){var i=r[n];return i.frame?i:null}var a=Qf(t,r);return a}),xt={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(t){return Math.pow(t,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},ep=(function(e,t){var n=e[t.size]*xt.startFromPercentage,r=e[t.size]*xt.maxScrollAtPercentage,i={startScrollingFrom:n,maxScrollValueAt:r};return i}),ql=(function(e){var t=e.startOfRange,n=e.endOfRange,r=e.current,i=n-t;if(i===0)return 0;var a=r-t,o=a/i;return o}),ha=1,tp=(function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return xt.maxPixelScroll;if(e===t.startScrollingFrom)return ha;var n=ql({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),r=1-n,i=xt.maxPixelScroll*xt.ease(r);return Math.ceil(i)}),xo=xt.durationDampening.accelerateAt,wo=xt.durationDampening.stopDampeningAt,np=(function(e,t){var n=t,r=wo,i=Date.now(),a=i-n;if(a>=wo)return e;if(a<xo)return ha;var o=ql({startOfRange:xo,endOfRange:r,current:a}),s=e*xt.ease(o);return Math.ceil(s)}),So=(function(e){var t=e.distanceToEdge,n=e.thresholds,r=e.dragStartTime,i=e.shouldUseTimeDampening,a=tp(t,n);return a===0?0:i?Math.max(np(a,r),ha):a}),ko=(function(e){var t=e.container,n=e.distanceToEdges,r=e.dragStartTime,i=e.axis,a=e.shouldUseTimeDampening,o=ep(t,i),s=n[i.end]<n[i.start];return s?So({distanceToEdge:n[i.end],thresholds:o,dragStartTime:r,shouldUseTimeDampening:a}):-1*So({distanceToEdge:n[i.start],thresholds:o,dragStartTime:r,shouldUseTimeDampening:a})}),rp=(function(e){var t=e.container,n=e.subject,r=e.proposedScroll,i=n.height>t.height,a=n.width>t.width;return!a&&!i?r:a&&i?null:{x:a?0:r.x,y:i?0:r.y}}),ip=fl(function(e){return e===0?0:e}),Wl=(function(e){var t=e.dragStartTime,n=e.container,r=e.subject,i=e.center,a=e.shouldUseTimeDampening,o={top:i.y-n.top,right:n.right-i.x,bottom:n.bottom-i.y,left:i.x-n.left},s=ko({container:n,distanceToEdges:o,dragStartTime:t,axis:ra,shouldUseTimeDampening:a}),l=ko({container:n,distanceToEdges:o,dragStartTime:t,axis:yl,shouldUseTimeDampening:a}),u=ip({x:l,y:s});if(yt(u,Pe))return null;var d=rp({container:n,subject:r,proposedScroll:u});return d?yt(d,Pe)?null:d:null}),ap=fl(function(e){return e===0?0:e>0?1:-1}),fa=(function(){var e=function(n,r){return n<0?n:n>r?n-r:0};return function(t){var n=t.current,r=t.max,i=t.change,a=De(n,i),o={x:e(a.x,r.x),y:e(a.y,r.y)};return yt(o,Pe)?null:o}})(),Hl=function(t){var n=t.max,r=t.current,i=t.change,a={x:Math.max(r.x,n.x),y:Math.max(r.y,n.y)},o=ap(i),s=fa({max:a,current:r,change:o});return!s||o.x!==0&&s.x===0||o.y!==0&&s.y===0},pa=function(t,n){return Hl({current:t.scroll.current,max:t.scroll.max,change:n})},op=function(t,n){if(!pa(t,n))return null;var r=t.scroll.max,i=t.scroll.current;return fa({current:i,max:r,change:n})},ga=function(t,n){var r=t.frame;return r?Hl({current:r.scroll.current,max:r.scroll.max,change:n}):!1},sp=function(t,n){var r=t.frame;return!r||!ga(t,n)?null:fa({current:r.scroll.current,max:r.scroll.max,change:n})},lp=(function(e){var t=e.viewport,n=e.subject,r=e.center,i=e.dragStartTime,a=e.shouldUseTimeDampening,o=Wl({dragStartTime:i,container:t.frame,subject:n,center:r,shouldUseTimeDampening:a});return o&&pa(t,o)?o:null}),up=(function(e){var t=e.droppable,n=e.subject,r=e.center,i=e.dragStartTime,a=e.shouldUseTimeDampening,o=t.frame;if(!o)return null;var s=Wl({dragStartTime:i,container:o.pageMarginBox,subject:n,center:r,shouldUseTimeDampening:a});return s&&ga(t,s)?s:null}),Co=(function(e){var t=e.state,n=e.dragStartTime,r=e.shouldUseTimeDampening,i=e.scrollWindow,a=e.scrollDroppable,o=t.current.page.borderBoxCenter,s=t.dimensions.draggables[t.critical.draggable.id],l=s.page.marginBox;if(t.isWindowScrollAllowed){var u=t.viewport,d=lp({dragStartTime:n,viewport:u,subject:l,center:o,shouldUseTimeDampening:r});if(d){i(d);return}}var c=Zf({center:o,destination:ze(t.impact),droppables:t.dimensions.droppables});if(c){var h=up({dragStartTime:n,droppable:c,subject:l,center:o,shouldUseTimeDampening:r});h&&a(c.descriptor.id,h)}}),cp=(function(e){var t=e.scrollWindow,n=e.scrollDroppable,r=In(t),i=In(n),a=null,o=function(d){a||F();var c=a,h=c.shouldUseTimeDampening,f=c.dragStartTime;Co({state:d,scrollWindow:r,scrollDroppable:i,dragStartTime:f,shouldUseTimeDampening:h})},s=function(d){a&&F();var c=Date.now(),h=!1,f=function(){h=!0};Co({state:d,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:f,scrollDroppable:f}),a={dragStartTime:c,shouldUseTimeDampening:h},h&&o(d)},l=function(){a&&(r.cancel(),i.cancel(),a=null)};return{start:s,stop:l,scroll:o}}),dp=(function(e){var t=e.move,n=e.scrollDroppable,r=e.scrollWindow,i=function(u,d){var c=De(u.current.client.selection,d);t({client:c})},a=function(u,d){if(!ga(u,d))return d;var c=sp(u,d);if(!c)return n(u.descriptor.id,d),null;var h=Ue(d,c);n(u.descriptor.id,h);var f=Ue(d,h);return f},o=function(u,d,c){if(!u||!pa(d,c))return c;var h=op(d,c);if(!h)return r(c),null;var f=Ue(c,h);r(f);var g=Ue(c,f);return g},s=function(u){var d=u.scrollJumpRequest;if(d){var c=ze(u.impact);c||F();var h=a(u.dimensions.droppables[c],d);if(h){var f=u.viewport,g=o(u.isWindowScrollAllowed,f,h);g&&i(u,g)}}};return s}),hp=(function(e){var t=e.scrollDroppable,n=e.scrollWindow,r=e.move,i=cp({scrollWindow:n,scrollDroppable:t}),a=dp({move:r,scrollWindow:n,scrollDroppable:t}),o=function(u){if(u.phase==="DRAGGING"){if(u.movementMode==="FLUID"){i.scroll(u);return}u.scrollJumpRequest&&a(u)}},s={scroll:o,start:i.start,stop:i.stop};return s}),nn="data-rbd",rn=(function(){var e=nn+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}})(),Ai=(function(){var e=nn+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}})(),fp=(function(){var e=nn+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}})(),Eo={contextId:nn+"-scroll-container-context-id"},pp=function(t){return function(n){return"["+n+'="'+t+'"]'}},mn=function(t,n){return t.map(function(r){var i=r.styles[n];return i?r.selector+" { "+i+" }":""}).join(" ")},gp="pointer-events: none;",mp=(function(e){var t=pp(e),n=(function(){var s=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(rn.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:s,dragging:gp,dropAnimating:s}}})(),r=(function(){var s=`
      transition: `+wn.outOfTheWay+`;
    `;return{selector:t(Ai.contextId),styles:{dragging:s,dropAnimating:s,userCancel:s}}})(),i={selector:t(fp.contextId),styles:{always:"overflow-anchor: none;"}},a={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},o=[r,n,i,a];return{always:mn(o,"always"),resting:mn(o,"resting"),dragging:mn(o,"dragging"),dropAnimating:mn(o,"dropAnimating"),userCancel:mn(o,"userCancel")}}),qe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?D.useLayoutEffect:D.useEffect,Vr=function(){var t=document.querySelector("head");return t||F(),t},_o=function(t){var n=document.createElement("style");return t&&n.setAttribute("nonce",t),n.type="text/css",n};function vp(e,t){var n=ee(function(){return mp(e)},[e]),r=D.useRef(null),i=D.useRef(null),a=U(_e(function(c){var h=i.current;h||F(),h.textContent=c}),[]),o=U(function(c){var h=r.current;h||F(),h.textContent=c},[]);qe(function(){!r.current&&!i.current||F();var c=_o(t),h=_o(t);return r.current=c,i.current=h,c.setAttribute(nn+"-always",e),h.setAttribute(nn+"-dynamic",e),Vr().appendChild(c),Vr().appendChild(h),o(n.always),a(n.resting),function(){var f=function(v){var m=v.current;m||F(),Vr().removeChild(m),v.current=null};f(r),f(i)}},[t,o,a,n.always,n.resting,e]);var s=U(function(){return a(n.dragging)},[a,n.dragging]),l=U(function(c){if(c==="DROP"){a(n.dropAnimating);return}a(n.userCancel)},[a,n.dropAnimating,n.userCancel]),u=U(function(){i.current&&a(n.resting)},[a,n.resting]),d=ee(function(){return{dragging:s,dropping:l,resting:u}},[s,l,u]);return d}var Gl=(function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window});function kr(e){return e instanceof Gl(e).HTMLElement}function bp(e,t){var n="["+rn.contextId+'="'+e+'"]',r=pl(document.querySelectorAll(n));if(!r.length)return null;var i=kt(r,function(a){return a.getAttribute(rn.draggableId)===t});return!i||!kr(i)?null:i}function yp(e){var t=D.useRef({}),n=D.useRef(null),r=D.useRef(null),i=D.useRef(!1),a=U(function(h,f){var g={id:h,focus:f};return t.current[h]=g,function(){var m=t.current,b=m[h];b!==g&&delete m[h]}},[]),o=U(function(h){var f=bp(e,h);f&&f!==document.activeElement&&f.focus()},[e]),s=U(function(h,f){n.current===h&&(n.current=f)},[]),l=U(function(){r.current||i.current&&(r.current=requestAnimationFrame(function(){r.current=null;var h=n.current;h&&o(h)}))},[o]),u=U(function(h){n.current=null;var f=document.activeElement;f&&f.getAttribute(rn.draggableId)===h&&(n.current=h)},[]);qe(function(){return i.current=!0,function(){i.current=!1;var h=r.current;h&&cancelAnimationFrame(h)}},[]);var d=ee(function(){return{register:a,tryRecordFocus:u,tryRestoreFocusRecorded:l,tryShiftRecord:s}},[a,u,l,s]);return d}function xp(){var e={draggables:{},droppables:{}},t=[];function n(c){return t.push(c),function(){var f=t.indexOf(c);f!==-1&&t.splice(f,1)}}function r(c){t.length&&t.forEach(function(h){return h(c)})}function i(c){return e.draggables[c]||null}function a(c){var h=i(c);return h||F(),h}var o={register:function(h){e.draggables[h.descriptor.id]=h,r({type:"ADDITION",value:h})},update:function(h,f){var g=e.draggables[f.descriptor.id];g&&g.uniqueId===h.uniqueId&&(delete e.draggables[f.descriptor.id],e.draggables[h.descriptor.id]=h)},unregister:function(h){var f=h.descriptor.id,g=i(f);g&&h.uniqueId===g.uniqueId&&(delete e.draggables[f],r({type:"REMOVAL",value:h}))},getById:a,findById:i,exists:function(h){return!!i(h)},getAllByType:function(h){return cr(e.draggables).filter(function(f){return f.descriptor.type===h})}};function s(c){return e.droppables[c]||null}function l(c){var h=s(c);return h||F(),h}var u={register:function(h){e.droppables[h.descriptor.id]=h},unregister:function(h){var f=s(h.descriptor.id);f&&h.uniqueId===f.uniqueId&&delete e.droppables[h.descriptor.id]},getById:l,findById:s,exists:function(h){return!!s(h)},getAllByType:function(h){return cr(e.droppables).filter(function(f){return f.descriptor.type===h})}};function d(){e.draggables={},e.droppables={},t.length=0}return{draggable:o,droppable:u,subscribe:n,clean:d}}function wp(){var e=ee(xp,[]);return D.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var ma=K.createContext(null),hr=(function(){var e=document.body;return e||F(),e}),Sp={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},kp=function(t){return"rbd-announcement-"+t};function Cp(e){var t=ee(function(){return kp(e)},[e]),n=D.useRef(null);D.useEffect(function(){var a=document.createElement("div");return n.current=a,a.id=t,a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),W(a.style,Sp),hr().appendChild(a),function(){setTimeout(function(){var l=hr();l.contains(a)&&l.removeChild(a),a===n.current&&(n.current=null)})}},[t]);var r=U(function(i){var a=n.current;if(a){a.textContent=i;return}},[]);return r}var Ep=0,_p={separator:"::"};function va(e,t){return t===void 0&&(t=_p),ee(function(){return""+e+t.separator+Ep++},[t.separator,e])}function Pp(e){var t=e.contextId,n=e.uniqueId;return"rbd-hidden-text-"+t+"-"+n}function Ip(e){var t=e.contextId,n=e.text,r=va("hidden-text",{separator:"-"}),i=ee(function(){return Pp({contextId:t,uniqueId:r})},[r,t]);return D.useEffect(function(){var o=document.createElement("div");return o.id=i,o.textContent=n,o.style.display="none",hr().appendChild(o),function(){var l=hr();l.contains(o)&&l.removeChild(o)}},[i,n]),i}var Cr=K.createContext(null);function Vl(e){var t=D.useRef(e);return D.useEffect(function(){t.current=e}),t}function Ap(){var e=null;function t(){return!!e}function n(o){return o===e}function r(o){e&&F();var s={abandon:o};return e=s,s}function i(){e||F(),e=null}function a(){e&&(e.abandon(),i())}return{isClaimed:t,isActive:n,claim:r,release:i,tryAbandon:a}}var Dp=9,Tp=13,ba=27,Kl=32,jp=33,Op=34,Np=35,Rp=36,Lp=37,Fp=38,Bp=39,Mp=40,Wn,$p=(Wn={},Wn[Tp]=!0,Wn[Dp]=!0,Wn),Jl=(function(e){$p[e.keyCode]&&e.preventDefault()}),Er=(function(){var e="visibilitychange";if(typeof document>"u")return e;var t=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],n=kt(t,function(r){return"on"+r in document});return n||e})(),Yl=0,Po=5;function Up(e,t){return Math.abs(t.x-e.x)>=Po||Math.abs(t.y-e.y)>=Po}var Io={type:"IDLE"};function zp(e){var t=e.cancel,n=e.completed,r=e.getPhase,i=e.setPhase;return[{eventName:"mousemove",fn:function(o){var s=o.button,l=o.clientX,u=o.clientY;if(s===Yl){var d={x:l,y:u},c=r();if(c.type==="DRAGGING"){o.preventDefault(),c.actions.move(d);return}c.type!=="PENDING"&&F();var h=c.point;if(Up(h,d)){o.preventDefault();var f=c.actions.fluidLift(d);i({type:"DRAGGING",actions:f})}}}},{eventName:"mouseup",fn:function(o){var s=r();if(s.type!=="DRAGGING"){t();return}o.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),n()}},{eventName:"mousedown",fn:function(o){r().type==="DRAGGING"&&o.preventDefault(),t()}},{eventName:"keydown",fn:function(o){var s=r();if(s.type==="PENDING"){t();return}if(o.keyCode===ba){o.preventDefault(),t();return}Jl(o)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){r().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:function(o){var s=r();if(s.type==="IDLE"&&F(),s.actions.shouldRespectForcePress()){t();return}o.preventDefault()}},{eventName:Er,fn:t}]}function qp(e){var t=D.useRef(Io),n=D.useRef(bt),r=ee(function(){return{eventName:"mousedown",fn:function(c){if(!c.defaultPrevented&&c.button===Yl&&!(c.ctrlKey||c.metaKey||c.shiftKey||c.altKey)){var h=e.findClosestDraggableId(c);if(h){var f=e.tryGetLock(h,o,{sourceEvent:c});if(f){c.preventDefault();var g={x:c.clientX,y:c.clientY};n.current(),u(f,g)}}}}}},[e]),i=ee(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(c){if(!c.defaultPrevented){var h=e.findClosestDraggableId(c);if(h){var f=e.findOptionsForDraggable(h);f&&(f.shouldRespectForcePress||e.canGetLock(h)&&c.preventDefault())}}}}},[e]),a=U(function(){var c={passive:!1,capture:!0};n.current=Ke(window,[i,r],c)},[i,r]),o=U(function(){var d=t.current;d.type!=="IDLE"&&(t.current=Io,n.current(),a())},[a]),s=U(function(){var d=t.current;o(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[o]),l=U(function(){var c={capture:!0,passive:!1},h=zp({cancel:s,completed:o,getPhase:function(){return t.current},setPhase:function(g){t.current=g}});n.current=Ke(window,h,c)},[s,o]),u=U(function(c,h){t.current.type!=="IDLE"&&F(),t.current={type:"PENDING",point:h,actions:c},l()},[l]);qe(function(){return a(),function(){n.current()}},[a])}var $t;function Wp(){}var Hp=($t={},$t[Op]=!0,$t[jp]=!0,$t[Rp]=!0,$t[Np]=!0,$t);function Gp(e,t){function n(){t(),e.cancel()}function r(){t(),e.drop()}return[{eventName:"keydown",fn:function(a){if(a.keyCode===ba){a.preventDefault(),n();return}if(a.keyCode===Kl){a.preventDefault(),r();return}if(a.keyCode===Mp){a.preventDefault(),e.moveDown();return}if(a.keyCode===Fp){a.preventDefault(),e.moveUp();return}if(a.keyCode===Bp){a.preventDefault(),e.moveRight();return}if(a.keyCode===Lp){a.preventDefault(),e.moveLeft();return}if(Hp[a.keyCode]){a.preventDefault();return}Jl(a)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:Er,fn:n}]}function Vp(e){var t=D.useRef(Wp),n=ee(function(){return{eventName:"keydown",fn:function(a){if(a.defaultPrevented||a.keyCode!==Kl)return;var o=e.findClosestDraggableId(a);if(!o)return;var s=e.tryGetLock(o,d,{sourceEvent:a});if(!s)return;a.preventDefault();var l=!0,u=s.snapLift();t.current();function d(){l||F(),l=!1,t.current(),r()}t.current=Ke(window,Gp(u,d),{capture:!0,passive:!1})}}},[e]),r=U(function(){var a={passive:!1,capture:!0};t.current=Ke(window,[n],a)},[n]);qe(function(){return r(),function(){t.current()}},[r])}var Kr={type:"IDLE"},Kp=120,Jp=.15;function Yp(e){var t=e.cancel,n=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(i){i.preventDefault()}},{eventName:"keydown",fn:function(i){if(n().type!=="DRAGGING"){t();return}i.keyCode===ba&&i.preventDefault(),t()}},{eventName:Er,fn:t}]}function Xp(e){var t=e.cancel,n=e.completed,r=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(a){var o=r();if(o.type!=="DRAGGING"){t();return}o.hasMoved=!0;var s=a.touches[0],l=s.clientX,u=s.clientY,d={x:l,y:u};a.preventDefault(),o.actions.move(d)}},{eventName:"touchend",fn:function(a){var o=r();if(o.type!=="DRAGGING"){t();return}a.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),n()}},{eventName:"touchcancel",fn:function(a){if(r().type!=="DRAGGING"){t();return}a.preventDefault(),t()}},{eventName:"touchforcechange",fn:function(a){var o=r();o.type==="IDLE"&&F();var s=a.touches[0];if(s){var l=s.force>=Jp;if(l){var u=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){u&&t();return}if(u){if(o.hasMoved){a.preventDefault();return}t();return}a.preventDefault()}}}},{eventName:Er,fn:t}]}function Qp(e){var t=D.useRef(Kr),n=D.useRef(bt),r=U(function(){return t.current},[]),i=U(function(f){t.current=f},[]),a=ee(function(){return{eventName:"touchstart",fn:function(f){if(!f.defaultPrevented){var g=e.findClosestDraggableId(f);if(g){var v=e.tryGetLock(g,s,{sourceEvent:f});if(v){var m=f.touches[0],b=m.clientX,S=m.clientY,x={x:b,y:S};n.current(),c(v,x)}}}}}},[e]),o=U(function(){var f={capture:!0,passive:!1};n.current=Ke(window,[a],f)},[a]),s=U(function(){var h=t.current;h.type!=="IDLE"&&(h.type==="PENDING"&&clearTimeout(h.longPressTimerId),i(Kr),n.current(),o())},[o,i]),l=U(function(){var h=t.current;s(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[s]),u=U(function(){var f={capture:!0,passive:!1},g={cancel:l,completed:s,getPhase:r},v=Ke(window,Xp(g),f),m=Ke(window,Yp(g),f);n.current=function(){v(),m()}},[l,r,s]),d=U(function(){var f=r();f.type!=="PENDING"&&F();var g=f.actions.fluidLift(f.point);i({type:"DRAGGING",actions:g,hasMoved:!1})},[r,i]),c=U(function(f,g){r().type!=="IDLE"&&F();var v=setTimeout(d,Kp);i({type:"PENDING",point:g,actions:f,longPressTimerId:v}),u()},[u,r,i,d]);qe(function(){return o(),function(){n.current();var g=r();g.type==="PENDING"&&(clearTimeout(g.longPressTimerId),i(Kr))}},[r,o,i]),qe(function(){var f=Ke(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return f},[])}var Zp={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function Xl(e,t){if(t==null)return!1;var n=!!Zp[t.tagName.toLowerCase()];if(n)return!0;var r=t.getAttribute("contenteditable");return r==="true"||r===""?!0:t===e?!1:Xl(e,t.parentElement)}function eg(e,t){var n=t.target;return kr(n)?Xl(e,n):!1}var tg=(function(e){return nt(e.getBoundingClientRect()).center});function ng(e){return e instanceof Gl(e).Element}var rg=(function(){var e="matches";if(typeof document>"u")return e;var t=[e,"msMatchesSelector","webkitMatchesSelector"],n=kt(t,function(r){return r in Element.prototype});return n||e})();function Ql(e,t){return e==null?null:e[rg](t)?e:Ql(e.parentElement,t)}function ig(e,t){return e.closest?e.closest(t):Ql(e,t)}function ag(e){return"["+rn.contextId+'="'+e+'"]'}function og(e,t){var n=t.target;if(!ng(n))return null;var r=ag(e),i=ig(n,r);return!i||!kr(i)?null:i}function sg(e,t){var n=og(e,t);return n?n.getAttribute(rn.draggableId):null}function lg(e,t){var n="["+Ai.contextId+'="'+e+'"]',r=pl(document.querySelectorAll(n)),i=kt(r,function(a){return a.getAttribute(Ai.id)===t});return!i||!kr(i)?null:i}function ug(e){e.preventDefault()}function Hn(e){var t=e.expected,n=e.phase,r=e.isLockActive;return e.shouldWarn,!(!r()||t!==n)}function Zl(e){var t=e.lockAPI,n=e.store,r=e.registry,i=e.draggableId;if(t.isClaimed())return!1;var a=r.draggable.findById(i);return!(!a||!a.options.isEnabled||!zl(n.getState(),i))}function cg(e){var t=e.lockAPI,n=e.contextId,r=e.store,i=e.registry,a=e.draggableId,o=e.forceSensorStop,s=e.sourceEvent,l=Zl({lockAPI:t,store:r,registry:i,draggableId:a});if(!l)return null;var u=i.draggable.getById(a),d=lg(n,u.descriptor.id);if(!d||s&&!u.options.canDragInteractiveElements&&eg(d,s))return null;var c=t.claim(o||bt),h="PRE_DRAG";function f(){return u.options.shouldRespectForcePress}function g(){return t.isActive(c)}function v(y,P){Hn({expected:y,phase:h,isLockActive:g,shouldWarn:!0})&&r.dispatch(P())}var m=v.bind(null,"DRAGGING");function b(y){function P(){t.release(),h="COMPLETED"}h!=="PRE_DRAG"&&(P(),h!=="PRE_DRAG"&&F()),r.dispatch(nf(y.liftActionArgs)),h="DRAGGING";function L(O,_){if(_===void 0&&(_={shouldBlockNextClick:!1}),y.cleanup(),_.shouldBlockNextClick){var A=Ke(window,[{eventName:"click",fn:ug,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(A)}P(),r.dispatch(Rl({reason:O}))}return W({isActive:function(){return Hn({expected:"DRAGGING",phase:h,isLockActive:g,shouldWarn:!1})},shouldRespectForcePress:f,drop:function(_){return L("DROP",_)},cancel:function(_){return L("CANCEL",_)}},y.actions)}function S(y){var P=In(function(O){m(function(){return Nl({client:O})})}),L=b({liftActionArgs:{id:a,clientSelection:y,movementMode:"FLUID"},cleanup:function(){return P.cancel()},actions:{move:P}});return W({},L,{move:P})}function x(){var y={moveUp:function(){return m(hf)},moveRight:function(){return m(pf)},moveDown:function(){return m(ff)},moveLeft:function(){return m(gf)}};return b({liftActionArgs:{id:a,clientSelection:tg(d),movementMode:"SNAP"},cleanup:bt,actions:y})}function E(){var y=Hn({expected:"PRE_DRAG",phase:h,isLockActive:g,shouldWarn:!0});y&&t.release()}var w={isActive:function(){return Hn({expected:"PRE_DRAG",phase:h,isLockActive:g,shouldWarn:!1})},shouldRespectForcePress:f,fluidLift:S,snapLift:x,abort:E};return w}var dg=[qp,Vp,Qp];function hg(e){var t=e.contextId,n=e.store,r=e.registry,i=e.customSensors,a=e.enableDefaultSensors,o=[].concat(a?dg:[],i||[]),s=D.useState(function(){return Ap()})[0],l=U(function(S,x){S.isDragging&&!x.isDragging&&s.tryAbandon()},[s]);qe(function(){var S=n.getState(),x=n.subscribe(function(){var E=n.getState();l(S,E),S=E});return x},[s,n,l]),qe(function(){return s.tryAbandon},[s.tryAbandon]);for(var u=U(function(b){return Zl({lockAPI:s,registry:r,store:n,draggableId:b})},[s,r,n]),d=U(function(b,S,x){return cg({lockAPI:s,registry:r,contextId:t,store:n,draggableId:b,forceSensorStop:S,sourceEvent:x&&x.sourceEvent?x.sourceEvent:null})},[t,s,r,n]),c=U(function(b){return sg(t,b)},[t]),h=U(function(b){var S=r.draggable.findById(b);return S?S.options:null},[r.draggable]),f=U(function(){s.isClaimed()&&(s.tryAbandon(),n.getState().phase!=="IDLE"&&n.dispatch(la()))},[s,n]),g=U(s.isClaimed,[s]),v=ee(function(){return{canGetLock:u,tryGetLock:d,findClosestDraggableId:c,findOptionsForDraggable:h,tryReleaseLock:f,isLockClaimed:g}},[u,d,c,h,f,g]),m=0;m<o.length;m++)o[m](v)}var fg=function(t){return{onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}};function vn(e){return e.current||F(),e.current}function pg(e){var t=e.contextId,n=e.setCallbacks,r=e.sensors,i=e.nonce,a=e.dragHandleUsageInstructions,o=D.useRef(null),s=Vl(e),l=U(function(){return fg(s.current)},[s]),u=Cp(t),d=Ip({contextId:t,text:a}),c=vp(t,i),h=U(function(O){vn(o).dispatch(O)},[]),f=ee(function(){return Ha({publishWhileDragging:af,updateDroppableScroll:sf,updateDroppableIsEnabled:lf,updateDroppableIsCombineEnabled:uf,collectionStarting:of},h)},[h]),g=wp(),v=ee(function(){return Jf(g,f)},[g,f]),m=ee(function(){return hp(W({scrollWindow:Yf,scrollDroppable:v.scrollDroppable},Ha({move:Nl},h)))},[v.scrollDroppable,h]),b=yp(t),S=ee(function(){return Hf({announce:u,autoScroller:m,dimensionMarshal:v,focusMarshal:b,getResponders:l,styleMarshal:c})},[u,m,v,b,l,c]);o.current=S;var x=U(function(){var O=vn(o),_=O.getState();_.phase!=="IDLE"&&O.dispatch(la())},[]),E=U(function(){var O=vn(o).getState();return O.isDragging||O.phase==="DROP_ANIMATING"},[]),w=ee(function(){return{isDragging:E,tryAbort:x}},[E,x]);n(w);var y=U(function(O){return zl(vn(o).getState(),O)},[]),P=U(function(){return Tt(vn(o).getState())},[]),L=ee(function(){return{marshal:v,focus:b,contextId:t,canLift:y,isMovementAllowed:P,dragHandleUsageInstructionsId:d,registry:g}},[t,v,d,b,y,P,g]);return hg({contextId:t,store:S,registry:g,customSensors:r,enableDefaultSensors:e.enableDefaultSensors!==!1}),D.useEffect(function(){return x},[x]),K.createElement(Cr.Provider,{value:L},K.createElement(Zc,{context:ma,store:S},e.children))}var gg=0;function mg(){return ee(function(){return""+gg++},[])}function vg(e){var t=mg(),n=e.dragHandleUsageInstructions||rr.dragHandleUsageInstructions;return K.createElement(Gd,null,function(r){return K.createElement(pg,{nonce:e.nonce,contextId:t,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var eu=function(t){return function(n){return t===n}},bg=eu("scroll"),yg=eu("auto"),Ao=function(t,n){return n(t.overflowX)||n(t.overflowY)},xg=function(t){var n=window.getComputedStyle(t),r={overflowX:n.overflowX,overflowY:n.overflowY};return Ao(r,bg)||Ao(r,yg)},wg=function(){return!1},Sg=function e(t){return t==null?null:t===document.body?wg()?t:null:t===document.documentElement?null:xg(t)?t:e(t.parentElement)},Di=(function(e){return{x:e.scrollLeft,y:e.scrollTop}}),kg=function e(t){if(!t)return!1;var n=window.getComputedStyle(t);return n.position==="fixed"?!0:e(t.parentElement)},Cg=(function(e){var t=Sg(e),n=kg(e);return{closestScrollable:t,isFixedOnPage:n}}),Eg=(function(e){var t=e.descriptor,n=e.isEnabled,r=e.isCombineEnabled,i=e.isFixedOnPage,a=e.direction,o=e.client,s=e.page,l=e.closest,u=(function(){if(!l)return null;var f=l.scrollSize,g=l.client,v=Ml({scrollHeight:f.scrollHeight,scrollWidth:f.scrollWidth,height:g.paddingBox.height,width:g.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:g,scrollSize:f,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:v,diff:{value:Pe,displacement:Pe}}}})(),d=a==="vertical"?ra:yl,c=tn({page:s,withPlaceholder:null,axis:d,frame:u}),h={descriptor:t,isCombineEnabled:r,isFixedOnPage:i,axis:d,isEnabled:n,client:o,page:s,frame:u,subject:c};return h}),_g=function(t,n){var r=ul(t);if(!n||t!==n)return r;var i=r.paddingBox.top-n.scrollTop,a=r.paddingBox.left-n.scrollLeft,o=i+n.scrollHeight,s=a+n.scrollWidth,l={top:i,right:s,bottom:o,left:a},u=Qi(l,r.border),d=Zi({borderBox:u,margin:r.margin,border:r.border,padding:r.padding});return d},Pg=(function(e){var t=e.ref,n=e.descriptor,r=e.env,i=e.windowScroll,a=e.direction,o=e.isDropDisabled,s=e.isCombineEnabled,l=e.shouldClipSubject,u=r.closestScrollable,d=_g(t,u),c=sr(d,i),h=(function(){if(!u)return null;var g=ul(u),v={scrollHeight:u.scrollHeight,scrollWidth:u.scrollWidth};return{client:g,page:sr(g,i),scroll:Di(u),scrollSize:v,shouldClipSubject:l}})(),f=Eg({descriptor:n,isEnabled:!o,isCombineEnabled:s,isFixedOnPage:r.isFixedOnPage,direction:a,client:d,page:c,closest:h});return f}),Ig={passive:!1},Ag={passive:!0},Do=(function(e){return e.shouldPublishImmediately?Ig:Ag});function fr(e){var t=D.useContext(e);return t||F(),t}var Gn=function(t){return t&&t.env.closestScrollable||null};function Dg(e){var t=D.useRef(null),n=fr(Cr),r=va("droppable"),i=n.registry,a=n.marshal,o=Vl(e),s=ee(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),l=D.useRef(s),u=ee(function(){return _e(function(E,w){t.current||F();var y={x:E,y:w};a.updateDroppableScroll(s.id,y)})},[s.id,a]),d=U(function(){var E=t.current;return!E||!E.env.closestScrollable?Pe:Di(E.env.closestScrollable)},[]),c=U(function(){var E=d();u(E.x,E.y)},[d,u]),h=ee(function(){return In(c)},[c]),f=U(function(){var E=t.current,w=Gn(E);E&&w||F();var y=E.scrollOptions;if(y.shouldPublishImmediately){c();return}h()},[h,c]),g=U(function(E,w){t.current&&F();var y=o.current,P=y.getDroppableRef();P||F();var L=Cg(P),O={ref:P,descriptor:s,env:L,scrollOptions:w};t.current=O;var _=Pg({ref:P,descriptor:s,env:L,windowScroll:E,direction:y.direction,isDropDisabled:y.isDropDisabled,isCombineEnabled:y.isCombineEnabled,shouldClipSubject:!y.ignoreContainerClipping}),A=L.closestScrollable;return A&&(A.setAttribute(Eo.contextId,n.contextId),A.addEventListener("scroll",f,Do(O.scrollOptions))),_},[n.contextId,s,f,o]),v=U(function(){var E=t.current,w=Gn(E);return E&&w||F(),Di(w)},[]),m=U(function(){var E=t.current;E||F();var w=Gn(E);t.current=null,w&&(h.cancel(),w.removeAttribute(Eo.contextId),w.removeEventListener("scroll",f,Do(E.scrollOptions)))},[f,h]),b=U(function(E){var w=t.current;w||F();var y=Gn(w);y||F(),y.scrollTop+=E.y,y.scrollLeft+=E.x},[]),S=ee(function(){return{getDimensionAndWatchScroll:g,getScrollWhileDragging:v,dragStopped:m,scroll:b}},[m,g,v,b]),x=ee(function(){return{uniqueId:r,descriptor:s,callbacks:S}},[S,s,r]);qe(function(){return l.current=x.descriptor,i.droppable.register(x),function(){t.current&&m(),i.droppable.unregister(x)}},[S,s,m,x,a,i.droppable]),qe(function(){t.current&&a.updateDroppableIsEnabled(l.current.id,!e.isDropDisabled)},[e.isDropDisabled,a]),qe(function(){t.current&&a.updateDroppableIsCombineEnabled(l.current.id,e.isCombineEnabled)},[e.isCombineEnabled,a])}function Jr(){}var To={width:0,height:0,margin:Qd},Tg=function(t){var n=t.isAnimatingOpenOnMount,r=t.placeholder,i=t.animate;return n||i==="close"?To:{height:r.client.borderBox.height,width:r.client.borderBox.width,margin:r.client.margin}},jg=function(t){var n=t.isAnimatingOpenOnMount,r=t.placeholder,i=t.animate,a=Tg({isAnimatingOpenOnMount:n,placeholder:r,animate:i});return{display:r.display,boxSizing:"border-box",width:a.width,height:a.height,marginTop:a.margin.top,marginRight:a.margin.right,marginBottom:a.margin.bottom,marginLeft:a.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:i!=="none"?wn.placeholder:null}};function Og(e){var t=D.useRef(null),n=U(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),r=e.animate,i=e.onTransitionEnd,a=e.onClose,o=e.contextId,s=D.useState(e.animate==="open"),l=s[0],u=s[1];D.useEffect(function(){return l?r!=="open"?(n(),u(!1),Jr):t.current?Jr:(t.current=setTimeout(function(){t.current=null,u(!1)}),n):Jr},[r,l,n]);var d=U(function(h){h.propertyName==="height"&&(i(),r==="close"&&a())},[r,a,i]),c=jg({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return K.createElement(e.placeholder.tagName,{style:c,"data-rbd-placeholder-context-id":o,onTransitionEnd:d,ref:e.innerRef})}var Ng=K.memo(Og),ya=K.createContext(null),Rg=(function(e){Qs(t,e);function t(){for(var r,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a))||this,r.state={isVisible:!!r.props.on,data:r.props.on,animate:r.props.shouldAnimate&&r.props.on?"open":"none"},r.onClose=function(){r.state.animate==="close"&&r.setState({isVisible:!1})},r}t.getDerivedStateFromProps=function(i,a){return i.shouldAnimate?i.on?{isVisible:!0,data:i.on,animate:"open"}:a.isVisible?{isVisible:!0,data:a.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!i.on,data:i.on,animate:"none"}};var n=t.prototype;return n.render=function(){if(!this.state.isVisible)return null;var i={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(i)},t})(K.PureComponent),jo={dragging:5e3,dropAnimating:4500},Lg=function(t,n){return n?wn.drop(n.duration):t?wn.snap:wn.fluid},Fg=function(t,n){return t?n?jn.opacity.drop:jn.opacity.combining:null},Bg=function(t){return t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP"};function Mg(e){var t=e.dimension,n=t.client,r=e.offset,i=e.combineWith,a=e.dropping,o=!!i,s=Bg(e),l=!!a,u=l?Pi.drop(r,o):Pi.moveTo(r),d={position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:Lg(s,a),transform:u,opacity:Fg(o,l),zIndex:l?jo.dropAnimating:jo.dragging,pointerEvents:"none"};return d}function $g(e){return{transform:Pi.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function Ug(e){return e.type==="DRAGGING"?Mg(e):$g(e)}function zg(e,t,n){n===void 0&&(n=Pe);var r=window.getComputedStyle(t),i=t.getBoundingClientRect(),a=ll(i,r),o=sr(a,n),s={client:a,tagName:t.tagName.toLowerCase(),display:r.display},l={x:a.marginBox.width,y:a.marginBox.height},u={descriptor:e,placeholder:s,displaceBy:l,client:a,page:o};return u}function qg(e){var t=va("draggable"),n=e.descriptor,r=e.registry,i=e.getDraggableRef,a=e.canDragInteractiveElements,o=e.shouldRespectForcePress,s=e.isEnabled,l=ee(function(){return{canDragInteractiveElements:a,shouldRespectForcePress:o,isEnabled:s}},[a,s,o]),u=U(function(f){var g=i();return g||F(),zg(n,g,f)},[n,i]),d=ee(function(){return{uniqueId:t,descriptor:n,options:l,getDimension:u}},[n,u,l,t]),c=D.useRef(d),h=D.useRef(!0);qe(function(){return r.draggable.register(c.current),function(){return r.draggable.unregister(c.current)}},[r.draggable]),qe(function(){if(h.current){h.current=!1;return}var f=c.current;c.current=d,r.draggable.update(d,f)},[d,r.draggable])}function Wg(e){e.preventDefault()}function Hg(e){var t=D.useRef(null),n=U(function(O){t.current=O},[]),r=U(function(){return t.current},[]),i=fr(Cr),a=i.contextId,o=i.dragHandleUsageInstructionsId,s=i.registry,l=fr(ya),u=l.type,d=l.droppableId,c=ee(function(){return{id:e.draggableId,index:e.index,type:u,droppableId:d}},[e.draggableId,e.index,u,d]),h=e.children,f=e.draggableId,g=e.isEnabled,v=e.shouldRespectForcePress,m=e.canDragInteractiveElements,b=e.isClone,S=e.mapped,x=e.dropAnimationFinished;if(!b){var E=ee(function(){return{descriptor:c,registry:s,getDraggableRef:r,canDragInteractiveElements:m,shouldRespectForcePress:v,isEnabled:g}},[c,s,r,m,v,g]);qg(E)}var w=ee(function(){return g?{tabIndex:0,role:"button","aria-describedby":o,"data-rbd-drag-handle-draggable-id":f,"data-rbd-drag-handle-context-id":a,draggable:!1,onDragStart:Wg}:null},[a,o,f,g]),y=U(function(O){S.type==="DRAGGING"&&S.dropping&&O.propertyName==="transform"&&x()},[x,S]),P=ee(function(){var O=Ug(S),_=S.type==="DRAGGING"&&S.dropping?y:null,A={innerRef:n,draggableProps:{"data-rbd-draggable-context-id":a,"data-rbd-draggable-id":f,style:O,onTransitionEnd:_},dragHandleProps:w};return A},[a,w,f,S,y,n]),L=ee(function(){return{draggableId:c.id,type:c.type,source:{index:c.index,droppableId:c.droppableId}}},[c.droppableId,c.id,c.index,c.type]);return h(P,S.snapshot,L)}var tu=(function(e,t){return e===t}),nu=(function(e){var t=e.combine,n=e.destination;return n?n.droppableId:t?t.droppableId:null}),Gg=function(t){return t.combine?t.combine.draggableId:null},Vg=function(t){return t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null};function Kg(){var e=_e(function(i,a){return{x:i,y:a}}),t=_e(function(i,a,o,s,l){return{isDragging:!0,isClone:a,isDropAnimating:!!l,dropAnimation:l,mode:i,draggingOver:o,combineWith:s,combineTargetFor:null}}),n=_e(function(i,a,o,s,l,u,d){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:l,combineWith:u,mode:a,offset:i,dimension:o,forceShouldAnimate:d,snapshot:t(a,s,l,u,null)}}}),r=function(a,o){if(a.isDragging){if(a.critical.draggable.id!==o.draggableId)return null;var s=a.current.client.offset,l=a.dimensions.draggables[o.draggableId],u=ze(a.impact),d=Vg(a.impact),c=a.forceShouldAnimate;return n(e(s.x,s.y),a.movementMode,l,o.isClone,u,d,c)}if(a.phase==="DROP_ANIMATING"){var h=a.completed;if(h.result.draggableId!==o.draggableId)return null;var f=o.isClone,g=a.dimensions.draggables[o.draggableId],v=h.result,m=v.mode,b=nu(v),S=Gg(v),x=a.dropDuration,E={duration:x,curve:ca.drop,moveTo:a.newHomeClientOffset,opacity:S?jn.opacity.drop:null,scale:S?jn.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:g,dropping:E,draggingOver:b,combineWith:S,mode:m,forceShouldAnimate:null,snapshot:t(m,f,b,S,E)}}}return null};return r}function ru(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var Jg={mapped:{type:"SECONDARY",offset:Pe,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:ru(null)}};function Yg(){var e=_e(function(o,s){return{x:o,y:s}}),t=_e(ru),n=_e(function(o,s,l){return s===void 0&&(s=null),{mapped:{type:"SECONDARY",offset:o,combineTargetFor:s,shouldAnimateDisplacement:l,snapshot:t(s)}}}),r=function(s){return s?n(Pe,s,!0):null},i=function(s,l,u,d){var c=u.displaced.visible[s],h=!!(d.inVirtualList&&d.effected[s]),f=xr(u),g=f&&f.draggableId===s?l:null;if(!c){if(!h)return r(g);if(u.displaced.invisible[s])return null;var v=on(d.displacedBy.point),m=e(v.x,v.y);return n(m,g,!0)}if(h)return r(g);var b=u.displacedBy.point,S=e(b.x,b.y);return n(S,g,c.shouldAnimate)},a=function(s,l){if(s.isDragging)return s.critical.draggable.id===l.draggableId?null:i(l.draggableId,s.critical.draggable.id,s.impact,s.afterCritical);if(s.phase==="DROP_ANIMATING"){var u=s.completed;return u.result.draggableId===l.draggableId?null:i(l.draggableId,u.result.draggableId,u.impact,u.afterCritical)}return null};return a}var Xg=function(){var t=Kg(),n=Yg(),r=function(a,o){return t(a,o)||n(a,o)||Jg};return r},Qg={dropAnimationFinished:Ll},Zg=ol(Xg,Qg,null,{context:ma,pure:!0,areStatePropsEqual:tu})(Hg);function iu(e){var t=fr(ya),n=t.isUsingCloneFor;return n===e.draggableId&&!e.isClone?null:K.createElement(Zg,e)}function em(e){var t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,r=!!e.shouldRespectForcePress;return K.createElement(iu,W({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:r}))}function tm(e){var t=D.useContext(Cr);t||F();var n=t.contextId,r=t.isMovementAllowed,i=D.useRef(null),a=D.useRef(null),o=e.children,s=e.droppableId,l=e.type,u=e.mode,d=e.direction,c=e.ignoreContainerClipping,h=e.isDropDisabled,f=e.isCombineEnabled,g=e.snapshot,v=e.useClone,m=e.updateViewportMaxScroll,b=e.getContainerForClone,S=U(function(){return i.current},[]),x=U(function(A){i.current=A},[]);U(function(){return a.current},[]);var E=U(function(A){a.current=A},[]),w=U(function(){r()&&m({maxScroll:Ul()})},[r,m]);Dg({droppableId:s,type:l,mode:u,direction:d,isDropDisabled:h,isCombineEnabled:f,ignoreContainerClipping:c,getDroppableRef:S});var y=K.createElement(Rg,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(A){var j=A.onClose,I=A.data,N=A.animate;return K.createElement(Ng,{placeholder:I,onClose:j,innerRef:E,animate:N,contextId:n,onTransitionEnd:w})}),P=ee(function(){return{innerRef:x,placeholder:y,droppableProps:{"data-rbd-droppable-id":s,"data-rbd-droppable-context-id":n}}},[n,s,y,x]),L=v?v.dragging.draggableId:null,O=ee(function(){return{droppableId:s,type:l,isUsingCloneFor:L}},[s,L,l]);function _(){if(!v)return null;var A=v.dragging,j=v.render,I=K.createElement(iu,{draggableId:A.draggableId,index:A.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(N,M){return j(N,M,A)});return Tc.createPortal(I,b())}return K.createElement(ya.Provider,{value:O},o(P,g),_())}var Yr=function(t,n){return t===n.droppable.type},Oo=function(t,n){return n.draggables[t.draggable.id]},nm=function(){var t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},n=W({},t,{shouldAnimatePlaceholder:!1}),r=_e(function(o){return{draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}}}),i=_e(function(o,s,l,u,d,c){var h=d.descriptor.id,f=d.descriptor.droppableId===o;if(f){var g=c?{render:c,dragging:r(d.descriptor)}:null,v={isDraggingOver:l,draggingOverWith:l?h:null,draggingFromThisWith:h,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!1,snapshot:v,useClone:g}}if(!s)return n;if(!u)return t;var m={isDraggingOver:l,draggingOverWith:h,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!0,snapshot:m,useClone:null}}),a=function(s,l){var u=l.droppableId,d=l.type,c=!l.isDropDisabled,h=l.renderClone;if(s.isDragging){var f=s.critical;if(!Yr(d,f))return n;var g=Oo(f,s.dimensions),v=ze(s.impact)===u;return i(u,c,v,v,g,h)}if(s.phase==="DROP_ANIMATING"){var m=s.completed;if(!Yr(d,m.critical))return n;var b=Oo(m.critical,s.dimensions);return i(u,c,nu(m.result)===u,ze(m.impact)===u,b,h)}if(s.phase==="IDLE"&&s.completed&&!s.shouldFlush){var S=s.completed;if(!Yr(d,S.critical))return n;var x=ze(S.impact)===u,E=!!(S.impact.at&&S.impact.at.type==="COMBINE"),w=S.critical.droppable.id===u;return x?E?t:n:w?t:n}return n};return a},rm={updateViewportMaxScroll:df};function im(){return document.body||F(),document.body}var am={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:im},au=ol(nm,rm,null,{context:ma,pure:!0,areStatePropsEqual:tu})(tm);au.defaultProps=am;const No=["http","https","mailto","tel"];function om(e){const t=(e||"").trim(),n=t.charAt(0);if(n==="#"||n==="/")return t;const r=t.indexOf(":");if(r===-1)return t;let i=-1;for(;++i<No.length;){const a=No[i];if(r===a.length&&t.slice(0,a.length).toLowerCase()===a)return t}return i=t.indexOf("?"),i!==-1&&r>i||(i=t.indexOf("#"),i!==-1&&r>i)?t:"javascript:void(0)"}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Xr,Ro;function sm(){return Ro||(Ro=1,Xr=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}),Xr}var lm=sm();const ou=St(lm);function Sn(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Lo(e.position):"start"in e||"end"in e?Lo(e):"line"in e||"column"in e?Ti(e):""}function Ti(e){return Fo(e&&e.line)+":"+Fo(e&&e.column)}function Lo(e){return Ti(e&&e.start)+"-"+Ti(e&&e.end)}function Fo(e){return e&&typeof e=="number"?e:1}class Ye extends Error{constructor(t,n,r){const i=[null,null];let a={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(r=n,n=void 0),typeof r=="string"){const o=r.indexOf(":");o===-1?i[1]=r:(i[0]=r.slice(0,o),i[1]=r.slice(o+1))}n&&("type"in n||"position"in n?n.position&&(a=n.position):"start"in n||"end"in n?a=n:("line"in n||"column"in n)&&(a.start=n)),this.name=Sn(n)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack="",typeof t=="object"&&t.stack&&(this.stack=t.stack),this.reason=this.message,this.fatal,this.line=a.start.line,this.column=a.start.column,this.position=a,this.source=i[0],this.ruleId=i[1],this.file,this.actual,this.expected,this.url,this.note}}Ye.prototype.file="";Ye.prototype.name="";Ye.prototype.reason="";Ye.prototype.message="";Ye.prototype.stack="";Ye.prototype.fatal=null;Ye.prototype.column=null;Ye.prototype.line=null;Ye.prototype.source=null;Ye.prototype.ruleId=null;Ye.prototype.position=null;const it={basename:um,dirname:cm,extname:dm,join:hm,sep:"/"};function um(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Ln(e);let n=0,r=-1,i=e.length,a;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.charCodeAt(i)===47){if(a){n=i+1;break}}else r<0&&(a=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,s=t.length-1;for(;i--;)if(e.charCodeAt(i)===47){if(a){n=i+1;break}}else o<0&&(a=!0,o=i+1),s>-1&&(e.charCodeAt(i)===t.charCodeAt(s--)?s<0&&(r=i):(s=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function cm(e){if(Ln(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.charCodeAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function dm(e){Ln(e);let t=e.length,n=-1,r=0,i=-1,a=0,o;for(;t--;){const s=e.charCodeAt(t);if(s===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),s===46?i<0?i=t:a!==1&&(a=1):i>-1&&(a=-1)}return i<0||n<0||a===0||a===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function hm(...e){let t=-1,n;for(;++t<e.length;)Ln(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":fm(n)}function fm(e){Ln(e);const t=e.charCodeAt(0)===47;let n=pm(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.charCodeAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function pm(e,t){let n="",r=0,i=-1,a=0,o=-1,s,l;for(;++o<=e.length;){if(o<e.length)s=e.charCodeAt(o);else{if(s===47)break;s=47}if(s===47){if(!(i===o-1||a===1))if(i!==o-1&&a===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,a=0;continue}}else if(n.length>0){n="",r=0,i=o,a=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,a=0}else s===46&&a>-1?a++:a=-1}return n}function Ln(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const gm={cwd:mm};function mm(){return"/"}function ji(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function vm(e){if(typeof e=="string")e=new URL(e);else if(!ji(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return bm(e)}function bm(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.charCodeAt(n)===37&&t.charCodeAt(n+1)===50){const r=t.charCodeAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const Qr=["history","path","basename","stem","extname","dirname"];class su{constructor(t){let n;t?typeof t=="string"||ym(t)?n={value:t}:ji(t)?n={path:t}:n=t:n={},this.data={},this.messages=[],this.history=[],this.cwd=gm.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<Qr.length;){const a=Qr[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let i;for(i in n)Qr.includes(i)||(this[i]=n[i])}get path(){return this.history[this.history.length-1]}set path(t){ji(t)&&(t=vm(t)),ei(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?it.dirname(this.path):void 0}set dirname(t){Bo(this.basename,"dirname"),this.path=it.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?it.basename(this.path):void 0}set basename(t){ei(t,"basename"),Zr(t,"basename"),this.path=it.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?it.extname(this.path):void 0}set extname(t){if(Zr(t,"extname"),Bo(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=it.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?it.basename(this.path,this.extname):void 0}set stem(t){ei(t,"stem"),Zr(t,"stem"),this.path=it.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t||void 0)}message(t,n,r){const i=new Ye(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=null,i}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}}function Zr(e,t){if(e&&e.includes(it.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+it.sep+"`")}function ei(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Bo(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function ym(e){return ou(e)}function Mo(e){if(e)throw e}var ti,$o;function xm(){if($o)return ti;$o=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(u){return typeof Array.isArray=="function"?Array.isArray(u):t.call(u)==="[object Array]"},a=function(u){if(!u||t.call(u)!=="[object Object]")return!1;var d=e.call(u,"constructor"),c=u.constructor&&u.constructor.prototype&&e.call(u.constructor.prototype,"isPrototypeOf");if(u.constructor&&!d&&!c)return!1;var h;for(h in u);return typeof h>"u"||e.call(u,h)},o=function(u,d){n&&d.name==="__proto__"?n(u,d.name,{enumerable:!0,configurable:!0,value:d.newValue,writable:!0}):u[d.name]=d.newValue},s=function(u,d){if(d==="__proto__")if(e.call(u,d)){if(r)return r(u,d).value}else return;return u[d]};return ti=function l(){var u,d,c,h,f,g,v=arguments[0],m=1,b=arguments.length,S=!1;for(typeof v=="boolean"&&(S=v,v=arguments[1]||{},m=2),(v==null||typeof v!="object"&&typeof v!="function")&&(v={});m<b;++m)if(u=arguments[m],u!=null)for(d in u)c=s(v,d),h=s(u,d),v!==h&&(S&&h&&(a(h)||(f=i(h)))?(f?(f=!1,g=c&&i(c)?c:[]):g=c&&a(c)?c:{},o(v,{name:d,newValue:l(S,g,h)})):typeof h<"u"&&o(v,{name:d,newValue:h}));return v},ti}var wm=xm();const Uo=St(wm);function Oi(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Sm(){const e=[],t={run:n,use:r};return t;function n(...i){let a=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);s(null,...i);function s(l,...u){const d=e[++a];let c=-1;if(l){o(l);return}for(;++c<i.length;)(u[c]===null||u[c]===void 0)&&(u[c]=i[c]);i=u,d?km(d,s)(...u):o(null,...u)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function km(e,t){let n;return r;function r(...o){const s=e.length>o.length;let l;s&&o.push(i);try{l=e.apply(this,o)}catch(u){const d=u;if(s&&n)throw d;return i(d)}s||(l&&l.then&&typeof l.then=="function"?l.then(a,i):l instanceof Error?i(l):a(l))}function i(o,...s){n||(n=!0,t(o,...s))}function a(o){i(null,o)}}const Cm=uu().freeze(),lu={}.hasOwnProperty;function uu(){const e=Sm(),t=[];let n={},r,i=-1;return a.data=o,a.Parser=void 0,a.Compiler=void 0,a.freeze=s,a.attachers=t,a.use=l,a.parse=u,a.stringify=d,a.run=c,a.runSync=h,a.process=f,a.processSync=g,a;function a(){const v=uu();let m=-1;for(;++m<t.length;)v.use(...t[m]);return v.data(Uo(!0,{},n)),v}function o(v,m){return typeof v=="string"?arguments.length===2?(ii("data",r),n[v]=m,a):lu.call(n,v)&&n[v]||null:v?(ii("data",r),n=v,a):n}function s(){if(r)return a;for(;++i<t.length;){const[v,...m]=t[i];if(m[0]===!1)continue;m[0]===!0&&(m[0]=void 0);const b=v.call(a,...m);typeof b=="function"&&e.use(b)}return r=!0,i=Number.POSITIVE_INFINITY,a}function l(v,...m){let b;if(ii("use",r),v!=null)if(typeof v=="function")w(v,...m);else if(typeof v=="object")Array.isArray(v)?E(v):x(v);else throw new TypeError("Expected usable value, not `"+v+"`");return b&&(n.settings=Object.assign(n.settings||{},b)),a;function S(y){if(typeof y=="function")w(y);else if(typeof y=="object")if(Array.isArray(y)){const[P,...L]=y;w(P,...L)}else x(y);else throw new TypeError("Expected usable value, not `"+y+"`")}function x(y){E(y.plugins),y.settings&&(b=Object.assign(b||{},y.settings))}function E(y){let P=-1;if(y!=null)if(Array.isArray(y))for(;++P<y.length;){const L=y[P];S(L)}else throw new TypeError("Expected a list of plugins, not `"+y+"`")}function w(y,P){let L=-1,O;for(;++L<t.length;)if(t[L][0]===y){O=t[L];break}O?(Oi(O[1])&&Oi(P)&&(P=Uo(!0,O[1],P)),O[1]=P):t.push([...arguments])}}function u(v){a.freeze();const m=bn(v),b=a.Parser;return ni("parse",b),zo(b,"parse")?new b(String(m),m).parse():b(String(m),m)}function d(v,m){a.freeze();const b=bn(m),S=a.Compiler;return ri("stringify",S),qo(v),zo(S,"compile")?new S(v,b).compile():S(v,b)}function c(v,m,b){if(qo(v),a.freeze(),!b&&typeof m=="function"&&(b=m,m=void 0),!b)return new Promise(S);S(null,b);function S(x,E){e.run(v,bn(m),w);function w(y,P,L){P=P||v,y?E(y):x?x(P):b(null,P,L)}}}function h(v,m){let b,S;return a.run(v,m,x),Wo("runSync","run",S),b;function x(E,w){Mo(E),b=w,S=!0}}function f(v,m){if(a.freeze(),ni("process",a.Parser),ri("process",a.Compiler),!m)return new Promise(b);b(null,m);function b(S,x){const E=bn(v);a.run(a.parse(E),E,(y,P,L)=>{if(y||!P||!L)w(y);else{const O=a.stringify(P,L);O==null||(Pm(O)?L.value=O:L.result=O),w(y,L)}});function w(y,P){y||!P?x(y):S?S(P):m(null,P)}}}function g(v){let m;a.freeze(),ni("processSync",a.Parser),ri("processSync",a.Compiler);const b=bn(v);return a.process(b,S),Wo("processSync","process",m),b;function S(x){m=!0,Mo(x)}}}function zo(e,t){return typeof e=="function"&&e.prototype&&(Em(e.prototype)||t in e.prototype)}function Em(e){let t;for(t in e)if(lu.call(e,t))return!0;return!1}function ni(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Parser`")}function ri(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Compiler`")}function ii(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function qo(e){if(!Oi(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Wo(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function bn(e){return _m(e)?e:new su(e)}function _m(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Pm(e){return typeof e=="string"||ou(e)}const Im={};function Am(e,t){const n=Im,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return cu(e,r,i)}function cu(e,t,n){if(Dm(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Ho(e.children,t,n)}return Array.isArray(e)?Ho(e,t,n):""}function Ho(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=cu(e[i],t,n);return r.join("")}function Dm(e){return!!(e&&typeof e=="object")}function We(e,t,n,r){const i=e.length;let a=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);a<r.length;)o=r.slice(a,a+1e4),o.unshift(t,0),e.splice(...o),a+=1e4,t+=1e4}function Ve(e,t){return e.length>0?(We(e,e.length,0,t),e):t}const Go={}.hasOwnProperty;function du(e){const t={};let n=-1;for(;++n<e.length;)Tm(t,e[n]);return t}function Tm(e,t){let n;for(n in t){const i=(Go.call(e,n)?e[n]:void 0)||(e[n]={}),a=t[n];let o;if(a)for(o in a){Go.call(i,o)||(i[o]=[]);const s=a[o];jm(i[o],Array.isArray(s)?s:s?[s]:[])}}}function jm(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);We(e,0,0,r)}const Om=/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,Le=Ct(/[A-Za-z]/),je=Ct(/[\dA-Za-z]/),Nm=Ct(/[#-'*+\--9=?A-Z^-~]/);function pr(e){return e!==null&&(e<32||e===127)}const Ni=Ct(/\d/),Rm=Ct(/[\dA-Fa-f]/),Lm=Ct(/[!-/:-@[-`{-~]/);function q(e){return e!==null&&e<-2}function ce(e){return e!==null&&(e<0||e===32)}function Q(e){return e===-2||e===-1||e===32}const _r=Ct(Om),Rt=Ct(/\s/);function Ct(e){return t;function t(n){return n!==null&&e.test(String.fromCharCode(n))}}function Z(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let a=0;return o;function o(l){return Q(l)?(e.enter(n),s(l)):t(l)}function s(l){return Q(l)&&a++<i?(e.consume(l),s):(e.exit(n),t(l))}}const Fm={tokenize:Bm};function Bm(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),Z(e,t,"linePrefix")}function i(s){return e.enter("paragraph"),a(s)}function a(s){const l=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(s)}function o(s){if(s===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(s);return}return q(s)?(e.consume(s),e.exit("chunkText"),a):(e.consume(s),o)}}const Mm={tokenize:$m},Vo={tokenize:Um};function $m(e){const t=this,n=[];let r=0,i,a,o;return s;function s(x){if(r<n.length){const E=n[r];return t.containerState=E[1],e.attempt(E[0].continuation,l,u)(x)}return u(x)}function l(x){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&S();const E=t.events.length;let w=E,y;for(;w--;)if(t.events[w][0]==="exit"&&t.events[w][1].type==="chunkFlow"){y=t.events[w][1].end;break}b(r);let P=E;for(;P<t.events.length;)t.events[P][1].end=Object.assign({},y),P++;return We(t.events,w+1,0,t.events.slice(E)),t.events.length=P,u(x)}return s(x)}function u(x){if(r===n.length){if(!i)return h(x);if(i.currentConstruct&&i.currentConstruct.concrete)return g(x);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Vo,d,c)(x)}function d(x){return i&&S(),b(r),h(x)}function c(x){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,g(x)}function h(x){return t.containerState={},e.attempt(Vo,f,g)(x)}function f(x){return r++,n.push([t.currentConstruct,t.containerState]),h(x)}function g(x){if(x===null){i&&S(),b(0),e.consume(x);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:a,_tokenizer:i}),v(x)}function v(x){if(x===null){m(e.exit("chunkFlow"),!0),b(0),e.consume(x);return}return q(x)?(e.consume(x),m(e.exit("chunkFlow")),r=0,t.interrupt=void 0,s):(e.consume(x),v)}function m(x,E){const w=t.sliceStream(x);if(E&&w.push(null),x.previous=a,a&&(a.next=x),a=x,i.defineSkip(x.start),i.write(w),t.parser.lazy[x.start.line]){let y=i.events.length;for(;y--;)if(i.events[y][1].start.offset<o&&(!i.events[y][1].end||i.events[y][1].end.offset>o))return;const P=t.events.length;let L=P,O,_;for(;L--;)if(t.events[L][0]==="exit"&&t.events[L][1].type==="chunkFlow"){if(O){_=t.events[L][1].end;break}O=!0}for(b(r),y=P;y<t.events.length;)t.events[y][1].end=Object.assign({},_),y++;We(t.events,L+1,0,t.events.slice(P)),t.events.length=y}}function b(x){let E=n.length;for(;E-- >x;){const w=n[E];t.containerState=w[1],w[0].exit.call(t,e)}n.length=x}function S(){i.write([null]),a=void 0,i=void 0,t.containerState._closeFlow=void 0}}function Um(e,t,n){return Z(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function gr(e){if(e===null||ce(e)||Rt(e))return 1;if(_r(e))return 2}function Pr(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const a=e[i].resolveAll;a&&!r.includes(a)&&(t=a(t,n),r.push(a))}return t}const Ri={name:"attention",tokenize:qm,resolveAll:zm};function zm(e,t){let n=-1,r,i,a,o,s,l,u,d;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;l=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const c=Object.assign({},e[r][1].end),h=Object.assign({},e[n][1].start);Ko(c,-l),Ko(h,l),o={type:l>1?"strongSequence":"emphasisSequence",start:c,end:Object.assign({},e[r][1].end)},s={type:l>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:h},a={type:l>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:l>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},s.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},s.end),u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=Ve(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=Ve(u,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",a,t]]),u=Ve(u,Pr(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=Ve(u,[["exit",a,t],["enter",s,t],["exit",s,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(d=2,u=Ve(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):d=0,We(e,r-1,n-r+3,u),n=r+u.length-d-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function qm(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=gr(r);let a;return o;function o(l){return a=l,e.enter("attentionSequence"),s(l)}function s(l){if(l===a)return e.consume(l),s;const u=e.exit("attentionSequence"),d=gr(l),c=!d||d===2&&i||n.includes(l),h=!i||i===2&&d||n.includes(r);return u._open=!!(a===42?c:c&&(i||!h)),u._close=!!(a===42?h:h&&(d||!c)),t(l)}}function Ko(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Wm={name:"autolink",tokenize:Hm};function Hm(e,t,n){let r=0;return i;function i(f){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a}function a(f){return Le(f)?(e.consume(f),o):u(f)}function o(f){return f===43||f===45||f===46||je(f)?(r=1,s(f)):u(f)}function s(f){return f===58?(e.consume(f),r=0,l):(f===43||f===45||f===46||je(f))&&r++<32?(e.consume(f),s):(r=0,u(f))}function l(f){return f===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):f===null||f===32||f===60||pr(f)?n(f):(e.consume(f),l)}function u(f){return f===64?(e.consume(f),d):Nm(f)?(e.consume(f),u):n(f)}function d(f){return je(f)?c(f):n(f)}function c(f){return f===46?(e.consume(f),r=0,d):f===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):h(f)}function h(f){if((f===45||je(f))&&r++<63){const g=f===45?h:c;return e.consume(f),g}return n(f)}}const Fn={tokenize:Gm,partial:!0};function Gm(e,t,n){return r;function r(a){return Q(a)?Z(e,i,"linePrefix")(a):i(a)}function i(a){return a===null||q(a)?t(a):n(a)}}const hu={name:"blockQuote",tokenize:Vm,continuation:{tokenize:Km},exit:Jm};function Vm(e,t,n){const r=this;return i;function i(o){if(o===62){const s=r.containerState;return s.open||(e.enter("blockQuote",{_container:!0}),s.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),a}return n(o)}function a(o){return Q(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function Km(e,t,n){const r=this;return i;function i(o){return Q(o)?Z(e,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):a(o)}function a(o){return e.attempt(hu,t,n)(o)}}function Jm(e){e.exit("blockQuote")}const fu={name:"characterEscape",tokenize:Ym};function Ym(e,t,n){return r;function r(a){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(a),e.exit("escapeMarker"),i}function i(a){return Lm(a)?(e.enter("characterEscapeValue"),e.consume(a),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(a)}}const Jo=document.createElement("i");function xa(e){const t="&"+e+";";Jo.innerHTML=t;const n=Jo.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}const pu={name:"characterReference",tokenize:Xm};function Xm(e,t,n){const r=this;let i=0,a,o;return s;function s(c){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(c),e.exit("characterReferenceMarker"),l}function l(c){return c===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(c),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),a=31,o=je,d(c))}function u(c){return c===88||c===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(c),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,o=Rm,d):(e.enter("characterReferenceValue"),a=7,o=Ni,d(c))}function d(c){if(c===59&&i){const h=e.exit("characterReferenceValue");return o===je&&!xa(r.sliceSerialize(h))?n(c):(e.enter("characterReferenceMarker"),e.consume(c),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(c)&&i++<a?(e.consume(c),d):n(c)}}const Yo={tokenize:Zm,partial:!0},Xo={name:"codeFenced",tokenize:Qm,concrete:!0};function Qm(e,t,n){const r=this,i={tokenize:w,partial:!0};let a=0,o=0,s;return l;function l(y){return u(y)}function u(y){const P=r.events[r.events.length-1];return a=P&&P[1].type==="linePrefix"?P[2].sliceSerialize(P[1],!0).length:0,s=y,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),d(y)}function d(y){return y===s?(o++,e.consume(y),d):o<3?n(y):(e.exit("codeFencedFenceSequence"),Q(y)?Z(e,c,"whitespace")(y):c(y))}function c(y){return y===null||q(y)?(e.exit("codeFencedFence"),r.interrupt?t(y):e.check(Yo,v,E)(y)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===null||q(y)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),c(y)):Q(y)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Z(e,f,"whitespace")(y)):y===96&&y===s?n(y):(e.consume(y),h)}function f(y){return y===null||q(y)?c(y):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),g(y))}function g(y){return y===null||q(y)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),c(y)):y===96&&y===s?n(y):(e.consume(y),g)}function v(y){return e.attempt(i,E,m)(y)}function m(y){return e.enter("lineEnding"),e.consume(y),e.exit("lineEnding"),b}function b(y){return a>0&&Q(y)?Z(e,S,"linePrefix",a+1)(y):S(y)}function S(y){return y===null||q(y)?e.check(Yo,v,E)(y):(e.enter("codeFlowValue"),x(y))}function x(y){return y===null||q(y)?(e.exit("codeFlowValue"),S(y)):(e.consume(y),x)}function E(y){return e.exit("codeFenced"),t(y)}function w(y,P,L){let O=0;return _;function _(M){return y.enter("lineEnding"),y.consume(M),y.exit("lineEnding"),A}function A(M){return y.enter("codeFencedFence"),Q(M)?Z(y,j,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):j(M)}function j(M){return M===s?(y.enter("codeFencedFenceSequence"),I(M)):L(M)}function I(M){return M===s?(O++,y.consume(M),I):O>=o?(y.exit("codeFencedFenceSequence"),Q(M)?Z(y,N,"whitespace")(M):N(M)):L(M)}function N(M){return M===null||q(M)?(y.exit("codeFencedFence"),P(M)):L(M)}}}function Zm(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a)}function a(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const ai={name:"codeIndented",tokenize:tv},ev={tokenize:nv,partial:!0};function tv(e,t,n){const r=this;return i;function i(u){return e.enter("codeIndented"),Z(e,a,"linePrefix",5)(u)}function a(u){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?l(u):q(u)?e.attempt(ev,o,l)(u):(e.enter("codeFlowValue"),s(u))}function s(u){return u===null||q(u)?(e.exit("codeFlowValue"),o(u)):(e.consume(u),s)}function l(u){return e.exit("codeIndented"),t(u)}}function nv(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):q(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):Z(e,a,"linePrefix",5)(o)}function a(o){const s=r.events[r.events.length-1];return s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?t(o):q(o)?i(o):n(o)}}const rv={name:"codeText",tokenize:ov,resolve:iv,previous:av};function iv(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function av(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function ov(e,t,n){let r=0,i,a;return o;function o(c){return e.enter("codeText"),e.enter("codeTextSequence"),s(c)}function s(c){return c===96?(e.consume(c),r++,s):(e.exit("codeTextSequence"),l(c))}function l(c){return c===null?n(c):c===32?(e.enter("space"),e.consume(c),e.exit("space"),l):c===96?(a=e.enter("codeTextSequence"),i=0,d(c)):q(c)?(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),l):(e.enter("codeTextData"),u(c))}function u(c){return c===null||c===32||c===96||q(c)?(e.exit("codeTextData"),l(c)):(e.consume(c),u)}function d(c){return c===96?(e.consume(c),i++,d):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(c)):(a.type="codeTextData",u(c))}}function gu(e){const t={};let n=-1,r,i,a,o,s,l,u;for(;++n<e.length;){for(;n in t;)n=t[n];if(r=e[n],n&&r[1].type==="chunkFlow"&&e[n-1][1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,a=0,a<l.length&&l[a][1].type==="lineEndingBlank"&&(a+=2),a<l.length&&l[a][1].type==="content"))for(;++a<l.length&&l[a][1].type!=="content";)l[a][1].type==="chunkText"&&(l[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,sv(e,n)),n=t[n],u=!0);else if(r[1]._container){for(a=n,i=void 0;a--&&(o=e[a],o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(e[i][1].type="lineEndingBlank"),o[1].type="lineEnding",i=a);i&&(r[1].end=Object.assign({},e[i][1].start),s=e.slice(i,n),s.unshift(r),We(e,i,n-i+1,s))}}return!u}function sv(e,t){const n=e[t][1],r=e[t][2];let i=t-1;const a=[],o=n._tokenizer||r.parser[n.contentType](n.start),s=o.events,l=[],u={};let d,c,h=-1,f=n,g=0,v=0;const m=[v];for(;f;){for(;e[++i][1]!==f;);a.push(i),f._tokenizer||(d=r.sliceStream(f),f.next||d.push(null),c&&o.defineSkip(f.start),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(d),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),c=f,f=f.next}for(f=n;++h<s.length;)s[h][0]==="exit"&&s[h-1][0]==="enter"&&s[h][1].type===s[h-1][1].type&&s[h][1].start.line!==s[h][1].end.line&&(v=h+1,m.push(v),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(o.events=[],f?(f._tokenizer=void 0,f.previous=void 0):m.pop(),h=m.length;h--;){const b=s.slice(m[h],m[h+1]),S=a.pop();l.unshift([S,S+b.length-1]),We(e,S,2,b)}for(h=-1;++h<l.length;)u[g+l[h][0]]=g+l[h][1],g+=l[h][1]-l[h][0]-1;return u}const lv={tokenize:dv,resolve:cv},uv={tokenize:hv,partial:!0};function cv(e){return gu(e),e}function dv(e,t){let n;return r;function r(s){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(s)}function i(s){return s===null?a(s):q(s)?e.check(uv,o,a)(s):(e.consume(s),i)}function a(s){return e.exit("chunkContent"),e.exit("content"),t(s)}function o(s){return e.consume(s),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function hv(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Z(e,a,"linePrefix")}function a(o){if(o===null||q(o))return n(o);const s=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function mu(e,t,n,r,i,a,o,s,l){const u=l||Number.POSITIVE_INFINITY;let d=0;return c;function c(b){return b===60?(e.enter(r),e.enter(i),e.enter(a),e.consume(b),e.exit(a),h):b===null||b===32||b===41||pr(b)?n(b):(e.enter(r),e.enter(o),e.enter(s),e.enter("chunkString",{contentType:"string"}),v(b))}function h(b){return b===62?(e.enter(a),e.consume(b),e.exit(a),e.exit(i),e.exit(r),t):(e.enter(s),e.enter("chunkString",{contentType:"string"}),f(b))}function f(b){return b===62?(e.exit("chunkString"),e.exit(s),h(b)):b===null||b===60||q(b)?n(b):(e.consume(b),b===92?g:f)}function g(b){return b===60||b===62||b===92?(e.consume(b),f):f(b)}function v(b){return!d&&(b===null||b===41||ce(b))?(e.exit("chunkString"),e.exit(s),e.exit(o),e.exit(r),t(b)):d<u&&b===40?(e.consume(b),d++,v):b===41?(e.consume(b),d--,v):b===null||b===32||b===40||pr(b)?n(b):(e.consume(b),b===92?m:v)}function m(b){return b===40||b===41||b===92?(e.consume(b),v):v(b)}}function vu(e,t,n,r,i,a){const o=this;let s=0,l;return u;function u(f){return e.enter(r),e.enter(i),e.consume(f),e.exit(i),e.enter(a),d}function d(f){return s>999||f===null||f===91||f===93&&!l||f===94&&!s&&"_hiddenFootnoteSupport"in o.parser.constructs?n(f):f===93?(e.exit(a),e.enter(i),e.consume(f),e.exit(i),e.exit(r),t):q(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),d):(e.enter("chunkString",{contentType:"string"}),c(f))}function c(f){return f===null||f===91||f===93||q(f)||s++>999?(e.exit("chunkString"),d(f)):(e.consume(f),l||(l=!Q(f)),f===92?h:c)}function h(f){return f===91||f===92||f===93?(e.consume(f),s++,c):c(f)}}function bu(e,t,n,r,i,a){let o;return s;function s(h){return h===34||h===39||h===40?(e.enter(r),e.enter(i),e.consume(h),e.exit(i),o=h===40?41:h,l):n(h)}function l(h){return h===o?(e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):(e.enter(a),u(h))}function u(h){return h===o?(e.exit(a),l(o)):h===null?n(h):q(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),Z(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),d(h))}function d(h){return h===o||h===null||q(h)?(e.exit("chunkString"),u(h)):(e.consume(h),h===92?c:d)}function c(h){return h===o||h===92?(e.consume(h),d):d(h)}}function kn(e,t){let n;return r;function r(i){return q(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):Q(i)?Z(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}function rt(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const fv={name:"definition",tokenize:gv},pv={tokenize:mv,partial:!0};function gv(e,t,n){const r=this;let i;return a;function a(f){return e.enter("definition"),o(f)}function o(f){return vu.call(r,e,s,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function s(f){return i=rt(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===58?(e.enter("definitionMarker"),e.consume(f),e.exit("definitionMarker"),l):n(f)}function l(f){return ce(f)?kn(e,u)(f):u(f)}function u(f){return mu(e,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function d(f){return e.attempt(pv,c,c)(f)}function c(f){return Q(f)?Z(e,h,"whitespace")(f):h(f)}function h(f){return f===null||q(f)?(e.exit("definition"),r.parser.defined.push(i),t(f)):n(f)}}function mv(e,t,n){return r;function r(s){return ce(s)?kn(e,i)(s):n(s)}function i(s){return bu(e,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(s)}function a(s){return Q(s)?Z(e,o,"whitespace")(s):o(s)}function o(s){return s===null||q(s)?t(s):n(s)}}const vv={name:"hardBreakEscape",tokenize:bv};function bv(e,t,n){return r;function r(a){return e.enter("hardBreakEscape"),e.consume(a),i}function i(a){return q(a)?(e.exit("hardBreakEscape"),t(a)):n(a)}}const yv={name:"headingAtx",tokenize:wv,resolve:xv};function xv(e,t){let n=e.length-2,r=3,i,a;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},a={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},We(e,r,n-r+1,[["enter",i,t],["enter",a,t],["exit",a,t],["exit",i,t]])),e}function wv(e,t,n){let r=0;return i;function i(d){return e.enter("atxHeading"),a(d)}function a(d){return e.enter("atxHeadingSequence"),o(d)}function o(d){return d===35&&r++<6?(e.consume(d),o):d===null||ce(d)?(e.exit("atxHeadingSequence"),s(d)):n(d)}function s(d){return d===35?(e.enter("atxHeadingSequence"),l(d)):d===null||q(d)?(e.exit("atxHeading"),t(d)):Q(d)?Z(e,s,"whitespace")(d):(e.enter("atxHeadingText"),u(d))}function l(d){return d===35?(e.consume(d),l):(e.exit("atxHeadingSequence"),s(d))}function u(d){return d===null||d===35||ce(d)?(e.exit("atxHeadingText"),s(d)):(e.consume(d),u)}}const Sv=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Qo=["pre","script","style","textarea"],kv={name:"htmlFlow",tokenize:Pv,resolveTo:_v,concrete:!0},Cv={tokenize:Av,partial:!0},Ev={tokenize:Iv,partial:!0};function _v(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function Pv(e,t,n){const r=this;let i,a,o,s,l;return u;function u(C){return d(C)}function d(C){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(C),c}function c(C){return C===33?(e.consume(C),h):C===47?(e.consume(C),a=!0,v):C===63?(e.consume(C),i=3,r.interrupt?t:k):Le(C)?(e.consume(C),o=String.fromCharCode(C),m):n(C)}function h(C){return C===45?(e.consume(C),i=2,f):C===91?(e.consume(C),i=5,s=0,g):Le(C)?(e.consume(C),i=4,r.interrupt?t:k):n(C)}function f(C){return C===45?(e.consume(C),r.interrupt?t:k):n(C)}function g(C){const ye="CDATA[";return C===ye.charCodeAt(s++)?(e.consume(C),s===ye.length?r.interrupt?t:j:g):n(C)}function v(C){return Le(C)?(e.consume(C),o=String.fromCharCode(C),m):n(C)}function m(C){if(C===null||C===47||C===62||ce(C)){const ye=C===47,xe=o.toLowerCase();return!ye&&!a&&Qo.includes(xe)?(i=1,r.interrupt?t(C):j(C)):Sv.includes(o.toLowerCase())?(i=6,ye?(e.consume(C),b):r.interrupt?t(C):j(C)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(C):a?S(C):x(C))}return C===45||je(C)?(e.consume(C),o+=String.fromCharCode(C),m):n(C)}function b(C){return C===62?(e.consume(C),r.interrupt?t:j):n(C)}function S(C){return Q(C)?(e.consume(C),S):_(C)}function x(C){return C===47?(e.consume(C),_):C===58||C===95||Le(C)?(e.consume(C),E):Q(C)?(e.consume(C),x):_(C)}function E(C){return C===45||C===46||C===58||C===95||je(C)?(e.consume(C),E):w(C)}function w(C){return C===61?(e.consume(C),y):Q(C)?(e.consume(C),w):x(C)}function y(C){return C===null||C===60||C===61||C===62||C===96?n(C):C===34||C===39?(e.consume(C),l=C,P):Q(C)?(e.consume(C),y):L(C)}function P(C){return C===l?(e.consume(C),l=null,O):C===null||q(C)?n(C):(e.consume(C),P)}function L(C){return C===null||C===34||C===39||C===47||C===60||C===61||C===62||C===96||ce(C)?w(C):(e.consume(C),L)}function O(C){return C===47||C===62||Q(C)?x(C):n(C)}function _(C){return C===62?(e.consume(C),A):n(C)}function A(C){return C===null||q(C)?j(C):Q(C)?(e.consume(C),A):n(C)}function j(C){return C===45&&i===2?(e.consume(C),V):C===60&&i===1?(e.consume(C),te):C===62&&i===4?(e.consume(C),ve):C===63&&i===3?(e.consume(C),k):C===93&&i===5?(e.consume(C),he):q(C)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(Cv,fe,I)(C)):C===null||q(C)?(e.exit("htmlFlowData"),I(C)):(e.consume(C),j)}function I(C){return e.check(Ev,N,fe)(C)}function N(C){return e.enter("lineEnding"),e.consume(C),e.exit("lineEnding"),M}function M(C){return C===null||q(C)?I(C):(e.enter("htmlFlowData"),j(C))}function V(C){return C===45?(e.consume(C),k):j(C)}function te(C){return C===47?(e.consume(C),o="",de):j(C)}function de(C){if(C===62){const ye=o.toLowerCase();return Qo.includes(ye)?(e.consume(C),ve):j(C)}return Le(C)&&o.length<8?(e.consume(C),o+=String.fromCharCode(C),de):j(C)}function he(C){return C===93?(e.consume(C),k):j(C)}function k(C){return C===62?(e.consume(C),ve):C===45&&i===2?(e.consume(C),k):j(C)}function ve(C){return C===null||q(C)?(e.exit("htmlFlowData"),fe(C)):(e.consume(C),ve)}function fe(C){return e.exit("htmlFlow"),t(C)}}function Iv(e,t,n){const r=this;return i;function i(o){return q(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a):n(o)}function a(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function Av(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(Fn,t,n)}}const Dv={name:"htmlText",tokenize:Tv};function Tv(e,t,n){const r=this;let i,a,o;return s;function s(k){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(k),l}function l(k){return k===33?(e.consume(k),u):k===47?(e.consume(k),w):k===63?(e.consume(k),x):Le(k)?(e.consume(k),L):n(k)}function u(k){return k===45?(e.consume(k),d):k===91?(e.consume(k),a=0,g):Le(k)?(e.consume(k),S):n(k)}function d(k){return k===45?(e.consume(k),f):n(k)}function c(k){return k===null?n(k):k===45?(e.consume(k),h):q(k)?(o=c,te(k)):(e.consume(k),c)}function h(k){return k===45?(e.consume(k),f):c(k)}function f(k){return k===62?V(k):k===45?h(k):c(k)}function g(k){const ve="CDATA[";return k===ve.charCodeAt(a++)?(e.consume(k),a===ve.length?v:g):n(k)}function v(k){return k===null?n(k):k===93?(e.consume(k),m):q(k)?(o=v,te(k)):(e.consume(k),v)}function m(k){return k===93?(e.consume(k),b):v(k)}function b(k){return k===62?V(k):k===93?(e.consume(k),b):v(k)}function S(k){return k===null||k===62?V(k):q(k)?(o=S,te(k)):(e.consume(k),S)}function x(k){return k===null?n(k):k===63?(e.consume(k),E):q(k)?(o=x,te(k)):(e.consume(k),x)}function E(k){return k===62?V(k):x(k)}function w(k){return Le(k)?(e.consume(k),y):n(k)}function y(k){return k===45||je(k)?(e.consume(k),y):P(k)}function P(k){return q(k)?(o=P,te(k)):Q(k)?(e.consume(k),P):V(k)}function L(k){return k===45||je(k)?(e.consume(k),L):k===47||k===62||ce(k)?O(k):n(k)}function O(k){return k===47?(e.consume(k),V):k===58||k===95||Le(k)?(e.consume(k),_):q(k)?(o=O,te(k)):Q(k)?(e.consume(k),O):V(k)}function _(k){return k===45||k===46||k===58||k===95||je(k)?(e.consume(k),_):A(k)}function A(k){return k===61?(e.consume(k),j):q(k)?(o=A,te(k)):Q(k)?(e.consume(k),A):O(k)}function j(k){return k===null||k===60||k===61||k===62||k===96?n(k):k===34||k===39?(e.consume(k),i=k,I):q(k)?(o=j,te(k)):Q(k)?(e.consume(k),j):(e.consume(k),N)}function I(k){return k===i?(e.consume(k),i=void 0,M):k===null?n(k):q(k)?(o=I,te(k)):(e.consume(k),I)}function N(k){return k===null||k===34||k===39||k===60||k===61||k===96?n(k):k===47||k===62||ce(k)?O(k):(e.consume(k),N)}function M(k){return k===47||k===62||ce(k)?O(k):n(k)}function V(k){return k===62?(e.consume(k),e.exit("htmlTextData"),e.exit("htmlText"),t):n(k)}function te(k){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(k),e.exit("lineEnding"),de}function de(k){return Q(k)?Z(e,he,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(k):he(k)}function he(k){return e.enter("htmlTextData"),o(k)}}const wa={name:"labelEnd",tokenize:Fv,resolveTo:Lv,resolveAll:Rv},jv={tokenize:Bv},Ov={tokenize:Mv},Nv={tokenize:$v};function Rv(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function Lv(e,t){let n=e.length,r=0,i,a,o,s;for(;n--;)if(i=e[n][1],a){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(a=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:e[a][1].type==="labelLink"?"link":"image",start:Object.assign({},e[a][1].start),end:Object.assign({},e[e.length-1][1].end)},u={type:"label",start:Object.assign({},e[a][1].start),end:Object.assign({},e[o][1].end)},d={type:"labelText",start:Object.assign({},e[a+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return s=[["enter",l,t],["enter",u,t]],s=Ve(s,e.slice(a+1,a+r+3)),s=Ve(s,[["enter",d,t]]),s=Ve(s,Pr(t.parser.constructs.insideSpan.null,e.slice(a+r+4,o-3),t)),s=Ve(s,[["exit",d,t],e[o-2],e[o-1],["exit",u,t]]),s=Ve(s,e.slice(o+1)),s=Ve(s,[["exit",l,t]]),We(e,a,e.length,s),e}function Fv(e,t,n){const r=this;let i=r.events.length,a,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){a=r.events[i][1];break}return s;function s(h){return a?a._inactive?c(h):(o=r.parser.defined.includes(rt(r.sliceSerialize({start:a.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(h),e.exit("labelMarker"),e.exit("labelEnd"),l):n(h)}function l(h){return h===40?e.attempt(jv,d,o?d:c)(h):h===91?e.attempt(Ov,d,o?u:c)(h):o?d(h):c(h)}function u(h){return e.attempt(Nv,d,c)(h)}function d(h){return t(h)}function c(h){return a._balanced=!0,n(h)}}function Bv(e,t,n){return r;function r(c){return e.enter("resource"),e.enter("resourceMarker"),e.consume(c),e.exit("resourceMarker"),i}function i(c){return ce(c)?kn(e,a)(c):a(c)}function a(c){return c===41?d(c):mu(e,o,s,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(c)}function o(c){return ce(c)?kn(e,l)(c):d(c)}function s(c){return n(c)}function l(c){return c===34||c===39||c===40?bu(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(c):d(c)}function u(c){return ce(c)?kn(e,d)(c):d(c)}function d(c){return c===41?(e.enter("resourceMarker"),e.consume(c),e.exit("resourceMarker"),e.exit("resource"),t):n(c)}}function Mv(e,t,n){const r=this;return i;function i(s){return vu.call(r,e,a,o,"reference","referenceMarker","referenceString")(s)}function a(s){return r.parser.defined.includes(rt(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(s):n(s)}function o(s){return n(s)}}function $v(e,t,n){return r;function r(a){return e.enter("reference"),e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),i}function i(a){return a===93?(e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),e.exit("reference"),t):n(a)}}const Uv={name:"labelStartImage",tokenize:zv,resolveAll:wa.resolveAll};function zv(e,t,n){const r=this;return i;function i(s){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(s),e.exit("labelImageMarker"),a}function a(s){return s===91?(e.enter("labelMarker"),e.consume(s),e.exit("labelMarker"),e.exit("labelImage"),o):n(s)}function o(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(s):t(s)}}const qv={name:"labelStartLink",tokenize:Wv,resolveAll:wa.resolveAll};function Wv(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),a}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const oi={name:"lineEnding",tokenize:Hv};function Hv(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Z(e,t,"linePrefix")}}const ir={name:"thematicBreak",tokenize:Gv};function Gv(e,t,n){let r=0,i;return a;function a(u){return e.enter("thematicBreak"),o(u)}function o(u){return i=u,s(u)}function s(u){return u===i?(e.enter("thematicBreakSequence"),l(u)):r>=3&&(u===null||q(u))?(e.exit("thematicBreak"),t(u)):n(u)}function l(u){return u===i?(e.consume(u),r++,l):(e.exit("thematicBreakSequence"),Q(u)?Z(e,s,"whitespace")(u):s(u))}}const Be={name:"list",tokenize:Jv,continuation:{tokenize:Yv},exit:Qv},Vv={tokenize:Zv,partial:!0},Kv={tokenize:Xv,partial:!0};function Jv(e,t,n){const r=this,i=r.events[r.events.length-1];let a=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return s;function s(f){const g=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(g==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:Ni(f)){if(r.containerState.type||(r.containerState.type=g,e.enter(g,{_container:!0})),g==="listUnordered")return e.enter("listItemPrefix"),f===42||f===45?e.check(ir,n,u)(f):u(f);if(!r.interrupt||f===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),l(f)}return n(f)}function l(f){return Ni(f)&&++o<10?(e.consume(f),l):(!r.interrupt||o<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(e.exit("listItemValue"),u(f)):n(f)}function u(f){return e.enter("listItemMarker"),e.consume(f),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,e.check(Fn,r.interrupt?n:d,e.attempt(Vv,h,c))}function d(f){return r.containerState.initialBlankLine=!0,a++,h(f)}function c(f){return Q(f)?(e.enter("listItemPrefixWhitespace"),e.consume(f),e.exit("listItemPrefixWhitespace"),h):n(f)}function h(f){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(f)}}function Yv(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Fn,i,a);function i(s){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Z(e,t,"listItemIndent",r.containerState.size+1)(s)}function a(s){return r.containerState.furtherBlankLines||!Q(s)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(s)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(Kv,t,o)(s))}function o(s){return r.containerState._closeFlow=!0,r.interrupt=void 0,Z(e,e.attempt(Be,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s)}}function Xv(e,t,n){const r=this;return Z(e,i,"listItemIndent",r.containerState.size+1);function i(a){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(a):n(a)}}function Qv(e){e.exit(this.containerState.type)}function Zv(e,t,n){const r=this;return Z(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(a){const o=r.events[r.events.length-1];return!Q(a)&&o&&o[1].type==="listItemPrefixWhitespace"?t(a):n(a)}}const Zo={name:"setextUnderline",tokenize:tb,resolveTo:eb};function eb(e,t){let n=e.length,r,i,a;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!a&&e[n][1].type==="definition"&&(a=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",a?(e.splice(i,0,["enter",o,t]),e.splice(a+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[a][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function tb(e,t,n){const r=this;let i;return a;function a(u){let d=r.events.length,c;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){c=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||c)?(e.enter("setextHeadingLine"),i=u,o(u)):n(u)}function o(u){return e.enter("setextHeadingLineSequence"),s(u)}function s(u){return u===i?(e.consume(u),s):(e.exit("setextHeadingLineSequence"),Q(u)?Z(e,l,"lineSuffix")(u):l(u))}function l(u){return u===null||q(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const nb={tokenize:rb};function rb(e){const t=this,n=e.attempt(Fn,r,e.attempt(this.parser.constructs.flowInitial,i,Z(e,e.attempt(this.parser.constructs.flow,i,e.attempt(lv,i)),"linePrefix")));return n;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const ib={resolveAll:xu()},ab=yu("string"),ob=yu("text");function yu(e){return{tokenize:t,resolveAll:xu(e==="text"?sb:void 0)};function t(n){const r=this,i=this.parser.constructs[e],a=n.attempt(i,o,s);return o;function o(d){return u(d)?a(d):s(d)}function s(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),l}function l(d){return u(d)?(n.exit("data"),a(d)):(n.consume(d),l)}function u(d){if(d===null)return!0;const c=i[d];let h=-1;if(c)for(;++h<c.length;){const f=c[h];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function xu(e){return t;function t(n,r){let i=-1,a;for(;++i<=n.length;)a===void 0?n[i]&&n[i][1].type==="data"&&(a=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==a+2&&(n[a][1].end=n[i-1][1].end,n.splice(a+2,i-a-2),i=a+2),a=void 0);return e?e(n,r):n}}function sb(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let a=i.length,o=-1,s=0,l;for(;a--;){const u=i[a];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)s++,o--;if(o)break;o=-1}else if(u===-2)l=!0,s++;else if(u!==-1){a++;break}}if(s){const u={type:n===e.length||l||s<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-s,offset:r.end.offset-s,_index:r.start._index+a,_bufferIndex:a?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},u.start),r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}function lb(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},a=[];let o=[],s=[];const l={consume:S,enter:x,exit:E,attempt:P(w),check:P(y),interrupt:P(y,{interrupt:!0})},u={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:f,sliceSerialize:h,now:g,defineSkip:v,write:c};let d=t.tokenize.call(u,l);return t.resolveAll&&a.push(t),u;function c(A){return o=Ve(o,A),m(),o[o.length-1]!==null?[]:(L(t,0),u.events=Pr(a,u.events,u),u.events)}function h(A,j){return cb(f(A),j)}function f(A){return ub(o,A)}function g(){const{line:A,column:j,offset:I,_index:N,_bufferIndex:M}=r;return{line:A,column:j,offset:I,_index:N,_bufferIndex:M}}function v(A){i[A.line]=A.column,_()}function m(){let A;for(;r._index<o.length;){const j=o[r._index];if(typeof j=="string")for(A=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===A&&r._bufferIndex<j.length;)b(j.charCodeAt(r._bufferIndex));else b(j)}}function b(A){d=d(A)}function S(A){q(A)?(r.line++,r.column=1,r.offset+=A===-3?2:1,_()):A!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=A}function x(A,j){const I=j||{};return I.type=A,I.start=g(),u.events.push(["enter",I,u]),s.push(I),I}function E(A){const j=s.pop();return j.end=g(),u.events.push(["exit",j,u]),j}function w(A,j){L(A,j.from)}function y(A,j){j.restore()}function P(A,j){return I;function I(N,M,V){let te,de,he,k;return Array.isArray(N)?fe(N):"tokenize"in N?fe([N]):ve(N);function ve(pe){return Oe;function Oe(Ie){const Fe=Ie!==null&&pe[Ie],Ae=Ie!==null&&pe.null,$=[...Array.isArray(Fe)?Fe:Fe?[Fe]:[],...Array.isArray(Ae)?Ae:Ae?[Ae]:[]];return fe($)(Ie)}}function fe(pe){return te=pe,de=0,pe.length===0?V:C(pe[de])}function C(pe){return Oe;function Oe(Ie){return k=O(),he=pe,pe.partial||(u.currentConstruct=pe),pe.name&&u.parser.constructs.disable.null.includes(pe.name)?xe():pe.tokenize.call(j?Object.assign(Object.create(u),j):u,l,ye,xe)(Ie)}}function ye(pe){return A(he,k),M}function xe(pe){return k.restore(),++de<te.length?C(te[de]):V}}}function L(A,j){A.resolveAll&&!a.includes(A)&&a.push(A),A.resolve&&We(u.events,j,u.events.length-j,A.resolve(u.events.slice(j),u)),A.resolveTo&&(u.events=A.resolveTo(u.events,u))}function O(){const A=g(),j=u.previous,I=u.currentConstruct,N=u.events.length,M=Array.from(s);return{restore:V,from:N};function V(){r=A,u.previous=j,u.currentConstruct=I,u.events.length=N,s=M,_()}}function _(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function ub(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,a=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,a)];else{if(o=e.slice(n,i),r>-1){const s=o[0];typeof s=="string"?o[0]=s.slice(r):o.shift()}a>0&&o.push(e[i].slice(0,a))}return o}function cb(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const a=e[n];let o;if(typeof a=="string")o=a;else switch(a){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(a)}i=a===-2,r.push(o)}return r.join("")}const db={42:Be,43:Be,45:Be,48:Be,49:Be,50:Be,51:Be,52:Be,53:Be,54:Be,55:Be,56:Be,57:Be,62:hu},hb={91:fv},fb={[-2]:ai,[-1]:ai,32:ai},pb={35:yv,42:ir,45:[Zo,ir],60:kv,61:Zo,95:ir,96:Xo,126:Xo},gb={38:pu,92:fu},mb={[-5]:oi,[-4]:oi,[-3]:oi,33:Uv,38:pu,42:Ri,60:[Wm,Dv],91:qv,92:[vv,fu],93:wa,95:Ri,96:rv},vb={null:[Ri,ib]},bb={null:[42,95]},yb={null:[]},xb=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:bb,contentInitial:hb,disable:yb,document:db,flow:pb,flowInitial:fb,insideSpan:vb,string:gb,text:mb},Symbol.toStringTag,{value:"Module"}));function wb(e){const n=du([xb,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(Fm),document:i(Mm),flow:i(nb),string:i(ab),text:i(ob)};return r;function i(a){return o;function o(s){return lb(r,a,s)}}}const es=/[\0\t\n\r]/g;function Sb(){let e=1,t="",n=!0,r;return i;function i(a,o,s){const l=[];let u,d,c,h,f;for(a=t+a.toString(o),c=0,t="",n&&(a.charCodeAt(0)===65279&&c++,n=void 0);c<a.length;){if(es.lastIndex=c,u=es.exec(a),h=u&&u.index!==void 0?u.index:a.length,f=a.charCodeAt(h),!u){t=a.slice(c);break}if(f===10&&c===h&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),c<h&&(l.push(a.slice(c,h)),e+=h-c),f){case 0:{l.push(65533),e++;break}case 9:{for(d=Math.ceil(e/4)*4,l.push(-2);e++<d;)l.push(-1);break}case 10:{l.push(-4),e=1;break}default:r=!0,e=1}c=h+1}return s&&(r&&l.push(-5),t&&l.push(t),l.push(null)),l}}function kb(e){for(;!gu(e););return e}function wu(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCharCode(n)}const Cb=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Su(e){return e.replace(Cb,Eb)}function Eb(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),a=i===120||i===88;return wu(n.slice(a?2:1),a?16:10)}return xa(n)||e}const ku={}.hasOwnProperty,_b=function(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Pb(n)(kb(wb(n).document().write(Sb()(e,t,!0))))};function Pb(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Mt),autolinkProtocol:A,autolinkEmail:A,atxHeading:s(Te),blockQuote:s($),characterEscape:A,characterReference:A,codeFenced:s(ae),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:s(ae,l),codeText:s(z,l),codeTextData:A,data:A,codeFlowValue:A,definition:s(ne),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:s(Ce),hardBreakEscape:s(Bt),hardBreakTrailing:s(Bt),htmlFlow:s(Un,l),htmlFlowData:A,htmlText:s(Un,l),htmlTextData:A,image:s(_t),label:l,link:s(Mt),listItem:s(Sc),listItemValue:g,listOrdered:s(Ra,f),listUnordered:s(Ra),paragraph:s(kc),reference:xe,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:s(Te),strong:s(Cc),thematicBreak:s(_c)},exit:{atxHeading:d(),atxHeadingSequence:P,autolink:d(),autolinkEmail:Ae,autolinkProtocol:Fe,blockQuote:d(),characterEscapeValue:j,characterReferenceMarkerHexadecimal:Oe,characterReferenceMarkerNumeric:Oe,characterReferenceValue:Ie,codeFenced:d(S),codeFencedFence:b,codeFencedFenceInfo:v,codeFencedFenceMeta:m,codeFlowValue:j,codeIndented:d(x),codeText:d(te),codeTextData:j,data:j,definition:d(),definitionDestinationString:y,definitionLabelString:E,definitionTitleString:w,emphasis:d(),hardBreakEscape:d(N),hardBreakTrailing:d(N),htmlFlow:d(M),htmlFlowData:j,htmlText:d(V),htmlTextData:j,image:d(he),label:ve,labelText:k,lineEnding:I,link:d(de),listItem:d(),listOrdered:d(),listUnordered:d(),paragraph:d(),referenceString:pe,resourceDestinationString:fe,resourceTitleString:C,resource:ye,setextHeading:d(_),setextHeadingLineSequence:O,setextHeadingText:L,strong:d(),thematicBreak:d()}};Cu(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(T){let B={type:"root",children:[]};const H={stack:[B],tokenStack:[],config:t,enter:u,exit:c,buffer:l,resume:h,setData:a,getData:o},oe=[];let le=-1;for(;++le<T.length;)if(T[le][1].type==="listOrdered"||T[le][1].type==="listUnordered")if(T[le][0]==="enter")oe.push(le);else{const Qe=oe.pop();le=i(T,Qe,le)}for(le=-1;++le<T.length;){const Qe=t[T[le][0]];ku.call(Qe,T[le][1].type)&&Qe[T[le][1].type].call(Object.assign({sliceSerialize:T[le][2].sliceSerialize},H),T[le][1])}if(H.tokenStack.length>0){const Qe=H.tokenStack[H.tokenStack.length-1];(Qe[1]||ts).call(H,void 0,Qe[0])}for(B.position={start:pt(T.length>0?T[0][1].start:{line:1,column:1,offset:0}),end:pt(T.length>0?T[T.length-2][1].end:{line:1,column:1,offset:0})},le=-1;++le<t.transforms.length;)B=t.transforms[le](B)||B;return B}function i(T,B,H){let oe=B-1,le=-1,Qe=!1,ft,st,hn,fn;for(;++oe<=H;){const be=T[oe];if(be[1].type==="listUnordered"||be[1].type==="listOrdered"||be[1].type==="blockQuote"?(be[0]==="enter"?le++:le--,fn=void 0):be[1].type==="lineEndingBlank"?be[0]==="enter"&&(ft&&!fn&&!le&&!hn&&(hn=oe),fn=void 0):be[1].type==="linePrefix"||be[1].type==="listItemValue"||be[1].type==="listItemMarker"||be[1].type==="listItemPrefix"||be[1].type==="listItemPrefixWhitespace"||(fn=void 0),!le&&be[0]==="enter"&&be[1].type==="listItemPrefix"||le===-1&&be[0]==="exit"&&(be[1].type==="listUnordered"||be[1].type==="listOrdered")){if(ft){let jr=oe;for(st=void 0;jr--;){const lt=T[jr];if(lt[1].type==="lineEnding"||lt[1].type==="lineEndingBlank"){if(lt[0]==="exit")continue;st&&(T[st][1].type="lineEndingBlank",Qe=!0),lt[1].type="lineEnding",st=jr}else if(!(lt[1].type==="linePrefix"||lt[1].type==="blockQuotePrefix"||lt[1].type==="blockQuotePrefixWhitespace"||lt[1].type==="blockQuoteMarker"||lt[1].type==="listItemIndent"))break}hn&&(!st||hn<st)&&(ft._spread=!0),ft.end=Object.assign({},st?T[st][1].start:be[1].end),T.splice(st||oe,0,["exit",ft,be[2]]),oe++,H++}be[1].type==="listItemPrefix"&&(ft={type:"listItem",_spread:!1,start:Object.assign({},be[1].start),end:void 0},T.splice(oe,0,["enter",ft,be[2]]),oe++,H++,hn=void 0,fn=!0)}}return T[B][1]._spread=Qe,H}function a(T,B){n[T]=B}function o(T){return n[T]}function s(T,B){return H;function H(oe){u.call(this,T(oe),oe),B&&B.call(this,oe)}}function l(){this.stack.push({type:"fragment",children:[]})}function u(T,B,H){return this.stack[this.stack.length-1].children.push(T),this.stack.push(T),this.tokenStack.push([B,H]),T.position={start:pt(B.start)},T}function d(T){return B;function B(H){T&&T.call(this,H),c.call(this,H)}}function c(T,B){const H=this.stack.pop(),oe=this.tokenStack.pop();if(oe)oe[0].type!==T.type&&(B?B.call(this,T,oe[0]):(oe[1]||ts).call(this,T,oe[0]));else throw new Error("Cannot close `"+T.type+"` ("+Sn({start:T.start,end:T.end})+"): its not open");return H.position.end=pt(T.end),H}function h(){return Am(this.stack.pop())}function f(){a("expectingFirstListItemValue",!0)}function g(T){if(o("expectingFirstListItemValue")){const B=this.stack[this.stack.length-2];B.start=Number.parseInt(this.sliceSerialize(T),10),a("expectingFirstListItemValue")}}function v(){const T=this.resume(),B=this.stack[this.stack.length-1];B.lang=T}function m(){const T=this.resume(),B=this.stack[this.stack.length-1];B.meta=T}function b(){o("flowCodeInside")||(this.buffer(),a("flowCodeInside",!0))}function S(){const T=this.resume(),B=this.stack[this.stack.length-1];B.value=T.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),a("flowCodeInside")}function x(){const T=this.resume(),B=this.stack[this.stack.length-1];B.value=T.replace(/(\r?\n|\r)$/g,"")}function E(T){const B=this.resume(),H=this.stack[this.stack.length-1];H.label=B,H.identifier=rt(this.sliceSerialize(T)).toLowerCase()}function w(){const T=this.resume(),B=this.stack[this.stack.length-1];B.title=T}function y(){const T=this.resume(),B=this.stack[this.stack.length-1];B.url=T}function P(T){const B=this.stack[this.stack.length-1];if(!B.depth){const H=this.sliceSerialize(T).length;B.depth=H}}function L(){a("setextHeadingSlurpLineEnding",!0)}function O(T){const B=this.stack[this.stack.length-1];B.depth=this.sliceSerialize(T).charCodeAt(0)===61?1:2}function _(){a("setextHeadingSlurpLineEnding")}function A(T){const B=this.stack[this.stack.length-1];let H=B.children[B.children.length-1];(!H||H.type!=="text")&&(H=Ec(),H.position={start:pt(T.start)},B.children.push(H)),this.stack.push(H)}function j(T){const B=this.stack.pop();B.value+=this.sliceSerialize(T),B.position.end=pt(T.end)}function I(T){const B=this.stack[this.stack.length-1];if(o("atHardBreak")){const H=B.children[B.children.length-1];H.position.end=pt(T.end),a("atHardBreak");return}!o("setextHeadingSlurpLineEnding")&&t.canContainEols.includes(B.type)&&(A.call(this,T),j.call(this,T))}function N(){a("atHardBreak",!0)}function M(){const T=this.resume(),B=this.stack[this.stack.length-1];B.value=T}function V(){const T=this.resume(),B=this.stack[this.stack.length-1];B.value=T}function te(){const T=this.resume(),B=this.stack[this.stack.length-1];B.value=T}function de(){const T=this.stack[this.stack.length-1];if(o("inReference")){const B=o("referenceType")||"shortcut";T.type+="Reference",T.referenceType=B,delete T.url,delete T.title}else delete T.identifier,delete T.label;a("referenceType")}function he(){const T=this.stack[this.stack.length-1];if(o("inReference")){const B=o("referenceType")||"shortcut";T.type+="Reference",T.referenceType=B,delete T.url,delete T.title}else delete T.identifier,delete T.label;a("referenceType")}function k(T){const B=this.sliceSerialize(T),H=this.stack[this.stack.length-2];H.label=Su(B),H.identifier=rt(B).toLowerCase()}function ve(){const T=this.stack[this.stack.length-1],B=this.resume(),H=this.stack[this.stack.length-1];if(a("inReference",!0),H.type==="link"){const oe=T.children;H.children=oe}else H.alt=B}function fe(){const T=this.resume(),B=this.stack[this.stack.length-1];B.url=T}function C(){const T=this.resume(),B=this.stack[this.stack.length-1];B.title=T}function ye(){a("inReference")}function xe(){a("referenceType","collapsed")}function pe(T){const B=this.resume(),H=this.stack[this.stack.length-1];H.label=B,H.identifier=rt(this.sliceSerialize(T)).toLowerCase(),a("referenceType","full")}function Oe(T){a("characterReferenceType",T.type)}function Ie(T){const B=this.sliceSerialize(T),H=o("characterReferenceType");let oe;H?(oe=wu(B,H==="characterReferenceMarkerNumeric"?10:16),a("characterReferenceType")):oe=xa(B);const le=this.stack.pop();le.value+=oe,le.position.end=pt(T.end)}function Fe(T){j.call(this,T);const B=this.stack[this.stack.length-1];B.url=this.sliceSerialize(T)}function Ae(T){j.call(this,T);const B=this.stack[this.stack.length-1];B.url="mailto:"+this.sliceSerialize(T)}function $(){return{type:"blockquote",children:[]}}function ae(){return{type:"code",lang:null,meta:null,value:""}}function z(){return{type:"inlineCode",value:""}}function ne(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ce(){return{type:"emphasis",children:[]}}function Te(){return{type:"heading",depth:void 0,children:[]}}function Bt(){return{type:"break"}}function Un(){return{type:"html",value:""}}function _t(){return{type:"image",title:null,url:"",alt:null}}function Mt(){return{type:"link",title:null,url:"",children:[]}}function Ra(T){return{type:"list",ordered:T.type==="listOrdered",start:null,spread:T._spread,children:[]}}function Sc(T){return{type:"listItem",spread:T._spread,checked:null,children:[]}}function kc(){return{type:"paragraph",children:[]}}function Cc(){return{type:"strong",children:[]}}function Ec(){return{type:"text",value:""}}function _c(){return{type:"thematicBreak"}}}function pt(e){return{line:e.line,column:e.column,offset:e.offset}}function Cu(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Cu(e,r):Ib(e,r)}}function Ib(e,t){let n;for(n in t)if(ku.call(t,n)){if(n==="canContainEols"){const r=t[n];r&&e[n].push(...r)}else if(n==="transforms"){const r=t[n];r&&e[n].push(...r)}else if(n==="enter"||n==="exit"){const r=t[n];r&&Object.assign(e[n],r)}}}function ts(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Sn({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Sn({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Sn({start:t.start,end:t.end})+") is still open")}function Ab(e){Object.assign(this,{Parser:n=>{const r=this.data("settings");return _b(n,Object.assign({},r,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}function Db(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function Tb(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function jb(e,t){const n=t.value?t.value+`
`:"",r=t.lang?t.lang.match(/^[^ \t]+(?=[ \t]|$)/):null,i={};r&&(i.className=["language-"+r]);let a={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return t.meta&&(a.data={meta:t.meta}),e.patch(t,a),a=e.applyData(t,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(t,a),a}function Ob(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Nb(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function un(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const a=e.charCodeAt(n);let o="";if(a===37&&je(e.charCodeAt(n+1))&&je(e.charCodeAt(n+2)))i=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(o=String.fromCharCode(a));else if(a>55295&&a<57344){const s=e.charCodeAt(n+1);a<56320&&s>56319&&s<57344?(o=String.fromCharCode(a,s),i=1):o=""}else o=String.fromCharCode(a);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function Eu(e,t){const n=String(t.identifier).toUpperCase(),r=un(n.toLowerCase()),i=e.footnoteOrder.indexOf(n);let a;i===-1?(e.footnoteOrder.push(n),e.footnoteCounts[n]=1,a=e.footnoteOrder.length):(e.footnoteCounts[n]++,a=i+1);const o=e.footnoteCounts[n],s={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fn-"+r,id:e.clobberPrefix+"fnref-"+r+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,s);const l={type:"element",tagName:"sup",properties:{},children:[s]};return e.patch(t,l),e.applyData(t,l)}function Rb(e,t){const n=e.footnoteById;let r=1;for(;r in n;)r++;const i=String(r);return n[i]={type:"footnoteDefinition",identifier:i,children:[{type:"paragraph",children:t.children}],position:t.position},Eu(e,{type:"footnoteReference",identifier:i,position:t.position})}function Lb(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Fb(e,t){if(e.dangerous){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}return null}function _u(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return{type:"text",value:"!["+t.alt+r};const i=e.all(t),a=i[0];a&&a.type==="text"?a.value="["+a.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function Bb(e,t){const n=e.definition(t.identifier);if(!n)return _u(e,t);const r={src:un(n.url||""),alt:t.alt};n.title!==null&&n.title!==void 0&&(r.title=n.title);const i={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,i),e.applyData(t,i)}function Mb(e,t){const n={src:un(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function $b(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function Ub(e,t){const n=e.definition(t.identifier);if(!n)return _u(e,t);const r={href:un(n.url||"")};n.title!==null&&n.title!==void 0&&(r.title=n.title);const i={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function zb(e,t){const n={href:un(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function qb(e,t,n){const r=e.all(t),i=n?Wb(n):Pu(t),a={},o=[];if(typeof t.checked=="boolean"){const d=r[0];let c;d&&d.type==="element"&&d.tagName==="p"?c=d:(c={type:"element",tagName:"p",properties:{},children:[]},r.unshift(c)),c.children.length>0&&c.children.unshift({type:"text",value:" "}),c.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let s=-1;for(;++s<r.length;){const d=r[s];(i||s!==0||d.type!=="element"||d.tagName!=="p")&&o.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!i?o.push(...d.children):o.push(d)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:a,children:o};return e.patch(t,u),e.applyData(t,u)}function Wb(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Pu(n[r])}return t}function Pu(e){const t=e.spread;return t??e.children.length>1}function Hb(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,a),e.applyData(t,a)}function Gb(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Vb(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function Kb(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Sa=Iu("start"),ka=Iu("end");function Jb(e){return{start:Sa(e),end:ka(e)}}function Iu(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};return{line:r.line||null,column:r.column||null,offset:r.offset>-1?r.offset:null}}}function Yb(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},s=Sa(t.children[1]),l=ka(t.children[t.children.length-1]);s.line&&l.line&&(o.position={start:s,end:l}),i.push(o)}const a={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,a),e.applyData(t,a)}function Xb(e,t,n){const r=n?n.children:void 0,a=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,s=o?o.length:t.children.length;let l=-1;const u=[];for(;++l<s;){const c=t.children[l],h={},f=o?o[l]:void 0;f&&(h.align=f);let g={type:"element",tagName:a,properties:h,children:[]};c&&(g.children=e.all(c),e.patch(c,g),g=e.applyData(t,g)),u.push(g)}const d={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,d),e.applyData(t,d)}function Qb(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const ns=9,rs=32;function Zb(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const a=[];for(;r;)a.push(is(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return a.push(is(t.slice(i),i>0,!1)),a.join("")}function is(e,t,n){let r=0,i=e.length;if(t){let a=e.codePointAt(r);for(;a===ns||a===rs;)r++,a=e.codePointAt(r)}if(n){let a=e.codePointAt(i-1);for(;a===ns||a===rs;)i--,a=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function ey(e,t){const n={type:"text",value:Zb(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function ty(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const ny={blockquote:Db,break:Tb,code:jb,delete:Ob,emphasis:Nb,footnoteReference:Eu,footnote:Rb,heading:Lb,html:Fb,imageReference:Bb,image:Mb,inlineCode:$b,linkReference:Ub,link:zb,listItem:qb,list:Hb,paragraph:Gb,root:Vb,strong:Kb,table:Yb,tableCell:Qb,tableRow:Xb,text:ey,thematicBreak:ty,toml:Vn,yaml:Vn,definition:Vn,footnoteDefinition:Vn};function Vn(){return null}const Ca=(function(e){if(e==null)return oy;if(typeof e=="string")return ay(e);if(typeof e=="object")return Array.isArray(e)?ry(e):iy(e);if(typeof e=="function")return Ir(e);throw new Error("Expected function, string, or object as test")});function ry(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Ca(e[n]);return Ir(r);function r(...i){let a=-1;for(;++a<t.length;)if(t[a].call(this,...i))return!0;return!1}}function iy(e){return Ir(t);function t(n){let r;for(r in e)if(n[r]!==e[r])return!1;return!0}}function ay(e){return Ir(t);function t(n){return n&&n.type===e}}function Ir(e){return t;function t(n,...r){return!!(n&&typeof n=="object"&&"type"in n&&e.call(this,n,...r))}}function oy(){return!0}const sy=!0,as=!1,ly="skip",Au=(function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null);const i=Ca(t),a=r?-1:1;o(e,void 0,[])();function o(s,l,u){const d=s&&typeof s=="object"?s:{};if(typeof d.type=="string"){const h=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(c,"name",{value:"node ("+(s.type+(h?"<"+h+">":""))+")"})}return c;function c(){let h=[],f,g,v;if((!t||i(s,l,u[u.length-1]||null))&&(h=uy(n(s,u)),h[0]===as))return h;if(s.children&&h[0]!==ly)for(g=(r?s.children.length:-1)+a,v=u.concat(s);g>-1&&g<s.children.length;){if(f=o(s.children[g],g,v)(),f[0]===as)return f;g=typeof f[1]=="number"?f[1]:g+a}return h}}});function uy(e){return Array.isArray(e)?e:typeof e=="number"?[sy,e]:[e]}const Ea=(function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null),Au(e,t,i,r);function i(a,o){const s=o[o.length-1];return n(a,s?s.children.indexOf(a):null,s)}});function cy(e){return!e||!e.position||!e.position.start||!e.position.start.line||!e.position.start.column||!e.position.end||!e.position.end.line||!e.position.end.column}const os={}.hasOwnProperty;function dy(e){const t=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return Ea(e,"definition",r=>{const i=ss(r.identifier);i&&!os.call(t,i)&&(t[i]=r)}),n;function n(r){const i=ss(r);return i&&os.call(t,i)?t[i]:null}}function ss(e){return String(e||"").toUpperCase()}const mr={}.hasOwnProperty;function hy(e,t){const n=t||{},r=n.allowDangerousHtml||!1,i={};return o.dangerous=r,o.clobberPrefix=n.clobberPrefix===void 0||n.clobberPrefix===null?"user-content-":n.clobberPrefix,o.footnoteLabel=n.footnoteLabel||"Footnotes",o.footnoteLabelTagName=n.footnoteLabelTagName||"h2",o.footnoteLabelProperties=n.footnoteLabelProperties||{className:["sr-only"]},o.footnoteBackLabel=n.footnoteBackLabel||"Back to content",o.unknownHandler=n.unknownHandler,o.passThrough=n.passThrough,o.handlers={...ny,...n.handlers},o.definition=dy(e),o.footnoteById=i,o.footnoteOrder=[],o.footnoteCounts={},o.patch=fy,o.applyData=py,o.one=s,o.all=l,o.wrap=my,o.augment=a,Ea(e,"footnoteDefinition",u=>{const d=String(u.identifier).toUpperCase();mr.call(i,d)||(i[d]=u)}),o;function a(u,d){if(u&&"data"in u&&u.data){const c=u.data;c.hName&&(d.type!=="element"&&(d={type:"element",tagName:"",properties:{},children:[]}),d.tagName=c.hName),d.type==="element"&&c.hProperties&&(d.properties={...d.properties,...c.hProperties}),"children"in d&&d.children&&c.hChildren&&(d.children=c.hChildren)}if(u){const c="type"in u?u:{position:u};cy(c)||(d.position={start:Sa(c),end:ka(c)})}return d}function o(u,d,c,h){return Array.isArray(c)&&(h=c,c={}),a(u,{type:"element",tagName:d,properties:c||{},children:h||[]})}function s(u,d){return Du(o,u,d)}function l(u){return _a(o,u)}}function fy(e,t){e.position&&(t.position=Jb(e))}function py(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,a=e.data.hProperties;typeof r=="string"&&(n.type==="element"?n.tagName=r:n={type:"element",tagName:r,properties:{},children:[]}),n.type==="element"&&a&&(n.properties={...n.properties,...a}),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Du(e,t,n){const r=t&&t.type;if(!r)throw new Error("Expected node, got `"+t+"`");return mr.call(e.handlers,r)?e.handlers[r](e,t,n):e.passThrough&&e.passThrough.includes(r)?"children"in t?{...t,children:_a(e,t)}:t:e.unknownHandler?e.unknownHandler(e,t,n):gy(e,t)}function _a(e,t){const n=[];if("children"in t){const r=t.children;let i=-1;for(;++i<r.length;){const a=Du(e,r[i],t);if(a){if(i&&r[i-1].type==="break"&&(!Array.isArray(a)&&a.type==="text"&&(a.value=a.value.replace(/^\s+/,"")),!Array.isArray(a)&&a.type==="element")){const o=a.children[0];o&&o.type==="text"&&(o.value=o.value.replace(/^\s+/,""))}Array.isArray(a)?n.push(...a):n.push(a)}}}return n}function gy(e,t){const n=t.data||{},r="value"in t&&!(mr.call(n,"hProperties")||mr.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:_a(e,t)};return e.patch(t,r),e.applyData(t,r)}function my(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function vy(e){const t=[];let n=-1;for(;++n<e.footnoteOrder.length;){const r=e.footnoteById[e.footnoteOrder[n]];if(!r)continue;const i=e.all(r),a=String(r.identifier).toUpperCase(),o=un(a.toLowerCase());let s=0;const l=[];for(;++s<=e.footnoteCounts[a];){const c={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fnref-"+o+(s>1?"-"+s:""),dataFootnoteBackref:!0,className:["data-footnote-backref"],ariaLabel:e.footnoteBackLabel},children:[{type:"text",value:""}]};s>1&&c.children.push({type:"element",tagName:"sup",children:[{type:"text",value:String(s)}]}),l.length>0&&l.push({type:"text",value:" "}),l.push(c)}const u=i[i.length-1];if(u&&u.type==="element"&&u.tagName==="p"){const c=u.children[u.children.length-1];c&&c.type==="text"?c.value+=" ":u.children.push({type:"text",value:" "}),u.children.push(...l)}else i.push(...l);const d={type:"element",tagName:"li",properties:{id:e.clobberPrefix+"fn-"+o},children:e.wrap(i,!0)};e.patch(r,d),t.push(d)}if(t.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:e.footnoteLabelTagName,properties:{...JSON.parse(JSON.stringify(e.footnoteLabelProperties)),id:"footnote-label"},children:[{type:"text",value:e.footnoteLabel}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(t,!0)},{type:"text",value:`
`}]}}function Tu(e,t){const n=hy(e,t),r=n.one(e,null),i=vy(n);return i&&r.children.push({type:"text",value:`
`},i),Array.isArray(r)?{type:"root",children:r}:r}const by=(function(e,t){return e&&"run"in e?yy(e,t):xy(e||t)});function yy(e,t){return(n,r,i)=>{e.run(Tu(n,t),r,a=>{i(a)})}}function xy(e){return t=>Tu(t,e)}class Bn{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}}Bn.prototype.property={};Bn.prototype.normal={};Bn.prototype.space=null;function ju(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new Bn(n,r,t)}function Li(e){return e.toLowerCase()}class Xe{constructor(t,n){this.property=t,this.attribute=n}}Xe.prototype.space=null;Xe.prototype.boolean=!1;Xe.prototype.booleanish=!1;Xe.prototype.overloadedBoolean=!1;Xe.prototype.number=!1;Xe.prototype.commaSeparated=!1;Xe.prototype.spaceSeparated=!1;Xe.prototype.commaOrSpaceSeparated=!1;Xe.prototype.mustUseProperty=!1;Xe.prototype.defined=!1;let wy=0;const J=Lt(),we=Lt(),Ou=Lt(),R=Lt(),me=Lt(),en=Lt(),$e=Lt();function Lt(){return 2**++wy}const Fi=Object.freeze(Object.defineProperty({__proto__:null,boolean:J,booleanish:we,commaOrSpaceSeparated:$e,commaSeparated:en,number:R,overloadedBoolean:Ou,spaceSeparated:me},Symbol.toStringTag,{value:"Module"})),si=Object.keys(Fi);class Pa extends Xe{constructor(t,n,r,i){let a=-1;if(super(t,n),ls(this,"space",i),typeof r=="number")for(;++a<si.length;){const o=si[a];ls(this,si[a],(r&Fi[o])===Fi[o])}}}Pa.prototype.defined=!0;function ls(e,t,n){n&&(e[t]=n)}const Sy={}.hasOwnProperty;function cn(e){const t={},n={};let r;for(r in e.properties)if(Sy.call(e.properties,r)){const i=e.properties[r],a=new Pa(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),t[r]=a,n[Li(r)]=r,n[Li(a.attribute)]=r}return new Bn(t,n,e.space)}const Nu=cn({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Ru=cn({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Lu(e,t){return t in e?e[t]:t}function Fu(e,t){return Lu(e,t.toLowerCase())}const Bu=cn({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Fu,properties:{xmlns:null,xmlnsXLink:null}}),Mu=cn({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:we,ariaAutoComplete:null,ariaBusy:we,ariaChecked:we,ariaColCount:R,ariaColIndex:R,ariaColSpan:R,ariaControls:me,ariaCurrent:null,ariaDescribedBy:me,ariaDetails:null,ariaDisabled:we,ariaDropEffect:me,ariaErrorMessage:null,ariaExpanded:we,ariaFlowTo:me,ariaGrabbed:we,ariaHasPopup:null,ariaHidden:we,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:me,ariaLevel:R,ariaLive:null,ariaModal:we,ariaMultiLine:we,ariaMultiSelectable:we,ariaOrientation:null,ariaOwns:me,ariaPlaceholder:null,ariaPosInSet:R,ariaPressed:we,ariaReadOnly:we,ariaRelevant:null,ariaRequired:we,ariaRoleDescription:me,ariaRowCount:R,ariaRowIndex:R,ariaRowSpan:R,ariaSelected:we,ariaSetSize:R,ariaSort:null,ariaValueMax:R,ariaValueMin:R,ariaValueNow:R,ariaValueText:null,role:null}}),ky=cn({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Fu,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:en,acceptCharset:me,accessKey:me,action:null,allow:null,allowFullScreen:J,allowPaymentRequest:J,allowUserMedia:J,alt:null,as:null,async:J,autoCapitalize:null,autoComplete:me,autoFocus:J,autoPlay:J,blocking:me,capture:null,charSet:null,checked:J,cite:null,className:me,cols:R,colSpan:null,content:null,contentEditable:we,controls:J,controlsList:me,coords:R|en,crossOrigin:null,data:null,dateTime:null,decoding:null,default:J,defer:J,dir:null,dirName:null,disabled:J,download:Ou,draggable:we,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:J,formTarget:null,headers:me,height:R,hidden:J,high:R,href:null,hrefLang:null,htmlFor:me,httpEquiv:me,id:null,imageSizes:null,imageSrcSet:null,inert:J,inputMode:null,integrity:null,is:null,isMap:J,itemId:null,itemProp:me,itemRef:me,itemScope:J,itemType:me,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:J,low:R,manifest:null,max:null,maxLength:R,media:null,method:null,min:null,minLength:R,multiple:J,muted:J,name:null,nonce:null,noModule:J,noValidate:J,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:J,optimum:R,pattern:null,ping:me,placeholder:null,playsInline:J,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:J,referrerPolicy:null,rel:me,required:J,reversed:J,rows:R,rowSpan:R,sandbox:me,scope:null,scoped:J,seamless:J,selected:J,shadowRootClonable:J,shadowRootDelegatesFocus:J,shadowRootMode:null,shape:null,size:R,sizes:null,slot:null,span:R,spellCheck:we,src:null,srcDoc:null,srcLang:null,srcSet:null,start:R,step:null,style:null,tabIndex:R,target:null,title:null,translate:null,type:null,typeMustMatch:J,useMap:null,value:we,width:R,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:me,axis:null,background:null,bgColor:null,border:R,borderColor:null,bottomMargin:R,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:J,declare:J,event:null,face:null,frame:null,frameBorder:null,hSpace:R,leftMargin:R,link:null,longDesc:null,lowSrc:null,marginHeight:R,marginWidth:R,noResize:J,noHref:J,noShade:J,noWrap:J,object:null,profile:null,prompt:null,rev:null,rightMargin:R,rules:null,scheme:null,scrolling:we,standby:null,summary:null,text:null,topMargin:R,valueType:null,version:null,vAlign:null,vLink:null,vSpace:R,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:J,disableRemotePlayback:J,prefix:null,property:null,results:R,security:null,unselectable:null}}),Cy=cn({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Lu,properties:{about:$e,accentHeight:R,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:R,amplitude:R,arabicForm:null,ascent:R,attributeName:null,attributeType:null,azimuth:R,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:R,by:null,calcMode:null,capHeight:R,className:me,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:R,diffuseConstant:R,direction:null,display:null,dur:null,divisor:R,dominantBaseline:null,download:J,dx:null,dy:null,edgeMode:null,editable:null,elevation:R,enableBackground:null,end:null,event:null,exponent:R,externalResourcesRequired:null,fill:null,fillOpacity:R,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:en,g2:en,glyphName:en,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:R,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:R,horizOriginX:R,horizOriginY:R,id:null,ideographic:R,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:R,k:R,k1:R,k2:R,k3:R,k4:R,kernelMatrix:$e,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:R,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:R,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:R,overlineThickness:R,paintOrder:null,panose1:null,path:null,pathLength:R,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:me,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:R,pointsAtY:R,pointsAtZ:R,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:$e,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:$e,rev:$e,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:$e,requiredFeatures:$e,requiredFonts:$e,requiredFormats:$e,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:R,specularExponent:R,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:R,strikethroughThickness:R,string:null,stroke:null,strokeDashArray:$e,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:R,strokeOpacity:R,strokeWidth:null,style:null,surfaceScale:R,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:$e,tabIndex:R,tableValues:null,target:null,targetX:R,targetY:R,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:$e,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:R,underlineThickness:R,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:R,values:null,vAlphabetic:R,vMathematical:R,vectorEffect:null,vHanging:R,vIdeographic:R,version:null,vertAdvY:R,vertOriginX:R,vertOriginY:R,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:R,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),Ey=/^data[-\w.:]+$/i,us=/-[a-z]/g,_y=/[A-Z]/g;function Py(e,t){const n=Li(t);let r=t,i=Xe;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Ey.test(t)){if(t.charAt(4)==="-"){const a=t.slice(5).replace(us,Ay);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=t.slice(4);if(!us.test(a)){let o=a.replace(_y,Iy);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=Pa}return new i(r,t)}function Iy(e){return"-"+e.toLowerCase()}function Ay(e){return e.charAt(1).toUpperCase()}const cs={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Dy=ju([Ru,Nu,Bu,Mu,ky],"html"),Ty=ju([Ru,Nu,Bu,Mu,Cy],"svg");function jy(e){if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return t=>{Ea(t,"element",(n,r,i)=>{const a=i;let o;if(e.allowedElements?o=!e.allowedElements.includes(n.tagName):e.disallowedElements&&(o=e.disallowedElements.includes(n.tagName)),!o&&e.allowElement&&typeof r=="number"&&(o=!e.allowElement(n,r,a)),o&&typeof r=="number")return e.unwrapDisallowed&&n.children?a.children.splice(r,1,...n.children):a.children.splice(r,1),r})}}var li={exports:{}},ie={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ds;function Oy(){if(ds)return ie;ds=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),s=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),c=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.offscreen"),g;g=Symbol.for("react.module.reference");function v(m){if(typeof m=="object"&&m!==null){var b=m.$$typeof;switch(b){case e:switch(m=m.type,m){case n:case i:case r:case u:case d:return m;default:switch(m=m&&m.$$typeof,m){case s:case o:case l:case h:case c:case a:return m;default:return b}}case t:return b}}}return ie.ContextConsumer=o,ie.ContextProvider=a,ie.Element=e,ie.ForwardRef=l,ie.Fragment=n,ie.Lazy=h,ie.Memo=c,ie.Portal=t,ie.Profiler=i,ie.StrictMode=r,ie.Suspense=u,ie.SuspenseList=d,ie.isAsyncMode=function(){return!1},ie.isConcurrentMode=function(){return!1},ie.isContextConsumer=function(m){return v(m)===o},ie.isContextProvider=function(m){return v(m)===a},ie.isElement=function(m){return typeof m=="object"&&m!==null&&m.$$typeof===e},ie.isForwardRef=function(m){return v(m)===l},ie.isFragment=function(m){return v(m)===n},ie.isLazy=function(m){return v(m)===h},ie.isMemo=function(m){return v(m)===c},ie.isPortal=function(m){return v(m)===t},ie.isProfiler=function(m){return v(m)===i},ie.isStrictMode=function(m){return v(m)===r},ie.isSuspense=function(m){return v(m)===u},ie.isSuspenseList=function(m){return v(m)===d},ie.isValidElementType=function(m){return typeof m=="string"||typeof m=="function"||m===n||m===i||m===r||m===u||m===d||m===f||typeof m=="object"&&m!==null&&(m.$$typeof===h||m.$$typeof===c||m.$$typeof===a||m.$$typeof===o||m.$$typeof===l||m.$$typeof===g||m.getModuleId!==void 0)},ie.typeOf=v,ie}var hs;function Ny(){return hs||(hs=1,li.exports=Oy()),li.exports}var Ry=Ny();const Ly=St(Ry);function Fy(e){const t=e&&typeof e=="object"&&e.type==="text"?e.value||"":e;return typeof t=="string"&&t.replace(/[ \t\n\f\r]/g,"")===""}function By(e){return e.join(" ").trim()}function My(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}var Kn={exports:{}},ui,fs;function $y(){if(fs)return ui;fs=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,s=/^\s+|\s+$/g,l=`
`,u="/",d="*",c="",h="comment",f="declaration";ui=function(v,m){if(typeof v!="string")throw new TypeError("First argument must be a string");if(!v)return[];m=m||{};var b=1,S=1;function x(I){var N=I.match(t);N&&(b+=N.length);var M=I.lastIndexOf(l);S=~M?I.length-M:S+I.length}function E(){var I={line:b,column:S};return function(N){return N.position=new w(I),L(),N}}function w(I){this.start=I,this.end={line:b,column:S},this.source=m.source}w.prototype.content=v;function y(I){var N=new Error(m.source+":"+b+":"+S+": "+I);if(N.reason=I,N.filename=m.source,N.line=b,N.column=S,N.source=v,!m.silent)throw N}function P(I){var N=I.exec(v);if(N){var M=N[0];return x(M),v=v.slice(M.length),N}}function L(){P(n)}function O(I){var N;for(I=I||[];N=_();)N!==!1&&I.push(N);return I}function _(){var I=E();if(!(u!=v.charAt(0)||d!=v.charAt(1))){for(var N=2;c!=v.charAt(N)&&(d!=v.charAt(N)||u!=v.charAt(N+1));)++N;if(N+=2,c===v.charAt(N-1))return y("End of comment missing");var M=v.slice(2,N-2);return S+=2,x(M),v=v.slice(N),S+=2,I({type:h,comment:M})}}function A(){var I=E(),N=P(r);if(N){if(_(),!P(i))return y("property missing ':'");var M=P(a),V=I({type:f,property:g(N[0].replace(e,c)),value:M?g(M[0].replace(e,c)):c});return P(o),V}}function j(){var I=[];O(I);for(var N;N=A();)N!==!1&&(I.push(N),O(I));return I}return L(),j()};function g(v){return v?v.replace(s,c):c}return ui}var ps;function Uy(){if(ps)return Kn.exports;ps=1;var e=$y();function t(n,r){var i=null;if(!n||typeof n!="string")return i;for(var a,o=e(n),s=typeof r=="function",l,u,d=0,c=o.length;d<c;d++)a=o[d],l=a.property,u=a.value,s?r(l,u,a):u&&(i||(i={}),i[l]=u);return i}return Kn.exports=t,Kn.exports.default=t,Kn.exports}var zy=Uy();const qy=St(zy),Bi={}.hasOwnProperty,Wy=new Set(["table","thead","tbody","tfoot","tr"]);function $u(e,t){const n=[];let r=-1,i;for(;++r<t.children.length;)i=t.children[r],i.type==="element"?n.push(Hy(e,i,r,t)):i.type==="text"?(t.type!=="element"||!Wy.has(t.tagName)||!Fy(i))&&n.push(i.value):i.type==="raw"&&!e.options.skipHtml&&n.push(i.value);return n}function Hy(e,t,n,r){const i=e.options,a=i.transformLinkUri===void 0?om:i.transformLinkUri,o=e.schema,s=t.tagName,l={};let u=o,d;if(o.space==="html"&&s==="svg"&&(u=Ty,e.schema=u),t.properties)for(d in t.properties)Bi.call(t.properties,d)&&Vy(l,d,t.properties[d],e);(s==="ol"||s==="ul")&&e.listDepth++;const c=$u(e,t);(s==="ol"||s==="ul")&&e.listDepth--,e.schema=o;const h=t.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},f=i.components&&Bi.call(i.components,s)?i.components[s]:s,g=typeof f=="string"||f===K.Fragment;if(!Ly.isValidElementType(f))throw new TypeError(`Component for name \`${s}\` not defined or is not renderable`);if(l.key=n,s==="a"&&i.linkTarget&&(l.target=typeof i.linkTarget=="function"?i.linkTarget(String(l.href||""),t.children,typeof l.title=="string"?l.title:null):i.linkTarget),s==="a"&&a&&(l.href=a(String(l.href||""),t.children,typeof l.title=="string"?l.title:null)),!g&&s==="code"&&r.type==="element"&&r.tagName!=="pre"&&(l.inline=!0),!g&&(s==="h1"||s==="h2"||s==="h3"||s==="h4"||s==="h5"||s==="h6")&&(l.level=Number.parseInt(s.charAt(1),10)),s==="img"&&i.transformImageUri&&(l.src=i.transformImageUri(String(l.src||""),String(l.alt||""),typeof l.title=="string"?l.title:null)),!g&&s==="li"&&r.type==="element"){const v=Gy(t);l.checked=v&&v.properties?!!v.properties.checked:null,l.index=ci(r,t),l.ordered=r.tagName==="ol"}return!g&&(s==="ol"||s==="ul")&&(l.ordered=s==="ol",l.depth=e.listDepth),(s==="td"||s==="th")&&(l.align&&(l.style||(l.style={}),l.style.textAlign=l.align,delete l.align),g||(l.isHeader=s==="th")),!g&&s==="tr"&&r.type==="element"&&(l.isHeader=r.tagName==="thead"),i.sourcePos&&(l["data-sourcepos"]=Yy(h)),!g&&i.rawSourcePos&&(l.sourcePosition=t.position),!g&&i.includeElementIndex&&(l.index=ci(r,t),l.siblingCount=ci(r)),g||(l.node=t),c.length>0?K.createElement(f,l,c):K.createElement(f,l)}function Gy(e){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if(n.type==="element"&&n.tagName==="input")return n}return null}function ci(e,t){let n=-1,r=0;for(;++n<e.children.length&&e.children[n]!==t;)e.children[n].type==="element"&&r++;return r}function Vy(e,t,n,r){const i=Py(r.schema,t);let a=n;a==null||a!==a||(Array.isArray(a)&&(a=i.commaSeparated?My(a):By(a)),i.property==="style"&&typeof a=="string"&&(a=Ky(a)),i.space&&i.property?e[Bi.call(cs,i.property)?cs[i.property]:i.property]=a:i.attribute&&(e[i.attribute]=a))}function Ky(e){const t={};try{qy(e,n)}catch{}return t;function n(r,i){const a=r.slice(0,4)==="-ms-"?`ms-${r.slice(4)}`:r;t[a.replace(/-([a-z])/g,Jy)]=i}}function Jy(e,t){return t.toUpperCase()}function Yy(e){return[e.start.line,":",e.start.column,"-",e.end.line,":",e.end.column].map(String).join("")}const gs={}.hasOwnProperty,Xy="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Jn={plugins:{to:"remarkPlugins",id:"change-plugins-to-remarkplugins"},renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function Ia(e){for(const a in Jn)if(gs.call(Jn,a)&&gs.call(e,a)){const o=Jn[a];console.warn(`[react-markdown] Warning: please ${o.to?`use \`${o.to}\` instead of`:"remove"} \`${a}\` (see <${Xy}#${o.id}> for more info)`),delete Jn[a]}const t=Cm().use(Ab).use(e.remarkPlugins||[]).use(by,{...e.remarkRehypeOptions,allowDangerousHtml:!0}).use(e.rehypePlugins||[]).use(jy,e),n=new su;typeof e.children=="string"?n.value=e.children:e.children!==void 0&&e.children!==null&&console.warn(`[react-markdown] Warning: please pass a string as \`children\` (not: \`${e.children}\`)`);const r=t.runSync(t.parse(n),n);if(r.type!=="root")throw new TypeError("Expected a `root` node");let i=K.createElement(K.Fragment,{},$u({options:e,schema:Dy,listDepth:0},r));return e.className&&(i=K.createElement("div",{className:e.className},i)),i}Ia.propTypes={children:G.string,className:G.string,allowElement:G.func,allowedElements:G.arrayOf(G.string),disallowedElements:G.arrayOf(G.string),unwrapDisallowed:G.bool,remarkPlugins:G.arrayOf(G.oneOfType([G.object,G.func,G.arrayOf(G.oneOfType([G.bool,G.string,G.object,G.func,G.arrayOf(G.any)]))])),rehypePlugins:G.arrayOf(G.oneOfType([G.object,G.func,G.arrayOf(G.oneOfType([G.bool,G.string,G.object,G.func,G.arrayOf(G.any)]))])),sourcePos:G.bool,rawSourcePos:G.bool,skipHtml:G.bool,includeElementIndex:G.bool,transformLinkUri:G.oneOfType([G.func,G.bool]),linkTarget:G.oneOfType([G.func,G.string]),transformImageUri:G.func,components:G.object};const Qy={tokenize:ix,partial:!0},Uu={tokenize:ax,partial:!0},zu={tokenize:ox,partial:!0},qu={tokenize:sx,partial:!0},Zy={tokenize:lx,partial:!0},Wu={tokenize:nx,previous:Gu},Hu={tokenize:rx,previous:Vu},ht={tokenize:tx,previous:Ku},ot={},ex={text:ot};let It=48;for(;It<123;)ot[It]=ht,It++,It===58?It=65:It===91&&(It=97);ot[43]=ht;ot[45]=ht;ot[46]=ht;ot[95]=ht;ot[72]=[ht,Hu];ot[104]=[ht,Hu];ot[87]=[ht,Wu];ot[119]=[ht,Wu];function tx(e,t,n){const r=this;let i,a;return o;function o(c){return!Mi(c)||!Ku.call(r,r.previous)||Aa(r.events)?n(c):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),s(c))}function s(c){return Mi(c)?(e.consume(c),s):c===64?(e.consume(c),l):n(c)}function l(c){return c===46?e.check(Zy,d,u)(c):c===45||c===95||je(c)?(a=!0,e.consume(c),l):d(c)}function u(c){return e.consume(c),i=!0,l}function d(c){return a&&i&&Le(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(c)):n(c)}}function nx(e,t,n){const r=this;return i;function i(o){return o!==87&&o!==119||!Gu.call(r,r.previous)||Aa(r.events)?n(o):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(Qy,e.attempt(Uu,e.attempt(zu,a),n),n)(o))}function a(o){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(o)}}function rx(e,t,n){const r=this;let i="",a=!1;return o;function o(c){return(c===72||c===104)&&Vu.call(r,r.previous)&&!Aa(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(c),e.consume(c),s):n(c)}function s(c){if(Le(c)&&i.length<5)return i+=String.fromCodePoint(c),e.consume(c),s;if(c===58){const h=i.toLowerCase();if(h==="http"||h==="https")return e.consume(c),l}return n(c)}function l(c){return c===47?(e.consume(c),a?u:(a=!0,l)):n(c)}function u(c){return c===null||pr(c)||ce(c)||Rt(c)||_r(c)?n(c):e.attempt(Uu,e.attempt(zu,d),n)(c)}function d(c){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(c)}}function ix(e,t,n){let r=0;return i;function i(o){return(o===87||o===119)&&r<3?(r++,e.consume(o),i):o===46&&r===3?(e.consume(o),a):n(o)}function a(o){return o===null?n(o):t(o)}}function ax(e,t,n){let r,i,a;return o;function o(u){return u===46||u===95?e.check(qu,l,s)(u):u===null||ce(u)||Rt(u)||u!==45&&_r(u)?l(u):(a=!0,e.consume(u),o)}function s(u){return u===95?r=!0:(i=r,r=void 0),e.consume(u),o}function l(u){return i||r||!a?n(u):t(u)}}function ox(e,t){let n=0,r=0;return i;function i(o){return o===40?(n++,e.consume(o),i):o===41&&r<n?a(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?e.check(qu,t,a)(o):o===null||ce(o)||Rt(o)?t(o):(e.consume(o),i)}function a(o){return o===41&&r++,e.consume(o),i}}function sx(e,t,n){return r;function r(s){return s===33||s===34||s===39||s===41||s===42||s===44||s===46||s===58||s===59||s===63||s===95||s===126?(e.consume(s),r):s===38?(e.consume(s),a):s===93?(e.consume(s),i):s===60||s===null||ce(s)||Rt(s)?t(s):n(s)}function i(s){return s===null||s===40||s===91||ce(s)||Rt(s)?t(s):r(s)}function a(s){return Le(s)?o(s):n(s)}function o(s){return s===59?(e.consume(s),r):Le(s)?(e.consume(s),o):n(s)}}function lx(e,t,n){return r;function r(a){return e.consume(a),i}function i(a){return je(a)?n(a):t(a)}}function Gu(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||ce(e)}function Vu(e){return!Le(e)}function Ku(e){return!(e===47||Mi(e))}function Mi(e){return e===43||e===45||e===46||e===95||je(e)}function Aa(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const ux={tokenize:vx,partial:!0};function cx(){return{document:{91:{tokenize:px,continuation:{tokenize:gx},exit:mx}},text:{91:{tokenize:fx},93:{add:"after",tokenize:dx,resolveTo:hx}}}}function dx(e,t,n){const r=this;let i=r.events.length;const a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;i--;){const l=r.events[i][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return s;function s(l){if(!o||!o._balanced)return n(l);const u=rt(r.sliceSerialize({start:o.end,end:r.now()}));return u.codePointAt(0)!==94||!a.includes(u.slice(1))?n(l):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(l),e.exit("gfmFootnoteCallLabelMarker"),t(l))}}function hx(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},s=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",a,t],["enter",o,t],["exit",o,t],["exit",a,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...s),e}function fx(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a=0,o;return s;function s(c){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),l}function l(c){return c!==94?n(c):(e.enter("gfmFootnoteCallMarker"),e.consume(c),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(c){if(a>999||c===93&&!o||c===null||c===91||ce(c))return n(c);if(c===93){e.exit("chunkString");const h=e.exit("gfmFootnoteCallString");return i.includes(rt(r.sliceSerialize(h)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(c)}return ce(c)||(o=!0),a++,e.consume(c),c===92?d:u}function d(c){return c===91||c===92||c===93?(e.consume(c),a++,u):u(c)}}function px(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,o=0,s;return l;function l(g){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(g){return g===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",d):n(g)}function d(g){if(o>999||g===93&&!s||g===null||g===91||ce(g))return n(g);if(g===93){e.exit("chunkString");const v=e.exit("gfmFootnoteDefinitionLabelString");return a=rt(r.sliceSerialize(v)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),h}return ce(g)||(s=!0),o++,e.consume(g),g===92?c:d}function c(g){return g===91||g===92||g===93?(e.consume(g),o++,d):d(g)}function h(g){return g===58?(e.enter("definitionMarker"),e.consume(g),e.exit("definitionMarker"),i.includes(a)||i.push(a),Z(e,f,"gfmFootnoteDefinitionWhitespace")):n(g)}function f(g){return t(g)}}function gx(e,t,n){return e.check(Fn,t,e.attempt(ux,t,n))}function mx(e){e.exit("gfmFootnoteDefinition")}function vx(e,t,n){const r=this;return Z(e,i,"gfmFootnoteDefinitionIndent",5);function i(a){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?t(a):n(a)}}function bx(e){let n=(e||{}).singleTilde;const r={tokenize:a,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(o,s){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let u=l;for(;u--;)if(o[u][0]==="exit"&&o[u][1].type==="strikethroughSequenceTemporary"&&o[u][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[u][1].end.offset-o[u][1].start.offset){o[l][1].type="strikethroughSequence",o[u][1].type="strikethroughSequence";const d={type:"strikethrough",start:Object.assign({},o[u][1].start),end:Object.assign({},o[l][1].end)},c={type:"strikethroughText",start:Object.assign({},o[u][1].end),end:Object.assign({},o[l][1].start)},h=[["enter",d,s],["enter",o[u][1],s],["exit",o[u][1],s],["enter",c,s]],f=s.parser.constructs.insideSpan.null;f&&We(h,h.length,0,Pr(f,o.slice(u+1,l),s)),We(h,h.length,0,[["exit",c,s],["enter",o[l][1],s],["exit",o[l][1],s],["exit",d,s]]),We(o,u-1,l-u+3,h),l=u+h.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type="data");return o}function a(o,s,l){const u=this.previous,d=this.events;let c=0;return h;function h(g){return u===126&&d[d.length-1][1].type!=="characterEscape"?l(g):(o.enter("strikethroughSequenceTemporary"),f(g))}function f(g){const v=gr(u);if(g===126)return c>1?l(g):(o.consume(g),c++,f);if(c<2&&!n)return l(g);const m=o.exit("strikethroughSequenceTemporary"),b=gr(g);return m._open=!b||b===2&&!!v,m._close=!v||v===2&&!!b,s(g)}}}class yx{constructor(){this.map=[]}add(t,n,r){xx(this,t,n,r)}consume(t){if(this.map.sort((a,o)=>a[0]-o[0]),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1])),r.push(this.map[n][2]),t.length=this.map[n][0];r.push([...t]),t.length=0;let i=r.pop();for(;i;)t.push(...i),i=r.pop();this.map.length=0}}function xx(e,t,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}function wx(e,t){let n=!1;const r=[];for(;t<e.length;){const i=e[t];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const a=r.length-1;r[a]=r[a]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}const Sx={flow:{null:{tokenize:kx,resolveAll:Cx}}};function kx(e,t,n){const r=this;let i=0,a=0,o;return s;function s(_){let A=r.events.length-1;for(;A>-1;){const N=r.events[A][1].type;if(N==="lineEnding"||N==="linePrefix")A--;else break}const j=A>-1?r.events[A][1].type:null,I=j==="tableHead"||j==="tableRow"?y:l;return I===y&&r.parser.lazy[r.now().line]?n(_):I(_)}function l(_){return e.enter("tableHead"),e.enter("tableRow"),u(_)}function u(_){return _===124||(o=!0,a+=1),d(_)}function d(_){return _===null?n(_):q(_)?a>1?(a=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(_),e.exit("lineEnding"),f):n(_):Q(_)?Z(e,d,"whitespace")(_):(a+=1,o&&(o=!1,i+=1),_===124?(e.enter("tableCellDivider"),e.consume(_),e.exit("tableCellDivider"),o=!0,d):(e.enter("data"),c(_)))}function c(_){return _===null||_===124||ce(_)?(e.exit("data"),d(_)):(e.consume(_),_===92?h:c)}function h(_){return _===92||_===124?(e.consume(_),c):c(_)}function f(_){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(_):(e.enter("tableDelimiterRow"),o=!1,Q(_)?Z(e,g,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(_):g(_))}function g(_){return _===45||_===58?m(_):_===124?(o=!0,e.enter("tableCellDivider"),e.consume(_),e.exit("tableCellDivider"),v):w(_)}function v(_){return Q(_)?Z(e,m,"whitespace")(_):m(_)}function m(_){return _===58?(a+=1,o=!0,e.enter("tableDelimiterMarker"),e.consume(_),e.exit("tableDelimiterMarker"),b):_===45?(a+=1,b(_)):_===null||q(_)?E(_):w(_)}function b(_){return _===45?(e.enter("tableDelimiterFiller"),S(_)):w(_)}function S(_){return _===45?(e.consume(_),S):_===58?(o=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(_),e.exit("tableDelimiterMarker"),x):(e.exit("tableDelimiterFiller"),x(_))}function x(_){return Q(_)?Z(e,E,"whitespace")(_):E(_)}function E(_){return _===124?g(_):_===null||q(_)?!o||i!==a?w(_):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(_)):w(_)}function w(_){return n(_)}function y(_){return e.enter("tableRow"),P(_)}function P(_){return _===124?(e.enter("tableCellDivider"),e.consume(_),e.exit("tableCellDivider"),P):_===null||q(_)?(e.exit("tableRow"),t(_)):Q(_)?Z(e,P,"whitespace")(_):(e.enter("data"),L(_))}function L(_){return _===null||_===124||ce(_)?(e.exit("data"),P(_)):(e.consume(_),_===92?O:L)}function O(_){return _===92||_===124?(e.consume(_),L):L(_)}}function Cx(e,t){let n=-1,r=!0,i=0,a=[0,0,0,0],o=[0,0,0,0],s=!1,l=0,u,d,c;const h=new yx;for(;++n<e.length;){const f=e[n],g=f[1];f[0]==="enter"?g.type==="tableHead"?(s=!1,l!==0&&(ms(h,t,l,u,d),d=void 0,l=0),u={type:"table",start:Object.assign({},g.start),end:Object.assign({},g.end)},h.add(n,0,[["enter",u,t]])):g.type==="tableRow"||g.type==="tableDelimiterRow"?(r=!0,c=void 0,a=[0,0,0,0],o=[0,n+1,0,0],s&&(s=!1,d={type:"tableBody",start:Object.assign({},g.start),end:Object.assign({},g.end)},h.add(n,0,[["enter",d,t]])),i=g.type==="tableDelimiterRow"?2:d?3:1):i&&(g.type==="data"||g.type==="tableDelimiterMarker"||g.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(a[1]!==0&&(o[0]=o[1],c=Yn(h,t,a,i,void 0,c),a=[0,0,0,0]),o[2]=n)):g.type==="tableCellDivider"&&(r?r=!1:(a[1]!==0&&(o[0]=o[1],c=Yn(h,t,a,i,void 0,c)),a=o,o=[a[1],n,0,0])):g.type==="tableHead"?(s=!0,l=n):g.type==="tableRow"||g.type==="tableDelimiterRow"?(l=n,a[1]!==0?(o[0]=o[1],c=Yn(h,t,a,i,n,c)):o[1]!==0&&(c=Yn(h,t,o,i,n,c)),i=0):i&&(g.type==="data"||g.type==="tableDelimiterMarker"||g.type==="tableDelimiterFiller")&&(o[3]=n)}for(l!==0&&ms(h,t,l,u,d),h.consume(t.events),n=-1;++n<t.events.length;){const f=t.events[n];f[0]==="enter"&&f[1].type==="table"&&(f[1]._align=wx(t.events,n))}return e}function Yn(e,t,n,r,i,a){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",s="tableContent";n[0]!==0&&(a.end=Object.assign({},Xt(t.events,n[0])),e.add(n[0],0,[["exit",a,t]]));const l=Xt(t.events,n[1]);if(a={type:o,start:Object.assign({},l),end:Object.assign({},l)},e.add(n[1],0,[["enter",a,t]]),n[2]!==0){const u=Xt(t.events,n[2]),d=Xt(t.events,n[3]),c={type:s,start:Object.assign({},u),end:Object.assign({},d)};if(e.add(n[2],0,[["enter",c,t]]),r!==2){const h=t.events[n[2]],f=t.events[n[3]];if(h[1].end=Object.assign({},f[1].end),h[1].type="chunkText",h[1].contentType="text",n[3]>n[2]+1){const g=n[2]+1,v=n[3]-n[2]-1;e.add(g,v,[])}}e.add(n[3]+1,0,[["exit",c,t]])}return i!==void 0&&(a.end=Object.assign({},Xt(t.events,i)),e.add(i,0,[["exit",a,t]]),a=void 0),a}function ms(e,t,n,r,i){const a=[],o=Xt(t.events,n);i&&(i.end=Object.assign({},o),a.push(["exit",i,t])),r.end=Object.assign({},o),a.push(["exit",r,t]),e.add(n+1,0,a)}function Xt(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const Ex={tokenize:Px},_x={text:{91:Ex}};function Px(e,t,n){const r=this;return i;function i(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(l),e.exit("taskListCheckMarker"),a)}function a(l){return ce(l)?(e.enter("taskListCheckValueUnchecked"),e.consume(l),e.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(e.enter("taskListCheckValueChecked"),e.consume(l),e.exit("taskListCheckValueChecked"),o):n(l)}function o(l){return l===93?(e.enter("taskListCheckMarker"),e.consume(l),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),s):n(l)}function s(l){return q(l)?t(l):Q(l)?e.check({tokenize:Ix},t,n)(l):n(l)}}function Ix(e,t,n){return Z(e,r,"whitespace");function r(i){return i===null?n(i):t(i)}}function Ax(e){return du([ex,cx(),bx(e),Sx,_x])}function vs(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(t);for(;i!==-1;)r++,i=n.indexOf(t,i+t.length);return r}function Dx(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const Tx={}.hasOwnProperty,jx=(function(e,t,n,r){let i,a;typeof t=="string"||t instanceof RegExp?(a=[[t,n]],i=r):(a=t,i=n),i||(i={});const o=Ca(i.ignore||[]),s=Ox(a);let l=-1;for(;++l<s.length;)Au(e,"text",u);return e;function u(c,h){let f=-1,g;for(;++f<h.length;){const v=h[f];if(o(v,g?g.children.indexOf(v):void 0,g))return;g=v}if(g)return d(c,h)}function d(c,h){const f=h[h.length-1],g=s[l][0],v=s[l][1];let m=0;const b=f.children.indexOf(c);let S=!1,x=[];g.lastIndex=0;let E=g.exec(c.value);for(;E;){const w=E.index,y={index:E.index,input:E.input,stack:[...h,c]};let P=v(...E,y);if(typeof P=="string"&&(P=P.length>0?{type:"text",value:P}:void 0),P!==!1&&(m!==w&&x.push({type:"text",value:c.value.slice(m,w)}),Array.isArray(P)?x.push(...P):P&&x.push(P),m=w+E[0].length,S=!0),!g.global)break;E=g.exec(c.value)}return S?(m<c.value.length&&x.push({type:"text",value:c.value.slice(m)}),f.children.splice(b,1,...x)):x=[c],b+x.length}});function Ox(e){const t=[];if(typeof e!="object")throw new TypeError("Expected array or object as schema");if(Array.isArray(e)){let n=-1;for(;++n<e.length;)t.push([bs(e[n][0]),ys(e[n][1])])}else{let n;for(n in e)Tx.call(e,n)&&t.push([bs(n),ys(e[n])])}return t}function bs(e){return typeof e=="string"?new RegExp(Dx(e),"g"):e}function ys(e){return typeof e=="function"?e:()=>e}const di="phrasing",hi=["autolink","link","image","label"],Nx={transforms:[Ux],enter:{literalAutolink:Lx,literalAutolinkEmail:fi,literalAutolinkHttp:fi,literalAutolinkWww:fi},exit:{literalAutolink:$x,literalAutolinkEmail:Mx,literalAutolinkHttp:Fx,literalAutolinkWww:Bx}},Rx={unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:di,notInConstruct:hi},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:di,notInConstruct:hi},{character:":",before:"[ps]",after:"\\/",inConstruct:di,notInConstruct:hi}]};function Lx(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function fi(e){this.config.enter.autolinkProtocol.call(this,e)}function Fx(e){this.config.exit.autolinkProtocol.call(this,e)}function Bx(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.url="http://"+this.sliceSerialize(e)}function Mx(e){this.config.exit.autolinkEmail.call(this,e)}function $x(e){this.exit(e)}function Ux(e){jx(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,zx],[/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/g,qx]],{ignore:["link","linkReference"]})}function zx(e,t,n,r,i){let a="";if(!Ju(i)||(/^w/i.test(t)&&(n=t+n,t="",a="http://"),!Wx(n)))return!1;const o=Hx(n+r);if(!o[0])return!1;const s={type:"link",title:null,url:a+t+o[0],children:[{type:"text",value:t+o[0]}]};return o[1]?[s,{type:"text",value:o[1]}]:s}function qx(e,t,n,r){return!Ju(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function Wx(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function Hx(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const i=vs(e,"(");let a=vs(e,")");for(;r!==-1&&i>a;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),a++;return[e,n]}function Ju(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||Rt(n)||_r(n))&&(!t||n!==47)}function Yu(e){return e.label||!e.identifier?e.label||"":Su(e.identifier)}function Gx(e,t,n){const r=t.indexStack,i=e.children||[],a=t.createTracker(n),o=[];let s=-1;for(r.push(-1);++s<i.length;){const l=i[s];r[r.length-1]=s,o.push(a.move(t.handle(l,e,t,{before:`
`,after:`
`,...a.current()}))),l.type!=="list"&&(t.bulletLastUsed=void 0),s<i.length-1&&o.push(a.move(Vx(l,i[s+1],e,t)))}return r.pop(),o.join("")}function Vx(e,t,n,r){let i=r.join.length;for(;i--;){const a=r.join[i](e,t,n,r);if(a===!0||a===1)break;if(typeof a=="number")return`
`.repeat(1+a);if(a===!1)return`

<!---->

`}return`

`}const Kx=/\r?\n|\r/g;function Jx(e,t){const n=[];let r=0,i=0,a;for(;a=Kx.exec(e);)o(e.slice(r,a.index)),n.push(a[0]),r=a.index+a[0].length,i++;return o(e.slice(r)),n.join("");function o(s){n.push(t(s,i,!s))}}function Xu(e){if(!e._compiled){const t=(e.atBreak?"[\\r\\n][\\t ]*":"")+(e.before?"(?:"+e.before+")":"");e._compiled=new RegExp((t?"("+t+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(e.character)?"\\":"")+e.character+(e.after?"(?:"+e.after+")":""),"g")}return e._compiled}function Yx(e,t){return xs(e,t.inConstruct,!0)&&!xs(e,t.notInConstruct,!1)}function xs(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function Qu(e,t,n){const r=(n.before||"")+(t||"")+(n.after||""),i=[],a=[],o={};let s=-1;for(;++s<e.unsafe.length;){const d=e.unsafe[s];if(!Yx(e.stack,d))continue;const c=Xu(d);let h;for(;h=c.exec(r);){const f="before"in d||!!d.atBreak,g="after"in d,v=h.index+(f?h[1].length:0);i.includes(v)?(o[v].before&&!f&&(o[v].before=!1),o[v].after&&!g&&(o[v].after=!1)):(i.push(v),o[v]={before:f,after:g})}}i.sort(Xx);let l=n.before?n.before.length:0;const u=r.length-(n.after?n.after.length:0);for(s=-1;++s<i.length;){const d=i[s];d<l||d>=u||d+1<u&&i[s+1]===d+1&&o[d].after&&!o[d+1].before&&!o[d+1].after||i[s-1]===d-1&&o[d].before&&!o[d-1].before&&!o[d-1].after||(l!==d&&a.push(ws(r.slice(l,d),"\\")),l=d,/[!-/:-@[-`{-~]/.test(r.charAt(d))&&(!n.encode||!n.encode.includes(r.charAt(d)))?a.push("\\"):(a.push("&#x"+r.charCodeAt(d).toString(16).toUpperCase()+";"),l++))}return a.push(ws(r.slice(l,u),n.after)),a.join("")}function Xx(e,t){return e-t}function ws(e,t){const n=/\\(?=[!-/:-@[-`{-~])/g,r=[],i=[],a=e+t;let o=-1,s=0,l;for(;l=n.exec(a);)r.push(l.index);for(;++o<r.length;)s!==r[o]&&i.push(e.slice(s,r[o])),i.push("\\"),s=r[o];return i.push(e.slice(s)),i.join("")}function Ar(e){const t=e||{},n=t.now||{};let r=t.lineShift||0,i=n.line||1,a=n.column||1;return{move:l,current:o,shift:s};function o(){return{now:{line:i,column:a},lineShift:r}}function s(u){r+=u}function l(u){const d=u||"",c=d.split(/\r?\n|\r/g),h=c[c.length-1];return i+=c.length-1,a=c.length===1?a+h.length:1+h.length+r,d}}Zu.peek=lw;function Qx(){return{enter:{gfmFootnoteDefinition:ew,gfmFootnoteDefinitionLabelString:tw,gfmFootnoteCall:iw,gfmFootnoteCallString:aw},exit:{gfmFootnoteDefinition:rw,gfmFootnoteDefinitionLabelString:nw,gfmFootnoteCall:sw,gfmFootnoteCallString:ow}}}function Zx(){return{unsafe:[{character:"[",inConstruct:["phrasing","label","reference"]}],handlers:{footnoteDefinition:uw,footnoteReference:Zu}}}function ew(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function tw(){this.buffer()}function nw(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=rt(this.sliceSerialize(e)).toLowerCase()}function rw(e){this.exit(e)}function iw(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function aw(){this.buffer()}function ow(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=rt(this.sliceSerialize(e)).toLowerCase()}function sw(e){this.exit(e)}function Zu(e,t,n,r){const i=Ar(r);let a=i.move("[^");const o=n.enter("footnoteReference"),s=n.enter("reference");return a+=i.move(Qu(n,Yu(e),{...i.current(),before:a,after:"]"})),s(),o(),a+=i.move("]"),a}function lw(){return"["}function uw(e,t,n,r){const i=Ar(r);let a=i.move("[^");const o=n.enter("footnoteDefinition"),s=n.enter("label");return a+=i.move(Qu(n,Yu(e),{...i.current(),before:a,after:"]"})),s(),a+=i.move("]:"+(e.children&&e.children.length>0?" ":"")),i.shift(4),a+=i.move(Jx(Gx(e,n,i.current()),cw)),o(),a}function cw(e,t,n){return t===0?e:(n?"":"    ")+e}function ec(e,t,n){const r=t.indexStack,i=e.children||[],a=[];let o=-1,s=n.before;r.push(-1);let l=t.createTracker(n);for(;++o<i.length;){const u=i[o];let d;if(r[r.length-1]=o,o+1<i.length){let c=t.handle.handlers[i[o+1].type];c&&c.peek&&(c=c.peek),d=c?c(i[o+1],e,t,{before:"",after:"",...l.current()}).charAt(0):""}else d=n.after;a.length>0&&(s==="\r"||s===`
`)&&u.type==="html"&&(a[a.length-1]=a[a.length-1].replace(/(\r?\n|\r)$/," "),s=" ",l=t.createTracker(n),l.move(a.join(""))),a.push(l.move(t.handle(u,e,t,{...l.current(),before:s,after:d}))),s=a[a.length-1].slice(-1)}return r.pop(),a.join("")}const dw=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];tc.peek=mw;const hw={canContainEols:["delete"],enter:{strikethrough:pw},exit:{strikethrough:gw}},fw={unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:dw}],handlers:{delete:tc}};function pw(e){this.enter({type:"delete",children:[]},e)}function gw(e){this.exit(e)}function tc(e,t,n,r){const i=Ar(r),a=n.enter("strikethrough");let o=i.move("~~");return o+=ec(e,n,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),a(),o}function mw(){return"~"}nc.peek=vw;function nc(e,t,n){let r=e.value||"",i="`",a=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<n.unsafe.length;){const o=n.unsafe[a],s=Xu(o);let l;if(o.atBreak)for(;l=s.exec(r);){let u=l.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(l.index+1)}}return i+r+i}function vw(){return"`"}function bw(e){return e.length}function yw(e,t){const n=t||{},r=(n.align||[]).concat(),i=n.stringLength||bw,a=[],o=[],s=[],l=[];let u=0,d=-1;for(;++d<e.length;){const v=[],m=[];let b=-1;for(e[d].length>u&&(u=e[d].length);++b<e[d].length;){const S=xw(e[d][b]);if(n.alignDelimiters!==!1){const x=i(S);m[b]=x,(l[b]===void 0||x>l[b])&&(l[b]=x)}v.push(S)}o[d]=v,s[d]=m}let c=-1;if(typeof r=="object"&&"length"in r)for(;++c<u;)a[c]=Ss(r[c]);else{const v=Ss(r);for(;++c<u;)a[c]=v}c=-1;const h=[],f=[];for(;++c<u;){const v=a[c];let m="",b="";v===99?(m=":",b=":"):v===108?m=":":v===114&&(b=":");let S=n.alignDelimiters===!1?1:Math.max(1,l[c]-m.length-b.length);const x=m+"-".repeat(S)+b;n.alignDelimiters!==!1&&(S=m.length+S+b.length,S>l[c]&&(l[c]=S),f[c]=S),h[c]=x}o.splice(1,0,h),s.splice(1,0,f),d=-1;const g=[];for(;++d<o.length;){const v=o[d],m=s[d];c=-1;const b=[];for(;++c<u;){const S=v[c]||"";let x="",E="";if(n.alignDelimiters!==!1){const w=l[c]-(m[c]||0),y=a[c];y===114?x=" ".repeat(w):y===99?w%2?(x=" ".repeat(w/2+.5),E=" ".repeat(w/2-.5)):(x=" ".repeat(w/2),E=x):E=" ".repeat(w)}n.delimiterStart!==!1&&!c&&b.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&S==="")&&(n.delimiterStart!==!1||c)&&b.push(" "),n.alignDelimiters!==!1&&b.push(x),b.push(S),n.alignDelimiters!==!1&&b.push(E),n.padding!==!1&&b.push(" "),(n.delimiterEnd!==!1||c!==u-1)&&b.push("|")}g.push(n.delimiterEnd===!1?b.join("").replace(/ +$/,""):b.join(""))}return g.join(`
`)}function xw(e){return e==null?"":String(e)}function Ss(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}const ww={enter:{table:Sw,tableData:ks,tableHeader:ks,tableRow:Cw},exit:{codeText:Ew,table:kw,tableData:pi,tableHeader:pi,tableRow:pi}};function Sw(e){const t=e._align;this.enter({type:"table",align:t.map(n=>n==="none"?null:n),children:[]},e),this.setData("inTable",!0)}function kw(e){this.exit(e),this.setData("inTable")}function Cw(e){this.enter({type:"tableRow",children:[]},e)}function pi(e){this.exit(e)}function ks(e){this.enter({type:"tableCell",children:[]},e)}function Ew(e){let t=this.resume();this.getData("inTable")&&(t=t.replace(/\\([\\|])/g,_w));const n=this.stack[this.stack.length-1];n.value=t,this.exit(e)}function _w(e,t){return t==="|"?t:e}function Pw(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{table:o,tableRow:s,tableCell:l,inlineCode:h}};function o(f,g,v,m){return u(d(f,v,m),f.align)}function s(f,g,v,m){const b=c(f,v,m),S=u([b]);return S.slice(0,S.indexOf(`
`))}function l(f,g,v,m){const b=v.enter("tableCell"),S=v.enter("phrasing"),x=ec(f,v,{...m,before:a,after:a});return S(),b(),x}function u(f,g){return yw(f,{align:g,alignDelimiters:r,padding:n,stringLength:i})}function d(f,g,v){const m=f.children;let b=-1;const S=[],x=g.enter("table");for(;++b<m.length;)S[b]=c(m[b],g,v);return x(),S}function c(f,g,v){const m=f.children;let b=-1;const S=[],x=g.enter("tableRow");for(;++b<m.length;)S[b]=l(m[b],f,g,v);return x(),S}function h(f,g,v){let m=nc(f,g,v);return v.stack.includes("tableCell")&&(m=m.replace(/\|/g,"\\$&")),m}}function Iw(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function Aw(e){const t=e.options.listItemIndent||"tab";if(t===1||t==="1")return"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function Dw(e,t,n,r){const i=Aw(n);let a=n.bulletCurrent||Iw(n);t&&t.type==="list"&&t.ordered&&(a=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+a);let o=a.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(o=Math.ceil(o/4)*4);const s=n.createTracker(r);s.move(a+" ".repeat(o-a.length)),s.shift(o);const l=n.enter("listItem"),u=n.indentLines(n.containerFlow(e,s.current()),d);return l(),u;function d(c,h,f){return h?(f?"":" ".repeat(o))+c:(f?a:a+" ".repeat(o-a.length))+c}}const Tw={exit:{taskListCheckValueChecked:Cs,taskListCheckValueUnchecked:Cs,paragraph:Ow}},jw={unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Nw}};function Cs(e){const t=this.stack[this.stack.length-2];t.checked=e.type==="taskListCheckValueChecked"}function Ow(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1],r=n.children[0];if(r&&r.type==="text"){const i=t.children;let a=-1,o;for(;++a<i.length;){const s=i[a];if(s.type==="paragraph"){o=s;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function Nw(e,t,n,r){const i=e.children[0],a=typeof e.checked=="boolean"&&i&&i.type==="paragraph",o="["+(e.checked?"x":" ")+"] ",s=Ar(r);a&&s.move(o);let l=Dw(e,t,n,{...r,...s.current()});return a&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),l;function u(d){return d+o}}function Rw(){return[Nx,Qx(),hw,ww,Tw]}function Lw(e){return{extensions:[Rx,Zx(),fw,Pw(e),jw]}}function rc(e={}){const t=this.data();n("micromarkExtensions",Ax(e)),n("fromMarkdownExtensions",Rw()),n("toMarkdownExtensions",Lw(e));function n(r,i){(t[r]?t[r]:t[r]=[]).push(i)}}const Fw="modulepreload",Bw=function(e){return"/"+e},Es={},Mn=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let l=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(c=>({status:"fulfilled",value:c}),c=>({status:"rejected",reason:c}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=o?.nonce||o?.getAttribute("nonce");i=l(n.map(u=>{if(u=Bw(u),u in Es)return;Es[u]=!0;const d=u.endsWith(".css"),c=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${c}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Fw,d||(h.as="script"),h.crossOrigin="",h.href=u,s&&h.setAttribute("nonce",s),document.head.appendChild(h),d)return new Promise((f,g)=>{h.addEventListener("load",f),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return i.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return t().catch(a)})},Mw=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Mn(async()=>{const{default:r}=await Promise.resolve().then(()=>dn);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Da extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class $w extends Da{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class _s extends Da{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Ps extends Da{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var $i;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})($i||($i={}));var Uw=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(d){try{u(r.next(d))}catch(c){o(c)}}function l(d){try{u(r.throw(d))}catch(c){o(c)}}function u(d){d.done?a(d.value):i(d.value).then(s,l)}u((r=r.apply(e,t||[])).next())})};class zw{constructor(t,{headers:n={},customFetch:r,region:i=$i.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=Mw(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return Uw(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:o}=n;let s={},{region:l}=n;l||(l=this.region);const u=new URL(`${this.url}/${t}`);l&&l!=="any"&&(s["x-region"]=l,u.searchParams.set("forceFunctionRegion",l));let d;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(s["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(s["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(s["Content-Type"]="application/json",d=JSON.stringify(o)));const c=yield this.fetch(u.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},s),this.headers),i),body:d}).catch(v=>{throw new $w(v)}),h=c.headers.get("x-relay-error");if(h&&h==="true")throw new _s(c);if(!c.ok)throw new Ps(c);let f=((r=c.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return f==="application/json"?g=yield c.json():f==="application/octet-stream"?g=yield c.blob():f==="text/event-stream"?g=c:f==="multipart/form-data"?g=yield c.formData():g=yield c.text(),{data:g,error:null,response:c}}catch(i){return{data:null,error:i,response:i instanceof Ps||i instanceof _s?i.context:void 0}}})}}var Ee={},Ut={},zt={},qt={},Wt={},Ht={},qw=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},an=qw();const Ww=an.fetch,ic=an.fetch.bind(an),ac=an.Headers,Hw=an.Request,Gw=an.Response,dn=Object.freeze(Object.defineProperty({__proto__:null,Headers:ac,Request:Hw,Response:Gw,default:ic,fetch:Ww},Symbol.toStringTag,{value:"Module"})),Vw=Ac(dn);var Xn={},Is;function oc(){if(Is)return Xn;Is=1,Object.defineProperty(Xn,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Xn.default=e,Xn}var As;function sc(){if(As)return Ht;As=1;var e=Ht&&Ht.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ht,"__esModule",{value:!0});const t=e(Vw),n=e(oc());class r{constructor(a){var o,s;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(o=a.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=a.signal,this.isMaybeSingle=(s=a.isMaybeSingle)!==null&&s!==void 0?s:!1,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,o){return this.headers=new Headers(this.headers),this.headers.set(a,o),this}then(a,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let l=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var d,c,h,f;let g=null,v=null,m=null,b=u.status,S=u.statusText;if(u.ok){if(this.method!=="HEAD"){const y=await u.text();y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?v=y:v=JSON.parse(y))}const E=(c=this.headers.get("Prefer"))===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),w=(h=u.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");E&&w&&w.length>1&&(m=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(g={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,m=null,b=406,S="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const E=await u.text();try{g=JSON.parse(E),Array.isArray(g)&&u.status===404&&(v=[],g=null,b=200,S="OK")}catch{u.status===404&&E===""?(b=204,S="No Content"):g={message:E}}if(g&&this.isMaybeSingle&&(!((f=g?.details)===null||f===void 0)&&f.includes("0 rows"))&&(g=null,b=200,S="OK"),g&&this.shouldThrowOnError)throw new n.default(g)}return{error:g,data:v,count:m,status:b,statusText:S}});return this.shouldThrowOnError||(l=l.catch(u=>{var d,c,h;return{error:{message:`${(d=u?.name)!==null&&d!==void 0?d:"FetchError"}: ${u?.message}`,details:`${(c=u?.stack)!==null&&c!==void 0?c:""}`,hint:"",code:`${(h=u?.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),l.then(a,o)}returns(){return this}overrideTypes(){return this}}return Ht.default=r,Ht}var Ds;function lc(){if(Ds)return Wt;Ds=1;var e=Wt&&Wt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Wt,"__esModule",{value:!0});const t=e(sc());class n extends t.default{select(i){let a=!1;const o=(i??"*").split("").map(s=>/\s/.test(s)&&!a?"":(s==='"'&&(a=!a),s)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:a=!0,nullsFirst:o,foreignTable:s,referencedTable:l=s}={}){const u=l?`${l}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${i}.${a?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:o=a}={}){const s=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(s,`${i}`),this}range(i,a,{foreignTable:o,referencedTable:s=o}={}){const l=typeof s>"u"?"offset":`${s}.offset`,u=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(u,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:a=!1,settings:o=!1,buffers:s=!1,wal:l=!1,format:u="text"}={}){var d;const c=[i?"analyze":null,a?"verbose":null,o?"settings":null,s?"buffers":null,l?"wal":null].filter(Boolean).join("|"),h=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${h}"; options=${c};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Wt.default=n,Wt}var Ts;function Ta(){if(Ts)return qt;Ts=1;var e=qt&&qt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qt,"__esModule",{value:!0});const t=e(lc());class n extends t.default{eq(i,a){return this.url.searchParams.append(i,`eq.${a}`),this}neq(i,a){return this.url.searchParams.append(i,`neq.${a}`),this}gt(i,a){return this.url.searchParams.append(i,`gt.${a}`),this}gte(i,a){return this.url.searchParams.append(i,`gte.${a}`),this}lt(i,a){return this.url.searchParams.append(i,`lt.${a}`),this}lte(i,a){return this.url.searchParams.append(i,`lte.${a}`),this}like(i,a){return this.url.searchParams.append(i,`like.${a}`),this}likeAllOf(i,a){return this.url.searchParams.append(i,`like(all).{${a.join(",")}}`),this}likeAnyOf(i,a){return this.url.searchParams.append(i,`like(any).{${a.join(",")}}`),this}ilike(i,a){return this.url.searchParams.append(i,`ilike.${a}`),this}ilikeAllOf(i,a){return this.url.searchParams.append(i,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(i,a){return this.url.searchParams.append(i,`ilike(any).{${a.join(",")}}`),this}is(i,a){return this.url.searchParams.append(i,`is.${a}`),this}in(i,a){const o=Array.from(new Set(a)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cs.{${a.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(a)}`),this}containedBy(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cd.{${a.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(a)}`),this}rangeGt(i,a){return this.url.searchParams.append(i,`sr.${a}`),this}rangeGte(i,a){return this.url.searchParams.append(i,`nxl.${a}`),this}rangeLt(i,a){return this.url.searchParams.append(i,`sl.${a}`),this}rangeLte(i,a){return this.url.searchParams.append(i,`nxr.${a}`),this}rangeAdjacent(i,a){return this.url.searchParams.append(i,`adj.${a}`),this}overlaps(i,a){return typeof a=="string"?this.url.searchParams.append(i,`ov.${a}`):this.url.searchParams.append(i,`ov.{${a.join(",")}}`),this}textSearch(i,a,{config:o,type:s}={}){let l="";s==="plain"?l="pl":s==="phrase"?l="ph":s==="websearch"&&(l="w");const u=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${l}fts${u}.${a}`),this}match(i){return Object.entries(i).forEach(([a,o])=>{this.url.searchParams.append(a,`eq.${o}`)}),this}not(i,a,o){return this.url.searchParams.append(i,`not.${a}.${o}`),this}or(i,{foreignTable:a,referencedTable:o=a}={}){const s=o?`${o}.or`:"or";return this.url.searchParams.append(s,`(${i})`),this}filter(i,a,o){return this.url.searchParams.append(i,`${a}.${o}`),this}}return qt.default=n,qt}var js;function uc(){if(js)return zt;js=1;var e=zt&&zt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(zt,"__esModule",{value:!0});const t=e(Ta());class n{constructor(i,{headers:a={},schema:o,fetch:s}){this.url=i,this.headers=new Headers(a),this.schema=o,this.fetch=s}select(i,{head:a=!1,count:o}={}){const s=a?"HEAD":"GET";let l=!1;const u=(i??"*").split("").map(d=>/\s/.test(d)&&!l?"":(d==='"'&&(l=!l),d)).join("");return this.url.searchParams.set("select",u),o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:a,defaultToNull:o=!0}={}){var s;const l="POST";if(a&&this.headers.append("Prefer",`count=${a}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const u=i.reduce((d,c)=>d.concat(Object.keys(c)),[]);if(u.length>0){const d=[...new Set(u)].map(c=>`"${c}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(i,{onConflict:a,ignoreDuplicates:o=!1,count:s,defaultToNull:l=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),s&&this.headers.append("Prefer",`count=${s}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const c=i.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(c.length>0){const h=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(i,{count:a}={}){var o;const s="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:i}={}){var a;const o="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return zt.default=n,zt}var Os;function Kw(){if(Os)return Ut;Os=1;var e=Ut&&Ut.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ut,"__esModule",{value:!0});const t=e(uc()),n=e(Ta());class r{constructor(a,{headers:o={},schema:s,fetch:l}={}){this.url=a,this.headers=new Headers(o),this.schemaName=s,this.fetch=l}from(a){const o=new URL(`${this.url}/${a}`);return new t.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new r(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,o={},{head:s=!1,get:l=!1,count:u}={}){var d;let c;const h=new URL(`${this.url}/rpc/${a}`);let f;s||l?(c=s?"HEAD":"GET",Object.entries(o).filter(([v,m])=>m!==void 0).map(([v,m])=>[v,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([v,m])=>{h.searchParams.append(v,m)})):(c="POST",f=o);const g=new Headers(this.headers);return u&&g.set("Prefer",`count=${u}`),new n.default({method:c,url:h,headers:g,schema:this.schemaName,body:f,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return Ut.default=r,Ut}var Ns;function Jw(){if(Ns)return Ee;Ns=1;var e=Ee&&Ee.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.PostgrestError=Ee.PostgrestBuilder=Ee.PostgrestTransformBuilder=Ee.PostgrestFilterBuilder=Ee.PostgrestQueryBuilder=Ee.PostgrestClient=void 0;const t=e(Kw());Ee.PostgrestClient=t.default;const n=e(uc());Ee.PostgrestQueryBuilder=n.default;const r=e(Ta());Ee.PostgrestFilterBuilder=r.default;const i=e(lc());Ee.PostgrestTransformBuilder=i.default;const a=e(sc());Ee.PostgrestBuilder=a.default;const o=e(oc());return Ee.PostgrestError=o.default,Ee.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:a.default,PostgrestError:o.default},Ee}var Yw=Jw();const Xw=St(Yw),{PostgrestClient:Qw,PostgrestQueryBuilder:pk,PostgrestFilterBuilder:gk,PostgrestTransformBuilder:mk,PostgrestBuilder:vk,PostgrestError:bk}=Xw;class Zw{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const e0="2.15.5",t0=`realtime-js/${e0}`,n0="1.0.0",Ui=1e4,r0=1e3,i0=100;var Cn;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Cn||(Cn={}));var Se;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Se||(Se={}));var et;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(et||(et={}));var zi;(function(e){e.websocket="websocket"})(zi||(zi={}));var Ot;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Ot||(Ot={}));class a0{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),a=n.getUint8(2);let o=this.HEADER_LENGTH+2;const s=r.decode(t.slice(o,o+i));o=o+i;const l=r.decode(t.slice(o,o+a));o=o+a;const u=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:s,event:l,payload:u}}}class cc{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ge;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ge||(ge={}));const Rs=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((a,o)=>(a[o]=o0(o,e,t,i),a),{})},o0=(e,t,n,r)=>{const i=t.find(s=>s.name===e),a=i?.type,o=n[e];return a&&!r.includes(a)?dc(a,o):qi(o)},dc=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return c0(t,n)}switch(e){case ge.bool:return s0(t);case ge.float4:case ge.float8:case ge.int2:case ge.int4:case ge.int8:case ge.numeric:case ge.oid:return l0(t);case ge.json:case ge.jsonb:return u0(t);case ge.timestamp:return d0(t);case ge.abstime:case ge.date:case ge.daterange:case ge.int4range:case ge.int8range:case ge.money:case ge.reltime:case ge.text:case ge.time:case ge.timestamptz:case ge.timetz:case ge.tsrange:case ge.tstzrange:return qi(t);default:return qi(t)}},qi=e=>e,s0=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},l0=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},u0=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},c0=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let a;const o=e.slice(1,n);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(s=>dc(t,s))}return e},d0=e=>typeof e=="string"?e.replace(" ","T"):e,hc=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class gi{constructor(t,n,r={},i=Ui){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Ls;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Ls||(Ls={}));class En{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:a,onLeave:o,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=En.syncState(this.state,i,a,o),this.pendingDiffs.forEach(l=>{this.state=En.syncDiff(this.state,l,a,o)}),this.pendingDiffs=[],s()}),this.channel._on(r.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=En.syncDiff(this.state,i,a,o),s())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const a=this.cloneDeep(t),o=this.transformState(n),s={},l={};return this.map(a,(u,d)=>{o[u]||(l[u]=d)}),this.map(o,(u,d)=>{const c=a[u];if(c){const h=d.map(m=>m.presence_ref),f=c.map(m=>m.presence_ref),g=d.filter(m=>f.indexOf(m.presence_ref)<0),v=c.filter(m=>h.indexOf(m.presence_ref)<0);g.length>0&&(s[u]=g),v.length>0&&(l[u]=v)}else s[u]=d}),this.syncDiff(a,{joins:s,leaves:l},r,i)}static syncDiff(t,n,r,i){const{joins:a,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(a,(s,l)=>{var u;const d=(u=t[s])!==null&&u!==void 0?u:[];if(t[s]=this.cloneDeep(l),d.length>0){const c=t[s].map(f=>f.presence_ref),h=d.filter(f=>c.indexOf(f.presence_ref)<0);t[s].unshift(...h)}r(s,d,l)}),this.map(o,(s,l)=>{let u=t[s];if(!u)return;const d=l.map(c=>c.presence_ref);u=u.filter(c=>d.indexOf(c.presence_ref)<0),t[s]=u,i(s,u,l),u.length===0&&delete t[s]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Fs;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Fs||(Fs={}));var _n;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(_n||(_n={}));var dt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(dt||(dt={}));class ja{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Se.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new gi(this,et.join,this.params,this.timeout),this.rejoinTimer=new cc(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Se.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Se.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Se.errored,this.rejoinTimer.scheduleTimeout())}),this._on(et.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new En(this),this.broadcastEndpointURL=hc(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Se.closed){const{config:{broadcast:o,presence:s,private:l}}=this.params,u=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[_n.PRESENCE]&&this.bindings[_n.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,c={},h={broadcast:o,presence:Object.assign(Object.assign({},s),{enabled:d}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this._onError(f=>t?.(dt.CHANNEL_ERROR,f)),this._onClose(()=>t?.(dt.CLOSED)),this.updateJoinPayload(Object.assign({config:h},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:f})=>{var g;if(this.socket.setAuth(),f===void 0){t?.(dt.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,m=(g=v?.length)!==null&&g!==void 0?g:0,b=[];for(let S=0;S<m;S++){const x=v[S],{filter:{event:E,schema:w,table:y,filter:P}}=x,L=f&&f[S];if(L&&L.event===E&&L.schema===w&&L.table===y&&L.filter===P)b.push(Object.assign(Object.assign({},x),{id:L.id}));else{this.unsubscribe(),this.state=Se.errored,t?.(dt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(dt.SUBSCRIBED);return}}).receive("error",f=>{this.state=Se.errored,t?.(dt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t?.(dt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Se.joined&&t===_n.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,s,l;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(s=(o=this.params)===null||o===void 0?void 0:o.config)===null||s===void 0?void 0:s.broadcast)===null||l===void 0)&&l.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Se.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(et.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new gi(this,et.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Se.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,a=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(a),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new gi(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>i0){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,a;const o=t.toLocaleLowerCase(),{close:s,error:l,leave:u,join:d}=et;if(r&&[s,l,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var g,v,m;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((m=(v=f.filter)===null||v===void 0?void 0:v.event)===null||m===void 0?void 0:m.toLocaleLowerCase())===o}).map(f=>f.callback(h,r)):(a=this.bindings[o])===null||a===void 0||a.filter(f=>{var g,v,m,b,S,x;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const E=f.id,w=(g=f.filter)===null||g===void 0?void 0:g.event;return E&&((v=n.ids)===null||v===void 0?void 0:v.includes(E))&&(w==="*"||w?.toLocaleLowerCase()===((m=n.data)===null||m===void 0?void 0:m.type.toLocaleLowerCase()))}else{const E=(S=(b=f?.filter)===null||b===void 0?void 0:b.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return E==="*"||E===((x=n?.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:v,table:m,commit_timestamp:b,type:S,errors:x}=g;h=Object.assign(Object.assign({},{schema:v,table:m,commit_timestamp:b,eventType:S,new:{},old:{},errors:x}),this._getPayloadRecords(g))}f.callback(h,r)})}_isClosed(){return this.state===Se.closed}_isJoined(){return this.state===Se.joined}_isJoining(){return this.state===Se.joining}_isLeaving(){return this.state===Se.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),a={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&ja.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(et.close,{},t)}_onError(t){this._on(et.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Se.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Rs(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Rs(t.columns,t.old_record)),n}}const mi=()=>{},Qn={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},h0=[1e3,2e3,5e3,1e4],f0=1e4,p0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class g0{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ui,this.transport=null,this.heartbeatIntervalMs=Qn.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=mi,this.ref=0,this.reconnectTimer=null,this.logger=mi,this.conn=null,this.sendBuffer=[],this.serializer=new a0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...o)=>Mn(async()=>{const{default:s}=await Promise.resolve().then(()=>dn);return{default:s}},void 0).then(({default:s})=>s(...o)).catch(s=>{throw new Error(`Failed to load @supabase/node-fetch: ${s.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...o)=>a(...o)},!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${zi.websocket}`,this.httpEndpoint=hc(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Zw.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:n0}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Cn.connecting:return Ot.Connecting;case Cn.open:return Ot.Open;case Cn.closing:return Ot.Closing;default:return Ot.Closed}}isConnected(){return this.connectionState()===Ot.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(a=>a.topic===r);if(i)return i;{const a=new ja(`realtime:${t}`,n,this);return this.channels.push(a),a}}push(t){const{topic:n,event:r,payload:i,ref:a}=t,o=()=>{this.encode(t,s=>{var l;(l=this.conn)===null||l===void 0||l.send(s)})};this.log("push",`${n} ${r} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(r0,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Qn.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:a,ref:o}=n,s=o?`(${o})`:"",l=a.status||"";this.log("receive",`${l} ${r} ${i} ${s}`.trim(),a),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(i,a,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(et.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([p0],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:t0};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(et.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new cc(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Qn.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,a,o,s,l,u,d;if(this.transport=(n=t?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t?.timeout)!==null&&r!==void 0?r:Ui,this.heartbeatIntervalMs=(i=t?.heartbeatIntervalMs)!==null&&i!==void 0?i:Qn.HEARTBEAT_INTERVAL,this.worker=(a=t?.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=t?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(s=t?.heartbeatCallback)!==null&&s!==void 0?s:mi,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t?.reconnectAfterMs)!==null&&l!==void 0?l:(c=>h0[c-1]||f0),this.encode=(u=t?.encode)!==null&&u!==void 0?u:((c,h)=>h(JSON.stringify(c))),this.decode=(d=t?.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}class Oa extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ke(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class m0 extends Oa{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Wi extends Oa{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var v0=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(d){try{u(r.next(d))}catch(c){o(c)}}function l(d){try{u(r.throw(d))}catch(c){o(c)}}function u(d){d.done?a(d.value):i(d.value).then(s,l)}u((r=r.apply(e,t||[])).next())})};const fc=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Mn(async()=>{const{default:r}=await Promise.resolve().then(()=>dn);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},b0=()=>v0(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Mn(()=>Promise.resolve().then(()=>dn),void 0)).Response:Response}),Hi=e=>{if(Array.isArray(e))return e.map(n=>Hi(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[i]=Hi(r)}),t},y0=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Ft=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(d){try{u(r.next(d))}catch(c){o(c)}}function l(d){try{u(r.throw(d))}catch(c){o(c)}}function u(d){d.done?a(d.value):i(d.value).then(s,l)}u((r=r.apply(e,t||[])).next())})};const vi=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),x0=(e,t,n)=>Ft(void 0,void 0,void 0,function*(){const r=yield b0();e instanceof r&&!n?.noResolveJson?e.json().then(i=>{const a=e.status||500,o=i?.statusCode||a+"";t(new m0(vi(i),a,o))}).catch(i=>{t(new Wi(vi(i),i))}):t(new Wi(vi(e),e))}),w0=(e,t,n,r)=>{const i={method:e,headers:t?.headers||{}};return e==="GET"||!r?i:(y0(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(r)):i.body=r,t?.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function $n(e,t,n,r,i,a){return Ft(this,void 0,void 0,function*(){return new Promise((o,s)=>{e(n,w0(t,r,i,a)).then(l=>{if(!l.ok)throw l;return r?.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>x0(l,s,r))})})}function vr(e,t,n,r){return Ft(this,void 0,void 0,function*(){return $n(e,"GET",t,n,r)})}function at(e,t,n,r,i){return Ft(this,void 0,void 0,function*(){return $n(e,"POST",t,r,i,n)})}function Gi(e,t,n,r,i){return Ft(this,void 0,void 0,function*(){return $n(e,"PUT",t,r,i,n)})}function S0(e,t,n,r){return Ft(this,void 0,void 0,function*(){return $n(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function pc(e,t,n,r,i){return Ft(this,void 0,void 0,function*(){return $n(e,"DELETE",t,r,i,n)})}var Re=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(d){try{u(r.next(d))}catch(c){o(c)}}function l(d){try{u(r.throw(d))}catch(c){o(c)}}function u(d){d.done?a(d.value):i(d.value).then(s,l)}u((r=r.apply(e,t||[])).next())})};const k0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Bs={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class C0{constructor(t,n={},r,i){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=fc(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,i){return Re(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},Bs),i);let s=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),l&&a.append("metadata",this.encodeMetadata(l)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",o.cacheControl),l&&a.append("metadata",this.encodeMetadata(l))):(a=r,s["cache-control"]=`max-age=${o.cacheControl}`,s["content-type"]=o.contentType,l&&(s["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i?.headers&&(s=Object.assign(Object.assign({},s),i.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),c=yield(t=="PUT"?Gi:at)(this.fetch,`${this.url}/object/${d}`,a,Object.assign({headers:s},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:c.Id,fullPath:c.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ke(a))return{data:null,error:a};throw a}})}upload(t,n,r){return Re(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return Re(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),o=this._getFinalPath(a),s=new URL(this.url+`/object/upload/sign/${o}`);s.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:Bs.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const c=yield Gi(this.fetch,s.toString(),l,{headers:d});return{data:{path:a,fullPath:c.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ke(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,n){return Re(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n?.upsert&&(i["x-upsert"]="true");const a=yield at(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+a.url),s=o.searchParams.get("token");if(!s)throw new Oa("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:s},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ke(r))return{data:null,error:r};throw r}})}update(t,n,r){return Re(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Re(this,void 0,void 0,function*(){try{return{data:yield at(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ke(i))return{data:null,error:i};throw i}})}copy(t,n,r){return Re(this,void 0,void 0,function*(){try{return{data:{path:(yield at(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ke(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return Re(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),a=yield at(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ke(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return Re(this,void 0,void 0,function*(){try{const i=yield at(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ke(i))return{data:null,error:i};throw i}})}download(t,n){return Re(this,void 0,void 0,function*(){const i=typeof n?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(n?.transform||{}),o=a?`?${a}`:"";try{const s=this._getFinalPath(t);return{data:yield(yield vr(this.fetch,`${this.url}/${i}/${s}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ke(s))return{data:null,error:s};throw s}})}info(t){return Re(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield vr(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Hi(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ke(r))return{data:null,error:r};throw r}})}exists(t){return Re(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield S0(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ke(r)&&r instanceof Wi){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],a=n?.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&i.push(a);const s=typeof n?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(n?.transform||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${r}${u}`)}}}remove(t){return Re(this,void 0,void 0,function*(){try{return{data:yield pc(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ke(n))return{data:null,error:n};throw n}})}list(t,n,r){return Re(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},k0),n),{prefix:t||""});return{data:yield at(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ke(i))return{data:null,error:i};throw i}})}listV2(t,n){return Re(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield at(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ke(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const E0="2.12.1",_0={"X-Client-Info":`storage-js/${E0}`};var Gt=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(d){try{u(r.next(d))}catch(c){o(c)}}function l(d){try{u(r.throw(d))}catch(c){o(c)}}function u(d){d.done?a(d.value):i(d.value).then(s,l)}u((r=r.apply(e,t||[])).next())})};class P0{constructor(t,n={},r,i){this.shouldThrowOnError=!1;const a=new URL(t);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},_0),n),this.fetch=fc(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Gt(this,void 0,void 0,function*(){try{return{data:yield vr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ke(t))return{data:null,error:t};throw t}})}getBucket(t){return Gt(this,void 0,void 0,function*(){try{return{data:yield vr(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ke(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Gt(this,void 0,void 0,function*(){try{return{data:yield at(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ke(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return Gt(this,void 0,void 0,function*(){try{return{data:yield Gi(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ke(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Gt(this,void 0,void 0,function*(){try{return{data:yield at(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ke(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Gt(this,void 0,void 0,function*(){try{return{data:yield pc(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ke(n))return{data:null,error:n};throw n}})}}class I0 extends P0{constructor(t,n={},r,i){super(t,n,r,i)}from(t){return new C0(this.url,this.headers,t,this.fetch)}}const A0="2.57.4";let yn="";typeof Deno<"u"?yn="deno":typeof document<"u"?yn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?yn="react-native":yn="node";const D0={"X-Client-Info":`supabase-js-${yn}/${A0}`},T0={headers:D0},j0={schema:"public"},O0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},N0={};var R0=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(d){try{u(r.next(d))}catch(c){o(c)}}function l(d){try{u(r.throw(d))}catch(c){o(c)}}function u(d){d.done?a(d.value):i(d.value).then(s,l)}u((r=r.apply(e,t||[])).next())})};const L0=e=>{let t;return e?t=e:typeof fetch>"u"?t=ic:t=fetch,(...n)=>t(...n)},F0=()=>typeof Headers>"u"?ac:Headers,B0=(e,t,n)=>{const r=L0(n),i=F0();return(a,o)=>R0(void 0,void 0,void 0,function*(){var s;const l=(s=yield t())!==null&&s!==void 0?s:e;let u=new i(o?.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(a,Object.assign(Object.assign({},o),{headers:u}))})};var M0=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(d){try{u(r.next(d))}catch(c){o(c)}}function l(d){try{u(r.throw(d))}catch(c){o(c)}}function u(d){d.done?a(d.value):i(d.value).then(s,l)}u((r=r.apply(e,t||[])).next())})};function $0(e){return e.endsWith("/")?e:e+"/"}function U0(e,t){var n,r;const{db:i,auth:a,realtime:o,global:s}=e,{db:l,auth:u,realtime:d,global:c}=t,h={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},c),s),{headers:Object.assign(Object.assign({},(n=c?.headers)!==null&&n!==void 0?n:{}),(r=s?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>M0(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function z0(e){const t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL($0(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const gc="2.71.1",Qt=30*1e3,Vi=3,bi=Vi*Qt,q0="http://localhost:9999",W0="supabase.auth.token",H0={"X-Client-Info":`gotrue-js/${gc}`},Ki="X-Supabase-Api-Version",mc={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},G0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,V0=600*1e3;class Na extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Y(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class K0 extends Na{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function J0(e){return Y(e)&&e.name==="AuthApiError"}class vc extends Na{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Et extends Na{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class mt extends Et{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Y0(e){return Y(e)&&e.name==="AuthSessionMissingError"}class Zn extends Et{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class er extends Et{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class tr extends Et{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function X0(e){return Y(e)&&e.name==="AuthImplicitGrantRedirectError"}class Ms extends Et{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ji extends Et{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function yi(e){return Y(e)&&e.name==="AuthRetryableFetchError"}class $s extends Et{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Yi extends Et{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const br="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Us=` 	
\r=`.split(""),Q0=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Us.length;t+=1)e[Us[t].charCodeAt(0)]=-2;for(let t=0;t<br.length;t+=1)e[br[t].charCodeAt(0)]=t;return e})();function zs(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(br[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(br[r]),t.queuedBits-=6}}function bc(e,t,n){const r=Q0[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function qs(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=o=>{tS(o,r,n)};for(let o=0;o<e.length;o+=1)bc(e.charCodeAt(o),i,a);return t.join("")}function Z0(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function eS(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}Z0(r,t)}}function tS(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function nS(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)bc(e.charCodeAt(i),n,r);return new Uint8Array(t)}function rS(e){const t=[];return eS(e,n=>t.push(n)),new Uint8Array(t)}function iS(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>zs(i,n,r)),zs(null,n,r),t.join("")}function aS(e){return Math.round(Date.now()/1e3)+e}function oS(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ze=()=>typeof window<"u"&&typeof document<"u",At={tested:!1,writable:!1},yc=()=>{if(!Ze())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(At.tested)return At.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),At.tested=!0,At.writable=!0}catch{At.tested=!0,At.writable=!1}return At.writable};function sS(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,a)=>{t[a]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const xc=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Mn(async()=>{const{default:r}=await Promise.resolve().then(()=>dn);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},lS=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Zt=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Dt=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},gt=async(e,t)=>{await e.removeItem(t)};class Dr{constructor(){this.promise=new Dr.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Dr.promiseConstructor=Promise;function xi(e){const t=e.split(".");if(t.length!==3)throw new Yi("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!G0.test(t[r]))throw new Yi("JWT not in base64url format");return{header:JSON.parse(qs(t[0])),payload:JSON.parse(qs(t[1])),signature:nS(t[2]),raw:{header:t[0],payload:t[1]}}}async function uS(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function cS(e,t){return new Promise((r,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await e(a);if(!t(a,null,o)){r(o);return}}catch(o){if(!t(a,o)){i(o);return}}})()})}function dS(e){return("0"+e.toString(16)).substr(-2)}function hS(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let a=0;a<56;a++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,dS).join("")}async function fS(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function pS(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await fS(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Vt(e,t,n=!1){const r=hS();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Zt(e,`${t}-code-verifier`,i);const a=await pS(r);return[a,r===a?"plain":"s256"]}const gS=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function mS(e){const t=e.headers.get(Ki);if(!t||!t.match(gS))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function vS(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function bS(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const yS=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Kt(e){if(!yS.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function wi(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ws(e){return JSON.parse(JSON.stringify(e))}var xS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const jt=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),wS=[502,503,504];async function Hs(e){var t;if(!lS(e))throw new Ji(jt(e),0);if(wS.includes(e.status))throw new Ji(jt(e),e.status);let n;try{n=await e.json()}catch(a){throw new vc(jt(a),a)}let r;const i=mS(e);if(i&&i.getTime()>=mc["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new $s(jt(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new mt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new $s(jt(n),e.status,n.weak_password.reasons);throw new K0(jt(n),e.status||500,r)}const SS=(e,t,n,r)=>{const i={method:e,headers:t?.headers||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function X(e,t,n,r){var i;const a=Object.assign({},r?.headers);a[Ki]||(a[Ki]=mc["2024-01-01"].name),r?.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const o=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(o.redirect_to=r.redirectTo);const s=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await kS(e,t,n+s,{headers:a,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}}async function kS(e,t,n,r,i,a){const o=SS(t,r,i,a);let s;try{s=await e(n,Object.assign({},o))}catch(l){throw console.error(l),new Ji(jt(l),0)}if(s.ok||await Hs(s),r?.noResolveJson)return s;try{return await s.json()}catch(l){await Hs(l)}}function ct(e){var t;let n=null;PS(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=aS(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Gs(e){const t=ct(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function vt(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function CS(e){return{data:e,error:null}}function ES(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a}=e,o=xS(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),s={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a},l=Object.assign({},o);return{data:{properties:s,user:l},error:null}}function _S(e){return e}function PS(e){return e.access_token&&e.refresh_token&&e.expires_in}const Si=["global","local","others"];var IS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class AS{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=xc(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=Si[0]){if(Si.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Si.join(", ")}`);try{return await X(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Y(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await X(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:vt})}catch(r){if(Y(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=IS(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await X(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:ES,redirectTo:n?.redirectTo})}catch(n){if(Y(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await X(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:vt})}catch(n){if(Y(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,a,o,s,l;try{const u={nextPage:null,lastPage:0,total:0},d=await X(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:_S});if(d.error)throw d.error;const c=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(s=d.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(g.split(";")[1].split("=")[1]);u[`${m}Page`]=v}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},c),u),error:null}}catch(u){if(Y(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Kt(t);try{return await X(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:vt})}catch(n){if(Y(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Kt(t);try{return await X(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:vt})}catch(r){if(Y(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Kt(t);try{return await X(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:vt})}catch(r){if(Y(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Kt(t.userId);try{const{data:n,error:r}=await X(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Y(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Kt(t.userId),Kt(t.id);try{return{data:await X(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Y(n))return{data:null,error:n};throw n}}}function Vs(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function DS(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Jt={debug:!!(globalThis&&yc()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class wc extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class TS extends wc{}async function jS(e,t,n){Jt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Jt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Jt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{Jt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Jt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new TS(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Jt.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}DS();const OS={url:q0,storageKey:W0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:H0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ks(e,t,n){return await n()}const Yt={};class On{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=On.nextInstanceID,On.nextInstanceID+=1,this.instanceID>0&&Ze()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},OS),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new AS({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=xc(i.fetch),this.lock=i.lock||Ks,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Ze()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=jS:this.lock=Ks,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:yc()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Vs(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Vs(this.memoryStorage)),Ze()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=Yt[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Yt[this.storageKey]=Object.assign(Object.assign({},Yt[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Yt[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Yt[this.storageKey]=Object.assign(Object.assign({},Yt[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${gc}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=sS(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Ze()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),X0(a)){const l=(t=a.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:s}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",s),await this._saveSession(o),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Y(n)?{error:n}:{error:new vc("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const a=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t?.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t?.options)===null||i===void 0?void 0:i.captchaToken}},xform:ct}),{data:o,error:s}=a;if(s||!o)return{data:{user:null,session:null},error:s};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(a){if(Y(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var n,r,i;try{let a;if("email"in t){const{email:d,password:c,options:h}=t;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await Vt(this.storage,this.storageKey)),a=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h?.emailRedirectTo,body:{email:d,password:c,data:(n=h?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:f,code_challenge_method:g},xform:ct})}else if("phone"in t){const{phone:d,password:c,options:h}=t;a=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:c,data:(r=h?.data)!==null&&r!==void 0?r:{},channel:(i=h?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:ct})}else throw new er("You must provide either an email or phone number and a password");const{data:o,error:s}=a;if(s||!o)return{data:{user:null,session:null},error:s};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(a){if(Y(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let n;if("email"in t){const{email:a,password:o,options:s}=t;n=await X(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:Gs})}else if("phone"in t){const{phone:a,password:o,options:s}=t;n=await X(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:Gs})}else throw new er("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Zn}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Y(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,i,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,i,a,o,s,l,u,d,c,h,f;let g,v;if("message"in t)g=t.message,v=t.signature;else{const{chain:m,wallet:b,statement:S,options:x}=t;let E;if(Ze())if(typeof b=="object")E=b;else{const y=window;if("solana"in y&&typeof y.solana=="object"&&("signIn"in y.solana&&typeof y.solana.signIn=="function"||"signMessage"in y.solana&&typeof y.solana.signMessage=="function"))E=y.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!x?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=b}const w=new URL((n=x?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in E&&E.signIn){const y=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x?.signInWithSolana),{version:"1",domain:w.host,uri:w.href}),S?{statement:S}:null));let P;if(Array.isArray(y)&&y[0]&&typeof y[0]=="object")P=y[0];else if(y&&typeof y=="object"&&"signedMessage"in y&&"signature"in y)P=y;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)g=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),v=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${w.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...S?["",S,""]:[""],"Version: 1",`URI: ${w.href}`,`Issued At: ${(i=(r=x?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=x?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((o=x?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((s=x?.signInWithSolana)===null||s===void 0)&&s.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((l=x?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((u=x?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((c=(d=x?.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||c===void 0)&&c.length?["Resources",...x.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const y=await E.signMessage(new TextEncoder().encode(g),"utf8");if(!y||!(y instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=y}}try{const{data:m,error:b}=await X(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:iS(v)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:ct});if(b)throw b;return!m||!m.session||!m.user?{data:{user:null,session:null},error:new Zn}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:Object.assign({},m),error:b})}catch(m){if(Y(m))return{data:{user:null,session:null},error:m};throw m}}async _exchangeCodeForSession(t){const n=await Dt(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:a,error:o}=await X(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:ct});if(await gt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Zn}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:o})}catch(a){if(Y(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:a,nonce:o}=t,s=await X(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:ct}),{data:l,error:u}=s;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Zn}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(n){if(Y(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,i,a,o;try{if("email"in t){const{email:s,options:l}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Vt(this.storage,this.storageKey));const{error:c}=await X(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:(n=l?.data)!==null&&n!==void 0?n:{},create_user:(r=l?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:c}}if("phone"in t){const{phone:s,options:l}=t,{data:u,error:d}=await X(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:s,data:(i=l?.data)!==null&&i!==void 0?i:{},create_user:(a=l?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(o=l?.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u?.message_id},error:d}}throw new er("You must provide either an email or phone number.")}catch(s){if(Y(s))return{data:{user:null,session:null},error:s};throw s}}async verifyOtp(t){var n,r;try{let i,a;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,a=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:s}=await X(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:ct});if(s)throw s;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(Y(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var n,r,i;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await Vt(this.storage,this.storageKey)),await X(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:CS})}catch(a){if(Y(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new mt;const{error:i}=await X(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(Y(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:a}=t,{error:o}=await X(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:i,options:a}=t,{data:o,error:s}=await X(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:o?.message_id},error:s}}throw new er("You must provide either an email or phone number and a type")}catch(n){if(Y(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Dt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<bi:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await Dt(this.userStorage,this.storageKey+"-user");o?.user?t.user=o.user:t.user=wi()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,d))})}return{data:{session:t},error:null}}const{session:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await X(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:vt}):await this._useSession(async n=>{var r,i,a;const{data:o,error:s}=n;if(s)throw s;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new mt}:await X(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:vt})})}catch(n){if(Y(n))return Y0(n)&&(await this._removeSession(),await gt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:a}=r;if(a)throw a;if(!i.session)throw new mt;const o=i.session;let s=null,l=null;this.flowType==="pkce"&&t.email!=null&&([s,l]=await Vt(this.storage,this.storageKey));const{data:u,error:d}=await X(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:s,code_challenge_method:l}),jwt:o.access_token,xform:vt});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Y(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new mt;const n=Date.now()/1e3;let r=n,i=!0,a=null;const{payload:o}=xi(t.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{session:s,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!s)return{data:{user:null,session:null},error:null};a=s}else{const{data:s,error:l}=await this._getUser(t.access_token);if(l)throw l;a={access_token:t.access_token,refresh_token:t.refresh_token,user:s.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(Y(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:s}=n;if(s)throw s;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!t?.refresh_token)throw new mt;const{session:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Y(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Ze())throw new tr("No browser detected.");if(t.error||t.error_description||t.error_code)throw new tr(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Ms("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new tr("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Ms("No code detected.");const{data:S,error:x}=await this._exchangeCodeForSession(t.code);if(x)throw x;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:a,refresh_token:o,expires_in:s,expires_at:l,token_type:u}=t;if(!a||!s||!o||!u)throw new tr("No session defined in URL");const d=Math.round(Date.now()/1e3),c=parseInt(s);let h=d+c;l&&(h=parseInt(l));const f=h-d;f*1e3<=Qt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${c}s`);const g=h-c;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,d);const{data:v,error:m}=await this._getUser(a);if(m)throw m;const b={provider_token:r,provider_refresh_token:i,access_token:a,expires_in:c,expires_at:h,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:t.type},error:null}}catch(r){if(Y(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Dt(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return{error:a};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:s}=await this.admin.signOut(o,t);if(s&&!(J0(s)&&(s.status===404||s.status===401||s.status===403)))return{error:s}}return t!=="others"&&(await this._removeSession(),await gt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=oS(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:a},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Vt(this.storage,this.storageKey,!0));try{return await X(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(Y(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Y(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:i}=await this._useSession(async a=>{var o,s,l,u,d;const{data:c,error:h}=a;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await X(this.fetch,"GET",f,{headers:this.headers,jwt:(d=(u=c.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return Ze()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:t.provider,url:r?.url},error:null}}catch(r){if(Y(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:a,error:o}=n;if(o)throw o;return await X(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Y(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await cS(async i=>(i>0&&await uS(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await X(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ct})),(i,a)=>{const o=200*Math.pow(2,i);return a&&yi(a)&&Date.now()+o-r<Qt})}catch(r){if(this._debug(n,"error",r),Y(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Ze()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Dt(this.storage,this.storageKey);if(i&&this.userStorage){let o=await Dt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Zt(this.userStorage,this.storageKey+"-user",o)),i.user=(t=o?.user)!==null&&t!==void 0?t:wi()}else if(i&&!i.user&&!i.user){const o=await Dt(this.storage,this.storageKey+"-user");o&&o?.user?(i.user=o.user,await gt(this.storage,this.storageKey+"-user"),await Zt(this.storage,this.storageKey,i)):i.user=wi()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const a=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<bi;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${bi}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),yi(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:s}=await this._getUser(i.access_token);!s&&o?.user?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new mt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Dr;const{data:a,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!a.session)throw new mt;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const s={session:a.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(a){if(this._debug(i,"error",a),Y(a)){const o={session:null,error:a};return yi(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(t,n)}catch(l){a.push(l)}});if(await Promise.all(o),a.length>0){for(let s=0;s<a.length;s+=1)console.error(a[s]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Zt(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const a=Ws(i);await Zt(this.storage,this.storageKey,a)}else{const i=Ws(n);await Zt(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await gt(this.storage,this.storageKey),await gt(this.storage,this.storageKey+"-code-verifier"),await gt(this.storage,this.storageKey+"-user"),this.userStorage&&await gt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ze()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Qt);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/Qt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Qt}ms, refresh threshold is ${Vi} ticks`),i<=Vi&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof wc)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ze()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,o]=await Vt(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(s.toString())}if(r?.queryParams){const a=new URLSearchParams(r.queryParams);i.push(a.toString())}return r?.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;return a?{data:null,error:a}:await X(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Y(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:a,error:o}=n;if(o)return{data:null,error:o};const s=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:u}=await X(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((i=l?.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(Y(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return{data:null,error:a};const{data:o,error:s}=await X(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return s?{data:null,error:s}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:s})})}catch(n){if(Y(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;return a?{data:null,error:a}:await X(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Y(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=t?.factors||[],i=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:i,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:i},error:a}=t;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=xi(i.access_token);let s=null;o.aal&&(s=o.aal);let l=s;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(c=>c.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=o.amr||[];return{data:{currentLevel:s,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(s=>s.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(s=>s.kid===t),r&&this.jwks_cached_at+V0>i)return r;const{data:a,error:o}=await X(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,r=a.keys.find(s=>s.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:f,error:g}=await this.getSession();if(g||!f.session)return{data:null,error:g};r=f.session.access_token}const{header:i,payload:a,signature:o,raw:{header:s,payload:l}}=xi(r);n?.allowExpired||vS(a.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!u){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:a,header:i,signature:o},error:null}}const d=bS(i.alg),c=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,c,o,rS(`${s}.${l}`)))throw new Yi("Invalid JWT signature");return{data:{claims:a,header:i,signature:o},error:null}}catch(r){if(Y(r))return{data:null,error:r};throw r}}}On.nextInstanceID=0;const NS=On;class RS extends NS{constructor(t){super(t)}}var LS=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(d){try{u(r.next(d))}catch(c){o(c)}}function l(d){try{u(r.throw(d))}catch(c){o(c)}}function u(d){d.done?a(d.value):i(d.value).then(s,l)}u((r=r.apply(e,t||[])).next())})};class FS{constructor(t,n,r){var i,a,o;this.supabaseUrl=t,this.supabaseKey=n;const s=z0(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const l=`sb-${s.hostname.split(".")[0]}-auth-token`,u={db:j0,realtime:N0,auth:Object.assign(Object.assign({},O0),{storageKey:l}),global:T0},d=U0(r??{},u);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=d.global.headers)!==null&&a!==void 0?a:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(c,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=B0(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Qw(new URL("rest/v1",s).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new I0(this.storageUrl.href,this.headers,this.fetch,r?.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new zw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return LS(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:a,storageKey:o,flowType:s,lock:l,debug:u},d,c){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new RS({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:o,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:a,flowType:s,lock:l,debug:u,fetch:c,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new g0(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r?.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const BS=(e,t,n)=>new FS(e,t,n);function MS(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}MS()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const $S="https://sqfqlnodwjubacmaduzl.supabase.co",US="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNxZnFsbm9kd2p1YmFjbWFkdXpsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgxNzQ2ODUsImV4cCI6MjA3Mzc1MDY4NX0.OtEDSh5UCm8CxWufG_NBLDzgNFI3wnr-oAyaRib_4Mw",ue=BS($S,US),nr=[{key:"date",prompt:"What date are you considering for your photoshoot?"},{key:"location",prompt:"Do you have a preferred location or type of setting?"},{key:"style",prompt:"What style or vibe are you hoping for? (e.g. vintage, modern, candid)"},{key:"inspiration",prompt:"Any inspiration, Pinterest links, or ideas you want to share?"},{key:"notes",prompt:"Any other notes or special requests?"}];function zS({email:e,onComplete:t}){const[n,r]=D.useState(0),[i,a]=D.useState({email:e||""}),[o,s]=D.useState(""),[l,u]=D.useState(!1),[d,c]=D.useState(""),[h,f]=D.useState(!1),g=async v=>{v.preventDefault();const m=nr[n].key;a(b=>({...b,[m]:o})),s(""),n<nr.length-1?r(b=>b+1):(f(!0),await ue.from("photoshoot_plans").insert([{...i,[m]:o}]),f(!1),u(!0),setTimeout(()=>{c(`Here's your custom plan!

- Date: ${i.date||o}
- Location: ${i.location}
- Style: ${i.style}
- Inspiration: ${i.inspiration}
- Notes: ${i.notes}

We'll reach out soon to finalize details and offer creative suggestions!`)},1200),t&&t())};return l?p.jsxs("div",{className:"p-6 text-center",children:[p.jsx("h2",{className:"text-2xl font-display mb-4",children:"Thank you!"}),p.jsx("div",{className:"bg-[#181818] rounded p-4 text-left whitespace-pre-line text-[#E6D5B8] mt-2",children:d||"Generating your plan..."})]}):p.jsxs("div",{className:"p-6",children:[p.jsx("div",{className:"mb-4 text-[#E6D5B8]/80",children:n===0&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"mb-2",children:"Lets plan your perfect photoshoot! Ill ask a few quick questions."}),p.jsx("div",{className:"mb-2",children:"(You can skip any question if youre not sure.)"})]})}),p.jsxs("form",{onSubmit:g,className:"flex flex-col gap-4",children:[p.jsx("label",{className:"font-bold text-[#E6D5B8]",children:nr[n].prompt}),p.jsx("input",{type:"text",value:o,onChange:v=>s(v.target.value),className:"bg-[#1a1a1a] border border-white/20 rounded-md py-2 px-3",autoFocus:!0}),p.jsx("button",{type:"submit",className:"bg-[#E6D5B8] text-[#1a1a1a] font-bold py-2 px-4 rounded-md",disabled:h||!o,children:n<nr.length-1?"Next":"Finish"})]})]})}const Ge=[{key:"greet",prompt:"Hi! I'm your Studio37 virtual agent. Would you like to plan your photoshoot?",type:"greet"},{key:"name",prompt:"Great! What is your name?",type:"input"},{key:"email",prompt:"What is your email address?",type:"input"},{key:"phone",prompt:"Phone number (optional):",type:"input"},{key:"date",prompt:"What date are you considering for your photoshoot?",type:"input"},{key:"location",prompt:"Preferred location or type of setting?",type:"input"},{key:"style",prompt:"What style or vibe are you hoping for? (e.g. vintage, modern, candid)",type:"input"},{key:"inspiration",prompt:"Any inspiration, Pinterest links, or ideas you want to share?",type:"input"},{key:"notes",prompt:"Any other notes or special requests?",type:"input"}];function qS({onComplete:e}){const[t,n]=D.useState(0),[r,i]=D.useState({}),[a,o]=D.useState(""),[s,l]=D.useState([{from:"bot",text:Ge[0].prompt}]),[u,d]=D.useState(!1),[c,h]=D.useState(!1),[f,g]=D.useState(null),[v,m]=D.useState(null),b=async _=>{if(_.preventDefault(),t===0&&a.toLowerCase().includes("no")){l(j=>[...j,{from:"user",text:a},{from:"bot",text:"No problem! If you change your mind, just click the chat again."}]),o(""),h(!0);return}l(j=>[...j,{from:"user",text:a}]);const A=Ge[t].key;if(i(j=>({...j,[A]:a})),o(""),t<Ge.length-1)setTimeout(()=>{l(j=>[...j,{from:"bot",text:Ge[t+1].prompt}]),n(j=>j+1)},500);else{d(!0);const{data:j,error:I}=await ue.from("leads").insert([{name:r.name,email:r.email,phone:r.phone,service:"Photoshoot",status:"New"}]).select(),N=j&&j[0]?.id;g(N);let M=null;if(N){const{data:V}=await ue.from("projects").insert([{lead_id:N,name:`${r.name}'s Photoshoot`,client:r.name,opportunity_amount:0,stage:"Inquiry",notes:r.notes}]).select();M=V&&V[0]?.id,m(M)}if(N){const V=`AI Planner: Date: ${r.date}; Location: ${r.location}; Style: ${r.style}; Inspiration: ${r.inspiration}; Notes: ${r.notes}`;await ue.from("lead_notes").insert([{lead_id:N,note:V,status:"Inquiry"}])}d(!1),l(V=>[...V,{from:"bot",text:"You're all set! We've created your project and will reach out soon. You can continue planning here or close this chat."},{from:"bot",text:"What would you like to do next? (Type: add note, add todo, update info, or 'done' to finish)"}]),h(!1),n(Ge.length),e&&e()}},S=async _=>{_.preventDefault();const A=a.trim().toLowerCase();if(l(j=>[...j,{from:"user",text:a}]),o(""),A==="done"||A==="exit"||A==="close"){l(j=>[...j,{from:"bot",text:"Thank you for planning with Studio37! You can close this chat anytime."}]),h(!0);return}if(A.includes("note")){l(j=>[...j,{from:"bot",text:"Please type your note:"}]),n("add_note");return}if(A.includes("todo")){l(j=>[...j,{from:"bot",text:"Please type your todo/task:"}]),n("add_todo");return}if(A.includes("update")){l(j=>[...j,{from:"bot",text:"What info would you like to update? (name, email, phone, date, location, style, inspiration, notes)"}]),n("update_field");return}l(j=>[...j,{from:"bot",text:"Sorry, I didn't understand. Type: add note, add todo, update info, or 'done'."}])},[x,E]=D.useState(""),w=async _=>{if(_.preventDefault(),!f){l(A=>[...A,{from:"bot",text:"Lead not found. Please try again later."}]),n(Ge.length);return}await ue.from("lead_notes").insert([{lead_id:f,note:a,status:"Update"}]),l(A=>[...A,{from:"user",text:a},{from:"bot",text:"Note added! What next? (add note, add todo, update info, done)"}]),o(""),n(Ge.length)},y=async _=>{if(_.preventDefault(),!v){l(A=>[...A,{from:"bot",text:"Project not found. Please try again later."}]),n(Ge.length);return}await ue.from("project_todos").insert([{project_id:v,task:a}]),l(A=>[...A,{from:"user",text:a},{from:"bot",text:"Todo added! What next? (add note, add todo, update info, done)"}]),o(""),n(Ge.length)},P=async _=>{_.preventDefault();const A=a.trim().toLowerCase();E(A),l(j=>[...j,{from:"user",text:a},{from:"bot",text:`What is the new value for ${A}?`}]),o(""),n("update_value")},L=async _=>{if(_.preventDefault(),!f){l(A=>[...A,{from:"bot",text:"Lead not found. Please try again later."}]),n(Ge.length);return}await ue.from("leads").update({[x]:a}).eq("id",f),l(A=>[...A,{from:"user",text:a},{from:"bot",text:`${x} updated! What next? (add note, add todo, update info, done)`}]),o(""),n(Ge.length)};let O=b;return t===Ge.length&&(O=S),t==="add_note"&&(O=w),t==="add_todo"&&(O=y),t==="update_field"&&(O=P),t==="update_value"&&(O=L),p.jsxs("div",{className:"flex flex-col h-[60vh] md:h-[70vh]",children:[p.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:s.map((_,A)=>p.jsx("div",{className:`max-w-[80%] ${_.from==="bot"?"ml-0 mr-auto bg-[#262626] text-[#E6D5B8]":"ml-auto mr-0 bg-[#E6D5B8] text-[#1a1a1a]"} rounded-lg px-4 py-2 shadow`,children:_.text},A))}),!c&&p.jsxs("form",{onSubmit:O,className:"flex gap-2 p-4 border-t border-white/10",children:[p.jsx("input",{type:"text",value:a,onChange:_=>o(_.target.value),className:"flex-1 bg-[#1a1a1a] border border-white/20 rounded-md py-2 px-3",placeholder:"Type your answer...",autoFocus:!0,disabled:u}),p.jsx("button",{type:"submit",className:"bg-[#E6D5B8] text-[#1a1a1a] font-bold py-2 px-4 rounded-md",disabled:u||!a,children:"Send"})]}),u&&p.jsx("div",{className:"text-center text-[#E6D5B8] py-2",children:"Saving your info..."})]})}const Tr=()=>p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform",children:[p.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),p.jsx("polyline",{points:"12 5 19 12 12 19"})]}),WS=({className:e})=>p.jsx("div",{className:`flex items-center ${e||""}`,children:p.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-white mr-2 flex-shrink-0",children:[p.jsx("path",{d:"M4 5C4 4.44772 4.44772 4 5 4H19C19.5523 4 20 4.44772 20 5V19C20 19.5523 19.5523 20 19 20H5C4.44772 20 4 19.5523 4 19V5Z",stroke:"currentColor",strokeWidth:"1.5"}),p.jsx("rect",{x:"7",y:"7",width:"10",height:"7",rx:"1",stroke:"currentColor",strokeWidth:"1.5"}),p.jsx("path",{d:"M12 11.5C12.8284 11.5 13.5 10.8284 13.5 10C13.5 9.17157 12.8284 8.5 12 8.5C11.1716 8.5 10.5 9.17157 10.5 10C10.5 10.8284 11.1716 11.5 12 11.5Z",fill:"currentColor"}),p.jsx("line",{x1:"6",y1:"16",x2:"18",y2:"16",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})});function HS(){const[e,t]=D.useState(!1),[n,r]=D.useState(!1),i=Ys(),[a,o]=D.useState(()=>typeof window<"u"&&localStorage.getItem("theme")||"dark");D.useEffect(()=>{typeof window<"u"&&(document.documentElement.classList.toggle("dark",a==="dark"),localStorage.setItem("theme",a))},[a]);const s=()=>o(z=>z==="dark"?"light":"dark"),[l,u]=D.useState([]),[d,c]=D.useState(!1),[h,f]=D.useState(""),[g,v]=D.useState(!1),[m,b]=D.useState([]),[S,x]=D.useState(!1),[E,w]=D.useState([]),[y,P]=D.useState(!1),[L,O]=D.useState({about:{title:"",bio:""}}),[_,A]=D.useState([]),[j,I]=D.useState(!1),[N,M]=D.useState(null),[V,te]=D.useState(!1),[de,he]=D.useState(""),[k,ve]=D.useState(!1);D.useEffect(()=>{(i.pathname==="/blog"||n)&&(c(!0),f(""),ue.from("blog_posts").select("id, title, publish_date, created_at, slug, excerpt, author, content, tags, category").order("publish_date",{ascending:!1}).limit(10).then(({data:z,error:ne})=>{ne?(f("Failed to load blog posts."),u([])):!z||!Array.isArray(z)?(f("No blog posts found."),u([])):u(z),c(!1)}))},[i.pathname,n]),D.useEffect(()=>{(i.pathname==="/portfolio"||n)&&(x(!0),ue.from("portfolio_images").select("id, url, category, caption, created_at").order("order_index",{ascending:!0}).order("created_at",{ascending:!1}).limit(24).then(({data:z,error:ne})=>{b(ne?[]:z||[]),x(!1)}))},[i.pathname,n]),D.useEffect(()=>{n&&(P(!0),ue.from("leads").select("*").order("created_at",{ascending:!1}).then(({data:z})=>{w(z||[]),P(!1)}))},[n]),D.useEffect(()=>{ue.from("about").select("id, title, bio, created_at").order("created_at",{ascending:!1}).limit(1).then(({data:z,error:ne})=>{ne||!z||!z[0]?O({about:{title:"About",bio:"Content not available."}}):O({about:{title:z[0].title,bio:z[0].bio}})})},[]);const[fe,C]=D.useState([]);D.useEffect(()=>{ue.from("site_map_order").select("id, page_key, page_label, order_index").order("order_index",{ascending:!0}).order("id",{ascending:!0}).limit(100).then(({data:z,error:ne})=>{!ne&&Array.isArray(z)&&C(z)})},[]),D.useEffect(()=>{n&&(I(!0),ue.from("projects").select("*").order("created_at",{ascending:!1}).then(({data:z})=>{A(z||[]),I(!1)}))},[n]);async function ye(z){await ue.from("leads").insert([{name:z.name,email:z.email,phone:z.phone,service:z.service,status:"New"}]),v(!0)}function xe(){r(!0)}async function pe(z,ne){await ue.from("leads").update({status:ne}).eq("id",z),w(Ce=>Ce.map(Te=>Te.id===z?{...Te,status:ne}:Te))}async function Oe(z){await ue.from("site_content").update({about_title:z.about.title,about_bio:z.about.bio}).eq("id",1),O(z)}async function Ie(z){const{data:ne}=await ue.from("portfolio_images").insert([z]).select();ne&&ne[0]&&b(Ce=>[ne[0],...Ce])}async function Fe(z){await ue.from("portfolio_images").delete().eq("id",z),b(ne=>ne.filter(Ce=>Ce.id!==z))}async function Ae(z){te(!0);const{data:ne,error:Ce}=await ue.from("blog_posts").insert([z]).select();Ce?he("Failed to create post."):u(Te=>[ne[0],...Te]),te(!1)}async function $(z,ne){te(!0),await ue.from("blog_posts").update(ne).eq("id",z),u(Ce=>Ce.map(Te=>Te.id===z?{...Te,...ne}:Te)),te(!1)}async function ae(z){await ue.from("blog_posts").delete().eq("id",z),u(ne=>ne.filter(Ce=>Ce.id!==z))}return p.jsxs("div",{className:"min-h-screen bg-[#181818] text-[#F3E3C3] font-sans antialiased transition-colors duration-300",children:[p.jsxs("button",{onClick:()=>ve(!0),className:"fixed bottom-6 right-6 z-50 bg-[#F3E3C3] text-[#1a1a1a] rounded-full shadow-lg p-4 flex items-center gap-2 hover:scale-105 transition-transform","aria-label":"Open Photoshoot Planner Chat Bot",style:{boxShadow:"0 4px 16px rgba(0,0,0,0.25)"},children:[p.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("circle",{cx:"12",cy:"12",r:"10"}),p.jsx("path",{d:"M8 15s1.5 2 4 2 4-2 4-2"}),p.jsx("line",{x1:"9",y1:"9",x2:"9.01",y2:"9"}),p.jsx("line",{x1:"15",y1:"9",x2:"15.01",y2:"9"})]}),p.jsx("span",{className:"font-bold hidden md:inline",children:"Plan My Shoot"})]}),k&&p.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-end md:items-center justify-center z-[100]",children:p.jsxs("div",{className:"bg-[#232323] dark:bg-white rounded-t-2xl md:rounded-lg shadow-2xl w-full max-w-md mx-auto p-0 md:p-0 relative animate-fadeInUp",children:[p.jsx("button",{onClick:()=>ve(!1),className:"absolute top-2 right-4 text-white dark:text-black text-2xl",children:""}),p.jsxs("div",{className:"p-4 border-b border-white/10 flex items-center gap-2",children:[p.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("circle",{cx:"12",cy:"12",r:"10"}),p.jsx("path",{d:"M8 15s1.5 2 4 2 4-2 4-2"}),p.jsx("line",{x1:"9",y1:"9",x2:"9.01",y2:"9"}),p.jsx("line",{x1:"15",y1:"9",x2:"15.01",y2:"9"})]}),p.jsx("span",{className:"font-display text-lg font-bold",children:"Photoshoot Planner"})]}),p.jsx(qS,{})]})}),p.jsx(VS,{isMenuOpen:e,setIsMenuOpen:t,theme:a,toggleTheme:s,showAdminButton:!i.pathname.includes("admin")}),p.jsx("main",{className:"pt-20",children:p.jsxs(jc,{children:[p.jsx(ut,{path:"/",element:p.jsx(KS,{})}),p.jsx(ut,{path:"/about",element:p.jsx(JS,{content:L.about})}),p.jsx(ut,{path:"/services",element:p.jsx(ZS,{})}),p.jsx(ut,{path:"/portfolio",element:p.jsx(ek,{isUnlocked:g,onUnlock:ye,images:m})}),p.jsx(ut,{path:"/blog",element:p.jsx(sk,{posts:l,loading:d,error:h})}),p.jsx(ut,{path:"/blog/:slug",element:p.jsx(GS,{})}),p.jsx(ut,{path:"/contact",element:p.jsx(nk,{})}),p.jsx(ut,{path:"/admin",element:p.jsx(Js,{onLogin:xe})}),p.jsx(ut,{path:"/admin/dashboard",element:n?p.jsx(rk,{leads:E,updateLeadStatus:pe,content:L,updateContent:Oe,portfolioImages:m,addPortfolioImage:Ie,deletePortfolioImage:Fe,blogPosts:l,createBlogPost:Ae,updateBlogPost:$,deleteBlogPost:ae,blogEdit:N,setBlogEdit:M,blogSaving:V,blogAdminError:de,projects:_,projectsLoading:j}):p.jsx(Js,{onLogin:xe})})]})}),p.jsx(lk,{})]})}function GS(){const{slug:e}=Oc(),[t,n]=K.useState(null),[r,i]=K.useState(!0),[a,o]=K.useState(""),s=Xs();return K.useEffect(()=>{i(!0),o(""),ue.from("blog_posts").select("*").eq("slug",e).single().then(({data:l,error:u})=>{u||!l?(o("Blog post not found."),n(null)):n(l),i(!1)})},[e]),r?p.jsx("div",{className:"text-[#F3E3C3] text-center py-10",children:"Loading..."}):a?p.jsx("div",{className:"text-red-400 text-center py-10",children:a}):t?p.jsx("div",{className:"py-20 md:py-28 bg-[#212121]",children:p.jsxs("div",{className:"container mx-auto px-6 max-w-3xl",children:[p.jsx("button",{onClick:()=>s("/blog"),className:"text-[#F3E3C3] mb-4 hover:underline",children:" Back to Blog"}),p.jsx("h1",{className:"text-4xl font-display mb-2 text-white",children:t.title}),p.jsxs("div",{className:"text-xs text-[#F3E3C3]/60 mb-4",children:[t.author,"  ",t.publish_date?new Date(t.publish_date).toLocaleDateString():""]}),p.jsx("div",{className:"text-[#F3E3C3]/80 mb-6",children:t.excerpt}),p.jsx("div",{className:"prose prose-invert max-w-none text-[#F3E3C3]/90",children:p.jsx(Ia,{remarkPlugins:[rc],children:t.content||""})}),p.jsxs("div",{className:"mt-8 text-xs text-[#F3E3C3]/60",children:["Tags: ",Array.isArray(t.tags)?t.tags.join(", "):typeof t.tags=="string"?t.tags:""]})]})}):null}const VS=({isMenuOpen:e,setIsMenuOpen:t,theme:n,toggleTheme:r,showAdminButton:i})=>{const a=Ys(),o=[{page:"/",label:"Home"},{page:"/about",label:"About"},{page:"/services",label:"Services"},{page:"/portfolio",label:"Portfolio"},{page:"/blog",label:"Blog"},{page:"/contact",label:"Contact"},{page:"book",label:"Book a Session",external:!0,url:"https://book.usesession.com/i/sbDooN5rcH"}],s=({page:l,label:u,external:d,url:c})=>d?p.jsx("a",{href:c,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 text-sm uppercase tracking-widest transition-colors duration-300 text-[#F3E3C3]/70 hover:text-white font-bold",children:u}):p.jsx(tt,{to:l,className:`px-4 py-2 text-sm uppercase tracking-widest transition-colors duration-300 ${a.pathname===l?"text-white":"text-[#F3E3C3]/70 hover:text-white"}`,children:u});return p.jsxs("header",{className:"fixed top-0 left-0 w-full z-40 bg-[#232323] shadow-lg",children:[p.jsxs("div",{className:"container mx-auto px-6 py-4 flex justify-between items-center",children:[p.jsxs(tt,{to:"/",className:"flex items-center gap-4",children:[p.jsx(WS,{}),p.jsx("span",{className:"font-display text-xl font-bold tracking-tight text-white",children:"Studio37"})]}),p.jsx("nav",{className:"hidden md:flex gap-2 items-center",children:o.map(l=>p.jsx(s,{...l},l.page))}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:r,className:"text-[#F3E3C3] text-xl px-2","aria-label":"Toggle Theme",children:n==="dark"?"":""}),i&&p.jsx(tt,{to:"/admin",className:"text-xs px-2 py-1 rounded bg-transparent text-[#F3E3C3]/60 hover:text-[#F3E3C3] border border-transparent hover:border-[#F3E3C3]/30 transition",style:{fontSize:"0.85rem"},"aria-label":"Admin Login",children:"Admin"}),p.jsx("button",{onClick:()=>t(!e),className:"text-white md:hidden",children:e?p.jsx("span",{children:""}):p.jsx("span",{children:""})})]})]}),e&&p.jsx("div",{className:"md:hidden bg-[#232323]",children:p.jsx("nav",{className:"flex flex-col items-center py-4",children:o.map(l=>p.jsx(s,{...l},l.page))})})]})},KS=()=>p.jsxs("div",{className:"relative h-screen flex items-center justify-center text-center text-white px-4 -mt-20",children:[p.jsx("img",{src:"https://res.cloudinary.com/dmjxho2rl/image/upload/a_vflip/l_image:upload:My%20Brand:IMG_2115_mtuowt/c_scale,fl_relative,w_0.35/o_100/fl_layer_apply,g_north,x_0.03,y_0.04/v1758172510/A4B03835-ED8B-4FBB-A27E-1F2EE6CA1A18_1_105_c_gstgil.jpg",alt:"Studio37 Hero",className:"absolute inset-0 w-full h-full object-cover"}),p.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm z-0 pointer-events-none"}),p.jsxs("div",{className:"relative z-10",children:[p.jsx("h1",{className:"text-3xl xs:text-4xl sm:text-5xl md:text-7xl lg:text-8xl font-display mb-4 leading-tight break-words max-w-full",children:"Capture. Create. Captivate."}),p.jsx("p",{className:"text-base sm:text-lg md:text-xl max-w-xs sm:max-w-2xl mx-auto mb-8 text-[#F3E3C3]/80",children:"Vintage heart, modern vision. Full-service photography and content strategy for brands ready to conquer the world from Houston, TX."}),p.jsx("div",{className:"space-y-4 sm:space-x-4 flex flex-col sm:flex-row items-center justify-center w-full",children:p.jsxs(tt,{to:"/portfolio",className:"group inline-flex items-center bg-[#F3E3C3] text-[#1a1a1a] font-bold py-3 px-8 rounded-full shadow-lg transition-transform hover:scale-105 w-full sm:w-auto",children:["View Our Work ",p.jsx(Tr,{})]})})]})]}),JS=({content:e})=>p.jsx("div",{className:"py-20 md:py-32 bg-[#212121]",children:p.jsx("div",{className:"container mx-auto px-6",children:p.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[p.jsxs("div",{className:"order-2 md:order-1",children:[p.jsx("h2",{className:"text-4xl md:text-5xl font-display mb-6",children:e.title||"Loading..."}),p.jsx("p",{className:"text-lg text-[#F3E3C3]/80 leading-relaxed",children:e.bio||""})]}),p.jsx("div",{className:"order-1 md:order-2",children:p.jsxs("div",{className:"polaroid mx-auto max-w-sm",children:[p.jsx("img",{src:"https://placehold.co/500x500/cccccc/333333?text=Christian+%26+Caittie",alt:"Christian and Caittie",className:"w-full"}),p.jsx("p",{className:"text-center text-black font-display text-lg mt-4",children:"The Studio37 Team"})]})})]})})}),YS=[{name:"Director Package",description:"Our most comprehensive package for brands and businesses. Includes full content strategy, creative direction, multi-location photo/video shoots, and post-production. Ideal for campaigns, launches, and ongoing brand storytelling.",price:"$2,000+"},{name:"Producer Package",description:"Perfect for small businesses and creators. Includes a half-day photo/video shoot, creative planning, and a set of edited images and short-form video content for social media and web.",price:"$1,200+"},{name:"Brand Builder",description:"A focused session for new businesses or rebrands. Includes headshots, team photos, and product or location images, plus a content strategy consult.",price:"$750+"},{name:"Content Day",description:"A quick, high-impact shoot for monthly content refreshes. Includes up to 2 hours on-site, 20 edited images, and 2 short video clips.",price:"$500+"}],XS=[{name:"Mini Reel",description:"A quick 15-minute session for individuals or couples. Includes 15 edited photos, a free 1-minute movie reel of your shoot, and a complimentary Polaroid print.",price:"$75"},{name:"Full Episode",description:"A 30-minute session for individuals, couples, or small families. Includes 30 edited photos, a free 1-minute movie reel of your shoot, and a complimentary Polaroid print.",price:"$150"},{name:"Movie Premier",description:"A deluxe 60-minute session for couples, families, or creative portraits. Includes 60 edited photos, a free 1-minute movie reel of your shoot, and a complimentary Polaroid print.",price:"$300"}],QS=[{name:"Event Coverage",description:"Professional photography for events, parties, and gatherings. Includes candid and group shots, with fast turnaround on edited images.",price:"$500+"},{name:"Wedding & Engagement",description:"Custom packages for weddings and engagements. Includes planning consult, full-day coverage, and a highlight movie reel.",price:"Contact for Quote"},{name:"Real Estate & Architecture",description:"High-quality images and video for real estate listings, Airbnbs, and architectural projects. Includes drone options.",price:"$250+"}];function ki({name:e,description:t,price:n}){return p.jsxs("div",{className:"bg-[#262626] rounded-lg shadow-lg p-6 flex flex-col items-start",children:[p.jsx("h4",{className:"text-xl font-display mb-2 text-white",children:e}),p.jsx("div",{className:"text-[#F3E3C3]/80 mb-4",children:t}),n&&p.jsx("div",{className:"text-lg font-bold text-[#F3E3C3] mt-auto",children:n})]})}const ZS=()=>p.jsx("div",{className:"py-20 md:py-28",children:p.jsxs("div",{className:"container mx-auto px-6",children:[p.jsxs("section",{id:"pro-packages",className:"mb-20",children:[p.jsx("h3",{className:"text-3xl font-display text-center mb-10",children:"Content & Marketing Packages"}),p.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:YS.map(e=>p.jsx(ki,{...e},e.name))})]}),p.jsxs("section",{id:"personal-packages",className:"mb-20",children:[p.jsx("h3",{className:"text-3xl font-display text-center mb-10",children:"Portrait Packages"}),p.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:XS.map(e=>p.jsx(ki,{...e},e.name))})]}),p.jsxs("section",{id:"other-services",children:[p.jsx("h3",{className:"text-3xl font-display text-center mb-10",children:"Additional Creative & Event Services"}),p.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:QS.map(e=>p.jsx(ki,{...e},e.name))})]})]})}),ek=({isUnlocked:e,onUnlock:t,images:n})=>{const[r,i]=D.useState("All"),a=["All",...new Set(n.map(s=>s.category))],o=r==="All"?n:n.filter(s=>s.category===r);return p.jsx("div",{className:"py-20 md:py-28",children:p.jsxs("div",{className:"container mx-auto px-6",children:[p.jsxs("div",{className:"text-center mb-12",children:[p.jsx("h2",{className:"text-4xl md:text-5xl font-display",children:"Our Work"}),p.jsx("p",{className:"text-lg text-[#F3E3C3]/70 mt-4 max-w-2xl mx-auto",children:"A curated selection of our favorite moments and projects."})]}),!e&&p.jsx(tk,{onUnlock:t}),e&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"flex flex-wrap gap-2 justify-center mb-8",children:a.map(s=>p.jsx("button",{onClick:()=>i(s),className:`px-6 py-2 text-sm font-semibold rounded-full transition-colors ${r===s?"bg-[#F3E3C3] text-[#1a1a1a]":"bg-[#262626] hover:bg-[#333]"}`,children:s},s))}),p.jsx("div",{className:"columns-1 sm:columns-2 md:columns-3 lg:columns-4 gap-6 space-y-6",children:o.map(s=>p.jsx("div",{className:"break-inside-avoid",children:p.jsx("img",{src:s.url,alt:`${s.category} photography`,className:"w-full rounded-lg shadow-lg hover:opacity-90 transition-opacity"})},s.id))})]})]})})},tk=({onUnlock:e})=>{const[t,n]=D.useState({name:"",email:"",service:"",phone:""}),[r,i]=D.useState(!1),[a,o]=D.useState(!1),s=u=>{n({...t,[u.target.name]:u.target.value})},l=u=>{u.preventDefault(),t.name&&t.email&&(e(t),i(!0))};return r?p.jsxs("div",{className:"text-center bg-[#262626] rounded-lg p-8 max-w-lg mx-auto relative",children:[p.jsx("h3",{className:"text-2xl font-display text-white mb-2",children:"Thank You!"}),p.jsx("p",{className:"text-[#F3E3C3]/80",children:"The portfolio is now unlocked. Check your email for a 10% off coupon!"}),p.jsxs("p",{className:"text-[#F3E3C3]/80 mt-4",children:["Want to plan your shoot?"," ",p.jsx("button",{onClick:()=>o(!0),className:"underline text-[#F3E3C3]",children:"Try our Conversational AI Planner"})]}),a&&p.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",children:p.jsxs("div",{className:"bg-[#232323] rounded-lg shadow-lg max-w-md w-full relative",children:[p.jsx("button",{onClick:()=>o(!1),className:"absolute top-2 right-2 text-white text-xl",children:""}),p.jsx(zS,{email:t.email,onComplete:()=>{}})]})})]}):p.jsxs("div",{className:"bg-[#262626] rounded-lg shadow-xl p-8 md:p-12 max-w-2xl mx-auto border border-white/10",children:[p.jsx("h3",{className:"text-2xl md:text-3xl font-display text-center text-white mb-2",children:"Unlock the Portfolio"}),p.jsx("p",{className:"text-center text-[#F3E3C3]/70 mb-8",children:"Submit your info to view our work and receive a 10% off coupon for your first service!"}),p.jsxs("form",{onSubmit:l,className:"space-y-6",children:[p.jsx("input",{type:"text",name:"name",placeholder:"Your Name",required:!0,onChange:s,className:"w-full bg-[#1a1a1a] border border-white/20 rounded-md py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#F3E3C3]"}),p.jsx("input",{type:"email",name:"email",placeholder:"Your Email",required:!0,onChange:s,className:"w-full bg-[#1a1a1a] border border-white/20 rounded-md py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#F3E3C3]"}),p.jsx("input",{type:"tel",name:"phone",placeholder:"Your Phone (Optional)",onChange:s,className:"w-full bg-[#1a1a1a] border border-white/20 rounded-md py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#F3E3C3]"}),p.jsxs("select",{name:"service",onChange:s,className:"w-full bg-[#1a1a1a] border border-white/20 rounded-md py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#F3E3C3]",children:[p.jsx("option",{value:"",children:"Service of Interest (Optional)"}),p.jsx("option",{children:"Director Package"}),p.jsx("option",{children:"Producer Package"}),p.jsx("option",{children:"Wedding"}),p.jsx("option",{children:"Portrait"}),p.jsx("option",{children:"Other"})]}),p.jsxs("button",{type:"submit",className:"w-full group inline-flex items-center justify-center bg-[#F3E3C3] text-[#1a1a1a] font-bold py-3 px-8 rounded-full shadow-lg transition-transform hover:scale-105",children:["Unlock & Get Coupon ",p.jsx(Tr,{})]})]})]})},nk=()=>p.jsx("div",{className:"py-20 md:py-28 bg-[#212121]",children:p.jsxs("div",{className:"container mx-auto px-6",children:[p.jsxs("div",{className:"text-center mb-12",children:[p.jsx("h2",{className:"text-4xl md:text-5xl font-display",children:"Get In Touch"}),p.jsx("p",{className:"text-lg text-[#F3E3C3]/70 mt-4 max-w-2xl mx-auto",children:"Ready to start your project? Let's talk. We serve Houston, TX and the surrounding 50-mile radius."})]}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-start",children:[p.jsxs("form",{className:"space-y-6",children:[p.jsx("input",{type:"text",placeholder:"Your Name",className:"w-full bg-[#1a1a1a] border border-white/20 rounded-md py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#F3E3C3]"}),p.jsx("input",{type:"email",placeholder:"Your Email",className:"w-full bg-[#1a1a1a] border border-white/20 rounded-md py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#F3E3C3]"}),p.jsx("textarea",{placeholder:"Your Message",rows:"5",className:"w-full bg-[#1a1a1a] border border-white/20 rounded-md py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#F3E3C3]"}),p.jsxs("button",{type:"submit",className:"group inline-flex items-center bg-[#F3E3C3] text-[#1a1a1a] font-bold py-3 px-8 rounded-full shadow-lg transition-transform hover:scale-105",children:["Send Message ",p.jsx(Tr,{})]})]}),p.jsxs("div",{className:"text-[#F3E3C3]/80 space-y-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-xl font-display text-white",children:"Contact Info"}),p.jsxs("p",{children:["Email: ",p.jsx("a",{href:"mailto:sales@studio37.cc",className:"hover:text-white transition",children:"sales@studio37.cc"})]}),p.jsxs("p",{children:["Phone: ",p.jsx("a",{href:"tel:1-832-713-9944",className:"hover:text-white transition",children:"(832) 713-9944"})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-xl font-display text-white",children:"Location"}),p.jsx("p",{children:"Serving the Greater Houston Area"}),p.jsx("p",{children:"Based near Porter, TX 77362"})]}),p.jsx("div",{className:"mt-4",children:p.jsx("iframe",{title:"Map of Houston",src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d111049.9644254322!2d-95.469384!3d29.817478!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8640b8b1b8b1b8b1%3A0x8b1b8b1b8b1b8b1b!2sHouston%2C%20TX!5e0!3m2!1sen!2sus!4v1631910000000!5m2!1sen!2sus",width:"100%",height:"300",style:{border:0},allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",className:"rounded-lg shadow-lg w-full"})})]})]})]})}),Js=({onLogin:e})=>{const[t,n]=D.useState(""),[r,i]=D.useState(""),[a,o]=D.useState(""),s=Xs(),l=u=>{u.preventDefault(),t.trim().toLowerCase()==="admin"&&r.trim()==="studio37admin"?(e(),s("/admin/dashboard")):o("Invalid username or password.")};return p.jsx("div",{className:"py-20 md:py-32 flex items-center justify-center",children:p.jsxs("div",{className:"bg-[#232323] rounded-lg shadow-xl p-8 md:p-12 max-w-md w-full border border-white/10",children:[p.jsx("h2",{className:"text-3xl font-display text-center mb-8",children:"Admin Login"}),p.jsxs("form",{onSubmit:l,className:"space-y-6",children:[p.jsx("input",{type:"text",value:t,onChange:u=>n(u.target.value),placeholder:"Username",required:!0,className:"w-full bg-[#181818] border border-white/20 rounded-md py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#F3E3C3]"}),p.jsx("input",{type:"password",value:r,onChange:u=>i(u.target.value),placeholder:"Password",required:!0,className:"w-full bg-[#181818] border border-white/20 rounded-md py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#F3E3C3]"}),a&&p.jsx("p",{className:"text-red-400 text-sm",children:a}),p.jsxs("button",{type:"submit",className:"w-full group inline-flex items-center justify-center bg-[#F3E3C3] text-[#232323] font-bold py-3 px-8 rounded-full shadow-lg transition-transform hover:scale-105",children:["Login ",p.jsx(Tr,{})]})]})]})})},rk=({leads:e,updateLeadStatus:t,content:n,updateContent:r,portfolioImages:i,addPortfolioImage:a,deletePortfolioImage:o,blogPosts:s,createBlogPost:l,updateBlogPost:u,deleteBlogPost:d,blogEdit:c,setBlogEdit:h,blogSaving:f,blogAdminError:g,projects:v,projectsLoading:m})=>{const[b,S]=D.useState(null),[x,E]=D.useState([]),[w,y]=D.useState(!1),[P,L]=D.useState(""),[O,_]=D.useState("crm"),[A,j]=D.useState("home"),[I,N]=D.useState([]),[M,V]=D.useState(!1),[te,de]=D.useState(!1),[he,k]=D.useState({name:"",client:"",opportunity_amount:"",stage:"Inquiry",notes:""}),ve=["Inquiry","Proposal","Booked","In Progress","Delivered","Closed"];D.useEffect(()=>{O==="projects"&&(V(!0),ue.from("projects").select("*").eq("is_internal",!0).order("created_at",{ascending:!1}).then(({data:$})=>{N($||[]),V(!1)}))},[O]);const fe=async($,ae=!1)=>{$.preventDefault();const{data:z,error:ne}=await ue.from("projects").insert([{...he,is_internal:ae,opportunity_amount:parseFloat(he.opportunity_amount)||0}]).select();!ne&&z&&z[0]&&(ae&&N(Ce=>[z[0],...Ce]),de(!1),k({name:"",client:"",opportunity_amount:"",stage:"Inquiry",notes:""}))},C=e.length,ye=e.filter($=>$.status==="Booked").length,xe=C>0?(ye/C*100).toFixed(1):"0.0",pe=e.reduce(($,ae)=>(ae.service&&($[ae.service]=($[ae.service]||0)+1),$),{}),Oe=Object.entries(pe).sort(($,ae)=>ae[1]-$[1])[0]?.[0]||"N/A",Ie=s.length,Fe=i.length,Ae=v.reduce(($,ae)=>$+(parseFloat(ae.opportunity_amount)||0),0);return p.jsx("div",{className:"py-20 md:py-28",children:p.jsxs("div",{className:"container mx-auto px-6",children:[p.jsx("h2",{className:"text-4xl md:text-5xl font-display mb-10",children:"Admin Dashboard"}),p.jsxs("div",{className:"flex border-b border-white/20 mb-8 flex-wrap",children:[p.jsx("button",{onClick:()=>_("crm"),className:`py-2 px-6 text-lg ${O==="crm"?"text-white border-b-2 border-[#F3E3C3]":"text-white/50"}`,children:"CRM (Leads)"}),p.jsx("button",{onClick:()=>_("cms"),className:`py-2 px-6 text-lg ${O==="cms"?"text-white border-b-2 border-[#F3E3C3]":"text-white/50"}`,children:"CMS (Content)"}),p.jsx("button",{onClick:()=>_("blog"),className:`py-2 px-6 text-lg ${O==="blog"?"text-white border-b-2 border-[#F3E3C3]":"text-white/50"}`,children:"Blog"}),p.jsx("button",{onClick:()=>_("sitemap"),className:`py-2 px-6 text-lg ${O==="sitemap"?"text-white border-b-2 border-[#F3E3C3]":"text-white/50"}`,children:"Site Map"}),p.jsx("button",{onClick:()=>_("analytics"),className:`py-2 px-6 text-lg ${O==="analytics"?"text-white border-b-2 border-[#F3E3C3]":"text-white/50"}`,children:"Analytics"}),p.jsx("button",{onClick:()=>_("projects"),className:`py-2 px-6 text-lg ${O==="projects"?"text-white border-b-2 border-[#F3E3C3]":"text-white/50"}`,children:"Projects"})]}),O==="crm"&&p.jsx(uk,{leads:e,updateLeadStatus:t}),O==="cms"&&p.jsx(ck,{content:n,updateContent:r,portfolioImages:i,addPortfolioImage:a,deletePortfolioImage:o}),O==="blog"&&p.jsx(dk,{blogPosts:s,createBlogPost:l,updateBlogPost:u,deleteBlogPost:d,blogEdit:c,setBlogEdit:h,blogSaving:f,blogAdminError:g}),O==="sitemap"&&p.jsx(ak,{siteMapPage:A,setSiteMapPage:j,content:n,portfolioImages:i,blogPosts:s}),O==="analytics"&&p.jsxs("div",{className:"bg-[#262626] p-8 rounded-lg grid md:grid-cols-3 gap-8",children:[p.jsxs("div",{children:[p.jsx("h4",{className:"text-xl font-display mb-4",children:"Leads & Conversion"}),p.jsx("div",{className:"text-4xl font-bold mb-2",children:C}),p.jsx("div",{className:"text-[#F3E3C3]/70 mb-2",children:"Total Leads"}),p.jsxs("div",{className:"text-2xl font-bold mb-2",children:[xe,"%"]}),p.jsx("div",{className:"text-[#F3E3C3]/70 mb-2",children:"Conversion Rate (Booked)"}),p.jsx("div",{className:"text-lg font-bold mb-2",children:Oe}),p.jsx("div",{className:"text-[#F3E3C3]/70",children:"Most Popular Service"})]}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-xl font-display mb-4",children:"Content Stats"}),p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsxs("div",{children:[p.jsx("span",{className:"text-3xl font-bold",children:Ie}),p.jsx("span",{className:"ml-2 text-[#F3E3C3]/70",children:"Blog Posts"})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-3xl font-bold",children:Fe}),p.jsx("span",{className:"ml-2 text-[#F3E3C3]/70",children:"Portfolio Images"})]})]})]}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-xl font-display mb-4",children:"Potential Revenue"}),p.jsxs("div",{className:"text-4xl font-bold mb-2",children:["$",Ae.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),p.jsx("div",{className:"text-[#F3E3C3]/70 mb-2",children:"Sum of all project opportunity values"})]})]}),O==="projects"&&p.jsxs("div",{className:"bg-[#262626] p-8 rounded-lg",children:[p.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-6 gap-4",children:[p.jsxs("div",{children:[p.jsx("h4",{className:"text-xl font-display",children:"Projects"}),p.jsx("p",{className:"text-xs text-[#F3E3C3]/70",children:"Client projects and deliverables"})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>de($=>!$),className:"bg-[#F3E3C3] text-[#1a1a1a] font-bold py-2 px-4 rounded-md",children:te?"Cancel":"New Project"}),p.jsx("button",{onClick:()=>de(!0),className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-md",children:"+ Internal Project"})]})]}),te&&p.jsxs("form",{onSubmit:$=>fe($,!1),className:"mb-8 grid md:grid-cols-2 gap-4",children:[p.jsx("input",{type:"text",value:he.name,onChange:$=>k(ae=>({...ae,name:$.target.value})),placeholder:"Project Name",className:"bg-[#1a1a1a] border border-white/20 rounded-md py-2 px-3",required:!0}),p.jsx("input",{type:"text",value:he.client,onChange:$=>k(ae=>({...ae,client:$.target.value})),placeholder:"Client Name",className:"bg-[#1a1a1a] border border-white/20 rounded-md py-2 px-3"}),p.jsx("input",{type:"number",value:he.opportunity_amount,onChange:$=>k(ae=>({...ae,opportunity_amount:$.target.value})),placeholder:"Opportunity Amount ($)",className:"bg-[#1a1a1a] border border-white/20 rounded-md py-2 px-3"}),p.jsx("select",{value:he.stage,onChange:$=>k(ae=>({...ae,stage:$.target.value})),className:"bg-[#1a1a1a] border border-white/20 rounded-md py-2 px-3",children:ve.map($=>p.jsx("option",{children:$},$))}),p.jsx("textarea",{value:he.notes,onChange:$=>k(ae=>({...ae,notes:$.target.value})),placeholder:"Notes",className:"bg-[#1a1a1a] border border-white/20 rounded-md py-2 px-3 md:col-span-2"}),p.jsx("button",{type:"submit",className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-md md:col-span-2",children:"Create Project"})]}),p.jsxs("div",{className:"mb-10",children:[p.jsx("h5",{className:"text-lg font-display mb-2",children:"Internal Projects"}),M?p.jsx("div",{className:"text-[#F3E3C3]",children:"Loading internal projects..."}):p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"w-full text-left",children:[p.jsx("thead",{className:"border-b border-white/10",children:p.jsxs("tr",{children:[p.jsx("th",{className:"p-3",children:"Name"}),p.jsx("th",{className:"p-3",children:"Completion"}),p.jsx("th",{className:"p-3",children:"Notes"}),p.jsx("th",{className:"p-3",children:"Created"}),p.jsx("th",{className:"p-3",children:"Actions"})]})}),p.jsx("tbody",{children:I.map($=>p.jsxs("tr",{className:"border-b border-white/10 last:border-b-0",children:[p.jsx("td",{className:"p-3 font-bold",children:$.name}),p.jsx("td",{className:"p-3",children:$.completion||"-"}),p.jsx("td",{className:"p-3",children:$.notes}),p.jsx("td",{className:"p-3 text-xs",children:$.created_at?new Date($.created_at).toLocaleDateString():""}),p.jsx("td",{className:"p-3",children:p.jsx("button",{onClick:()=>S($),className:"bg-blue-500 text-white px-3 py-1 rounded text-xs",children:"View"})})]},$.id))})]})})]}),p.jsxs("div",{className:"mb-10",children:[p.jsx("h5",{className:"text-lg font-display mb-2",children:"Client Projects"}),m?p.jsx("div",{className:"text-[#F3E3C3]",children:"Loading projects..."}):p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"w-full text-left",children:[p.jsx("thead",{className:"border-b border-white/10",children:p.jsxs("tr",{children:[p.jsx("th",{className:"p-3",children:"Name"}),p.jsx("th",{className:"p-3",children:"Client"}),p.jsx("th",{className:"p-3",children:"Amount"}),p.jsx("th",{className:"p-3",children:"Stage"}),p.jsx("th",{className:"p-3",children:"Notes"}),p.jsx("th",{className:"p-3",children:"Created"}),p.jsx("th",{className:"p-3",children:"Actions"})]})}),p.jsx("tbody",{children:v.map($=>p.jsxs("tr",{className:"border-b border-white/10 last:border-b-0",children:[p.jsx("td",{className:"p-3 font-bold",children:$.name}),p.jsx("td",{className:"p-3",children:$.client}),p.jsxs("td",{className:"p-3",children:["$",$.opportunity_amount?.toLocaleString?.()??""]}),p.jsx("td",{className:"p-3",children:$.stage}),p.jsx("td",{className:"p-3",children:$.notes}),p.jsx("td",{className:"p-3 text-xs",children:$.created_at?new Date($.created_at).toLocaleDateString():""}),p.jsx("td",{className:"p-3",children:p.jsx("button",{onClick:()=>S($),className:"bg-blue-500 text-white px-3 py-1 rounded text-xs",children:"View"})})]},$.id))})]})})]})]})]})})},ik=[{key:"home",label:"Home"},{key:"about",label:"About"},{key:"services",label:"Services"},{key:"portfolio",label:"Portfolio"},{key:"blog",label:"Blog"},{key:"contact",label:"Contact"}],ak=({siteMapPage:e,setSiteMapPage:t,content:n,portfolioImages:r,blogPosts:i})=>{const[a,o]=K.useState(ik),[s,l]=K.useState(!0),[u,d]=K.useState(""),[c,h]=K.useState(null),[f,g]=K.useState({title:"",content:""}),[v,m]=K.useState(!1);K.useEffect(()=>{l(!0),d(""),ue.from("site_map_order").select("*").order("order_index",{ascending:!0}).then(({data:w,error:y})=>{y?d("Failed to load site map order."):w&&w.length>0&&o(w.map(P=>({key:P.page_key,label:P.page_label}))),l(!1)})},[]);const b=async w=>{h(w),m(!1);let y="",P="";w==="about"?(y=n.about.title,P=n.about.bio):w==="services"?(y="Our Services",P="From comprehensive brand management to capturing your most precious personal moments."):w==="home"?(y="Capture. Create. Captivate.",P="Vintage heart, modern vision. Full-service photography and content strategy for brands ready to conquer the world from Houston, TX."):w==="contact"?(y="Get In Touch",P="Ready to start your project? Let's talk. We serve Houston, TX and the surrounding 50-mile radius."):w==="blog"&&(y="Blog",P="Stories, tips, and behind-the-scenes from Studio37."),g({title:y,content:P})},S=async()=>{m(!0),c==="about"&&await ue.from("site_content").update({about_title:f.title,about_bio:f.content}).eq("id",1),m(!1),h(null)},x=async w=>{for(let y=0;y<w.length;y++)await ue.from("site_map_order").update({order_index:y}).eq("page_key",w[y].key)},E=w=>{if(!w.destination)return;const y=Array.from(a),[P]=y.splice(w.source.index,1);y.splice(w.destination.index,0,P),o(y),x(y)};return s?p.jsx("div",{className:"text-[#F3E3C3]",children:"Loading site map..."}):u?p.jsx("div",{className:"text-red-400",children:u}):p.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[p.jsxs("div",{className:"md:w-1/3",children:[p.jsx("h4",{className:"text-xl font-display mb-4",children:"Website Map"}),p.jsx(vg,{onDragEnd:E,children:p.jsx(au,{droppableId:"siteMapPages",children:w=>p.jsxs("div",{ref:w.innerRef,...w.droppableProps,className:"flex flex-col items-start gap-4",children:[a.map((y,P)=>p.jsx(em,{draggableId:y.key,index:P,children:(L,O)=>p.jsxs("div",{ref:L.innerRef,...L.draggableProps,...L.dragHandleProps,className:`flex items-center gap-2 ${O.isDragging?"opacity-80":""}`,children:[p.jsx("button",{onClick:()=>t(y.key),className:`px-4 py-2 rounded-full font-bold transition-colors ${e===y.key?"bg-[#F3E3C3] text-[#1a1a1a]":"bg-[#262626] text-[#F3E3C3] hover:bg-[#F3E3C3]/30"}`,children:y.label}),["about","home","services","contact"].includes(y.key)&&p.jsx("button",{className:"ml-1 text-xs px-2 py-1 bg-[#F3E3C3] text-[#1a1a1a] rounded hover:bg-[#f3e3c3cc] transition",onClick:()=>b(y.key),type:"button",children:"Edit"}),P<a.length-1&&p.jsx("span",{className:"text-[#F3E3C3]",children:""})]})},y.key)),w.placeholder]})})})]}),p.jsxs("div",{className:"md:w-2/3",children:[p.jsx("h4",{className:"text-xl font-display mb-4",children:"Live Preview"}),p.jsx("div",{className:"bg-[#181818] rounded-lg shadow-lg p-6 min-h-[300px]",children:c?p.jsxs("form",{className:"space-y-4",onSubmit:w=>{w.preventDefault(),S()},children:[p.jsx("input",{type:"text",value:f.title,onChange:w=>g(y=>({...y,title:w.target.value})),placeholder:"Page Title",className:"w-full bg-[#1a1a1a] border border-white/20 rounded-md py-2 px-3 font-bold",required:!0}),p.jsx("label",{className:"block text-xs mb-1 text-[#F3E3C3]/70",children:"Page Content (Markdown supported)"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[p.jsx("textarea",{value:f.content,onChange:w=>g(y=>({...y,content:w.target.value})),placeholder:"Write your content in Markdown...",rows:10,className:"w-full bg-[#1a1a1a] border border-white/20 rounded-md py-2 px-3 font-mono",required:!0}),p.jsxs("div",{className:"bg-[#232323] border border-white/10 rounded-md p-3 overflow-auto min-h-[200px]",children:[p.jsx("div",{className:"text-xs text-[#F3E3C3]/60 mb-1",children:"Live Preview"}),p.jsxs("div",{className:"prose prose-invert max-w-none text-[#F3E3C3]/90",children:[p.jsx("h2",{className:"font-display",children:f.title}),p.jsx(Ia,{remarkPlugins:[rc],children:f.content||"Nothing to preview."})]})]})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{type:"submit",className:"bg-[#F3E3C3] text-[#1a1a1a] font-bold py-2 px-4 rounded-md",disabled:v,children:v?"Saving...":"Save"}),p.jsx("button",{type:"button",onClick:()=>h(null),className:"bg-gray-500 text-white py-2 px-4 rounded-md",children:"Cancel"})]})]}):p.jsx(ok,{page:e,content:n,portfolioImages:r,blogPosts:i})})]})]})},ok=({page:e,content:t,portfolioImages:n,blogPosts:r})=>{switch(e){case"home":return p.jsxs("div",{children:[p.jsx("h1",{className:"text-3xl font-display mb-2",children:"Capture. Create. Captivate."}),p.jsx("p",{className:"text-[#F3E3C3]/80 mb-4",children:"Vintage heart, modern vision. Full-service photography and content strategy for brands ready to conquer the world from Houston, TX."})]});case"about":return p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-display mb-2",children:t.about.title}),p.jsx("p",{className:"text-[#F3E3C3]/80",children:t.about.bio})]});case"services":return p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-display mb-2",children:"Our Services"}),p.jsx("p",{className:"text-[#F3E3C3]/80",children:"From comprehensive brand management to capturing your most precious personal moments."})]});case"portfolio":return p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-display mb-2",children:"Our Work"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:n.slice(0,4).map(i=>p.jsx("img",{src:i.url,alt:i.category,className:"w-20 h-20 object-cover rounded"},i.id))})]});case"blog":return p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-display mb-2",children:"Blog"}),p.jsx("ul",{className:"list-disc ml-6",children:r.slice(0,3).map(i=>p.jsx("li",{className:"text-[#F3E3C3]/80",children:i.title},i.id))})]});case"contact":return p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-display mb-2",children:"Get In Touch"}),p.jsx("p",{className:"text-[#F3E3C3]/80",children:"Ready to start your project? Let's talk. We serve Houston, TX and the surrounding 50-mile radius."})]});default:return null}};function sk({posts:e,loading:t,error:n}){return t?p.jsx("div",{className:"text-[#F3E3C3] text-center py-10",children:"Loading blog posts..."}):n?p.jsx("div",{className:"text-red-400 text-center py-10",children:n}):!e||e.length===0?p.jsx("div",{className:"text-[#F3E3C3]/70 text-center py-10",children:"No blog posts found."}):p.jsx("div",{className:"py-20 md:py-28 bg-[#212121]",children:p.jsxs("div",{className:"container mx-auto px-6",children:[p.jsx("h2",{className:"text-4xl md:text-5xl font-display mb-10",children:"Blog"}),p.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map(r=>p.jsxs("div",{className:"bg-[#262626] rounded-lg shadow-lg p-6 flex flex-col",children:[p.jsx("h3",{className:"text-2xl font-bold mb-2 text-white",children:r.title}),p.jsxs("div",{className:"text-xs text-[#F3E3C3]/60 mb-2",children:[r.author,"  ",r.publish_date?new Date(r.publish_date).toLocaleDateString():""]}),p.jsx("div",{className:"text-[#F3E3C3]/80 mb-4",children:r.excerpt}),p.jsx(tt,{to:`/blog/${r.slug}`,className:"text-[#F3E3C3] hover:underline mt-auto",children:"Read More"})]},r.id))})]})})}function lk(){return p.jsx("footer",{className:"bg-[#232323] text-[#F3E3C3] py-8 mt-20",children:p.jsxs("div",{className:"container mx-auto px-6 flex flex-col md:flex-row items-center justify-between gap-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"font-display font-bold text-lg",children:"Studio37"}),p.jsxs("span",{className:"text-xs",children:[" ",new Date().getFullYear()]})]}),p.jsxs("nav",{className:"flex gap-4",children:[p.jsx(tt,{to:"/",className:"hover:underline",children:"Home"}),p.jsx(tt,{to:"/about",className:"hover:underline",children:"About"}),p.jsx(tt,{to:"/services",className:"hover:underline",children:"Services"}),p.jsx(tt,{to:"/portfolio",className:"hover:underline",children:"Portfolio"}),p.jsx(tt,{to:"/blog",className:"hover:underline",children:"Blog"}),p.jsx(tt,{to:"/contact",className:"hover:underline",children:"Contact"})]})]})})}function uk({leads:e,updateLeadStatus:t}){if(!e||e.length===0)return p.jsx("div",{className:"text-[#F3E3C3]/70 py-8",children:"No leads found."});const n=["New","Contacted","Booked","Lost","Archived"];return p.jsx("div",{className:"overflow-x-auto bg-[#262626] rounded-lg shadow-lg p-6",children:p.jsxs("table",{className:"w-full text-left",children:[p.jsx("thead",{className:"border-b border-white/10",children:p.jsxs("tr",{children:[p.jsx("th",{className:"p-3",children:"Name"}),p.jsx("th",{className:"p-3",children:"Email"}),p.jsx("th",{className:"p-3",children:"Phone"}),p.jsx("th",{className:"p-3",children:"Service"}),p.jsx("th",{className:"p-3",children:"Status"}),p.jsx("th",{className:"p-3",children:"Created"}),p.jsx("th",{className:"p-3",children:"Actions"})]})}),p.jsx("tbody",{children:e.map(r=>p.jsxs("tr",{className:"border-b border-white/10 last:border-b-0",children:[p.jsx("td",{className:"p-3 font-bold",children:r.name}),p.jsx("td",{className:"p-3",children:r.email}),p.jsx("td",{className:"p-3",children:r.phone}),p.jsx("td",{className:"p-3",children:r.service}),p.jsx("td",{className:"p-3",children:p.jsx("span",{className:"px-2 py-1 rounded bg-[#F3E3C3]/10 text-[#F3E3C3]",children:r.status})}),p.jsx("td",{className:"p-3 text-xs",children:r.created_at?new Date(r.created_at).toLocaleDateString():""}),p.jsx("td",{className:"p-3",children:p.jsx("select",{value:r.status,onChange:i=>t(r.id,i.target.value),className:"bg-[#181818] border border-white/20 rounded px-2 py-1 text-xs text-[#F3E3C3]",children:n.map(i=>p.jsx("option",{value:i,children:i},i))})})]},r.id))})]})})}function ck({content:e,updateContent:t,portfolioImages:n,addPortfolioImage:r,deletePortfolioImage:i}){const[a,o]=D.useState(e.about.title||""),[s,l]=D.useState(e.about.bio||""),[u,d]=D.useState(!1),[c,h]=D.useState(""),[f,g]=D.useState(""),[v,m]=D.useState(""),[b,S]=D.useState(!1),x=async w=>{w.preventDefault(),d(!0),await t({about:{title:a,bio:s}}),d(!1)},E=async w=>{w.preventDefault(),S(!0),await r({url:c,category:f,caption:v,order_index:n.length,created_at:new Date().toISOString()}),h(""),g(""),m(""),S(!1)};return p.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[p.jsxs("div",{children:[p.jsx("h4",{className:"text-xl font-display mb-4",children:"Edit About Content"}),p.jsxs("form",{onSubmit:x,className:"space-y-4",children:[p.jsx("input",{type:"text",value:a,onChange:w=>o(w.target.value),placeholder:"About Title",className:"w-full bg-[#1a1a1a] border border-white/20 rounded-md py-2 px-3 font-bold",required:!0}),p.jsx("textarea",{value:s,onChange:w=>l(w.target.value),placeholder:"About Bio",rows:6,className:"w-full bg-[#1a1a1a] border border-white/20 rounded-md py-2 px-3",required:!0}),p.jsx("button",{type:"submit",className:"bg-[#F3E3C3] text-[#1a1a1a] font-bold py-2 px-4 rounded-md",disabled:u,children:u?"Saving...":"Save"})]})]}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-xl font-display mb-4",children:"Portfolio Images"}),p.jsxs("form",{onSubmit:E,className:"flex flex-col gap-2 mb-4",children:[p.jsx("input",{type:"url",value:c,onChange:w=>h(w.target.value),placeholder:"Image URL",className:"bg-[#1a1a1a] border border-white/20 rounded-md py-2 px-3",required:!0}),p.jsx("input",{type:"text",value:f,onChange:w=>g(w.target.value),placeholder:"Category",className:"bg-[#1a1a1a] border border-white/20 rounded-md py-2 px-3"}),p.jsx("input",{type:"text",value:v,onChange:w=>m(w.target.value),placeholder:"Caption",className:"bg-[#1a1a1a] border border-white/20 rounded-md py-2 px-3"}),p.jsx("button",{type:"submit",className:"bg-[#F3E3C3] text-[#1a1a1a] font-bold py-2 px-4 rounded-md",disabled:b||!c,children:b?"Adding...":"Add Image"})]}),p.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-64 overflow-y-auto",children:n.map(w=>p.jsxs("div",{className:"relative group",children:[p.jsx("img",{src:w.url,alt:w.category,className:"w-full h-24 object-cover rounded"}),p.jsx("button",{onClick:()=>i(w.id),className:"absolute top-1 right-1 bg-red-600 text-white text-xs px-2 py-1 rounded opacity-80 group-hover:opacity-100",title:"Delete",children:""}),p.jsx("div",{className:"text-xs text-[#F3E3C3]",children:w.category})]},w.id))})]})]})}function dk({blogPosts:e,createBlogPost:t,updateBlogPost:n,deleteBlogPost:r,blogEdit:i,setBlogEdit:a,blogSaving:o,blogAdminError:s}){const[l,u]=D.useState({title:"",slug:"",excerpt:"",content:"",author:"",publish_date:"",tags:"",category:""}),d=m=>{const{name:b,value:S}=m.target;u(x=>({...x,[b]:S}))},c=async m=>{m.preventDefault(),await t({...l,tags:typeof l.tags=="string"?l.tags.split(",").map(b=>b.trim()).filter(Boolean):Array.isArray(l.tags)?l.tags:[],publish_date:l.publish_date||new Date().toISOString()}),u({title:"",slug:"",excerpt:"",content:"",author:"",publish_date:"",tags:"",category:""})},[h,f]=D.useState(null);D.useEffect(()=>{if(i){const m=e.find(b=>b.id===i)||null;f(m?{...m,tags:Array.isArray(m.tags)?m.tags.join(", "):typeof m.tags=="string"?m.tags:""}:null)}else f(null)},[i,e]);const g=m=>{const{name:b,value:S}=m.target;f(x=>({...x,[b]:S}))},v=async m=>{m.preventDefault(),await n(h.id,{...h,tags:typeof h.tags=="string"?h.tags.split(",").map(b=>b.trim()).filter(Boolean):Array.isArray(h.tags)?h.tags:[]}),a(null)};return o?p.jsx("div",{className:"text-[#F3E3C3] py-8",children:"Saving..."}):p.jsxs("div",{children:[p.jsx("h4",{className:"text-xl font-display mb-4",children:"Blog Posts"}),s&&p.jsx("div",{className:"text-red-400 mb-2",children:s}),h?p.jsxs("form",{onSubmit:v,className:"space-y-2 mb-8 bg-[#232323] p-4 rounded",children:[p.jsx("input",{name:"title",value:h.title,onChange:g,placeholder:"Title",className:"w-full bg-[#181818] border border-white/20 rounded-md py-2 px-3",required:!0}),p.jsx("input",{name:"slug",value:h.slug,onChange:g,placeholder:"Slug",className:"w-full bg-[#181818] border border-white/20 rounded-md py-2 px-3",required:!0}),p.jsx("input",{name:"author",value:h.author,onChange:g,placeholder:"Author",className:"w-full bg-[#181818] border border-white/20 rounded-md py-2 px-3"}),p.jsx("input",{name:"publish_date",value:h.publish_date,onChange:g,placeholder:"Publish Date",className:"w-full bg-[#181818] border border-white/20 rounded-md py-2 px-3",type:"date"}),p.jsx("input",{name:"category",value:h.category,onChange:g,placeholder:"Category",className:"w-full bg-[#181818] border border-white/20 rounded-md py-2 px-3"}),p.jsx("input",{name:"tags",value:h.tags,onChange:g,placeholder:"Tags (comma separated)",className:"w-full bg-[#181818] border border-white/20 rounded-md py-2 px-3"}),p.jsx("textarea",{name:"excerpt",value:h.excerpt,onChange:g,placeholder:"Excerpt",className:"w-full bg-[#181818] border border-white/20 rounded-md py-2 px-3"}),p.jsx("textarea",{name:"content",value:h.content,onChange:g,placeholder:"Content (Markdown supported)",rows:6,className:"w-full bg-[#181818] border border-white/20 rounded-md py-2 px-3"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{type:"submit",className:"bg-[#F3E3C3] text-[#1a1a1a] font-bold py-2 px-4 rounded-md",children:"Save"}),p.jsx("button",{type:"button",onClick:()=>a(null),className:"bg-gray-500 text-white py-2 px-4 rounded-md",children:"Cancel"})]})]}):p.jsxs("form",{onSubmit:c,className:"space-y-2 mb-8 bg-[#232323] p-4 rounded",children:[p.jsx("input",{name:"title",value:l.title,onChange:d,placeholder:"Title",className:"w-full bg-[#181818] border border-white/20 rounded-md py-2 px-3",required:!0}),p.jsx("input",{name:"slug",value:l.slug,onChange:d,placeholder:"Slug",className:"w-full bg-[#181818] border border-white/20 rounded-md py-2 px-3",required:!0}),p.jsx("input",{name:"author",value:l.author,onChange:d,placeholder:"Author",className:"w-full bg-[#181818] border border-white/20 rounded-md py-2 px-3"}),p.jsx("input",{name:"publish_date",value:l.publish_date,onChange:d,placeholder:"Publish Date",className:"w-full bg-[#181818] border border-white/20 rounded-md py-2 px-3",type:"date"}),p.jsx("input",{name:"category",value:l.category,onChange:d,placeholder:"Category",className:"w-full bg-[#181818] border border-white/20 rounded-md py-2 px-3"}),p.jsx("input",{name:"tags",value:l.tags,onChange:d,placeholder:"Tags (comma separated)",className:"w-full bg-[#181818] border border-white/20 rounded-md py-2 px-3"}),p.jsx("textarea",{name:"excerpt",value:l.excerpt,onChange:d,placeholder:"Excerpt",className:"w-full bg-[#181818] border border-white/20 rounded-md py-2 px-3"}),p.jsx("textarea",{name:"content",value:l.content,onChange:d,placeholder:"Content (Markdown supported)",rows:6,className:"w-full bg-[#181818] border border-white/20 rounded-md py-2 px-3"}),p.jsx("button",{type:"submit",className:"bg-[#F3E3C3] text-[#1a1a1a] font-bold py-2 px-4 rounded-md",children:"Create Post"})]}),p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"w-full text-left",children:[p.jsx("thead",{className:"border-b border-white/10",children:p.jsxs("tr",{children:[p.jsx("th",{className:"p-3",children:"Title"}),p.jsx("th",{className:"p-3",children:"Author"}),p.jsx("th",{className:"p-3",children:"Date"}),p.jsx("th",{className:"p-3",children:"Category"}),p.jsx("th",{className:"p-3",children:"Tags"}),p.jsx("th",{className:"p-3",children:"Actions"})]})}),p.jsx("tbody",{children:e.map(m=>p.jsxs("tr",{className:"border-b border-white/10 last:border-b-0",children:[p.jsx("td",{className:"p-3 font-bold",children:m.title}),p.jsx("td",{className:"p-3",children:m.author}),p.jsx("td",{className:"p-3 text-xs",children:m.publish_date?new Date(m.publish_date).toLocaleDateString():""}),p.jsx("td",{className:"p-3",children:m.category}),p.jsx("td",{className:"p-3",children:Array.isArray(m.tags)?m.tags.join(", "):typeof m.tags=="string"?m.tags:""}),p.jsxs("td",{className:"p-3 flex gap-2",children:[p.jsx("button",{onClick:()=>a(m.id),className:"bg-blue-500 text-white px-3 py-1 rounded text-xs",children:"Edit"}),p.jsx("button",{onClick:()=>r(m.id),className:"bg-red-600 text-white px-3 py-1 rounded text-xs",children:"Delete"})]})]},m.id))})]})})]})}Mc.createRoot(document.getElementById("root")).render(p.jsx(K.StrictMode,{children:p.jsx(Nc,{children:p.jsx(HS,{})})}));
